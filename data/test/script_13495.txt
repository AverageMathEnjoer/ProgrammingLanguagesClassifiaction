b'package com.github.eprendre.sources_by_eprendre\n\nimport com.github.eprendre.tingshu.extensions.config\nimport com.github.eprendre.tingshu.sources.*\nimport com.github.eprendre.tingshu.utils.*\nimport io.reactivex.Completable\nimport org.jsoup.Jsoup\nimport java.net.URLEncoder\n\nobject JuTingWang : TingShu() {\n    override fun getSourceId(): String {\n        return "7d8edaa3b3e44485a2b8a8151cf5d84a"\n    }\n\n    override fun getUrl(): String {\n        return "https://www.yousxs.com"\n    }\n\n    override fun getName(): String {\n        return "\xe8\x81\x9a\xe5\x90\xac\xe7\xbd\x91"\n    }\n\n    override fun isSearchable(): Boolean {\n        return false\n    }\n\n    override fun isDiscoverable(): Boolean {\n        return false\n    }\n\n    override fun getDesc(): String {\n        return "\xe6\x8e\xa8\xe8\x8d\x90\xe6\x8c\x87\xe6\x95\xb0:3\xe6\x98\x9f \xe2\xad\x90\xe2\xad\x90\xe2\xad\x90\\n\xe7\xbd\x91\xe7\xab\x99\xe5\xb7\xb2\xe6\x97\xa0\xe6\xb3\x95\xe6\x89\x93\xe5\xbc\x80\xef\xbc\x8c\xe8\xaf\xb7\xe7\xa6\x81\xe7\x94\xa8\xe6\xad\xa4\xe6\xba\x90\xe3\x80\x82"\n    }\n\n    override fun search(keywords: String, page: Int): Pair<List<Book>, Int> {\n        val encodedKeywords = URLEncoder.encode(keywords, "utf-8")\n        val url =\n            "https://www.yousxs.com/classify.html?novelName=$encodedKeywords&pageNum=$page"\n        val doc = Jsoup.connect(url).config(true).get()\n\n        val pages = doc.selectFirst(".pagination > li:last-child").text()\n        val totalPage =\n            Regex("^.+\xe9\x83\xa8\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4\xe6\x80\xbb\xe5\x85\xb1(\\\\d+)\xe9\xa1\xb5.+$").find(pages)?.groupValues?.get(1)?.toInt() ?: 1\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select(".panel-body")[1].select("ul > li")\n        elementList.forEach { element ->\n            val bookUrl = element.selectFirst("a").absUrl("href")\n            val coverUrl = ""\n            val title = element.selectFirst("a").text().split("\xe3\x80\x91")[1]\n            val intro = ""\n            val status = element.selectFirst("span").text()\n            list.add(Book(coverUrl, bookUrl, title, "", "").apply {\n                this.intro = intro\n                this.status = status\n                this.sourceId = getSourceId()\n            })\n        }\n\n        return Pair(list, totalPage)\n    }\n\n    fun fetchBookInfo(book: Book): Completable {\n        return Completable.fromCallable {\n            val doc = Jsoup.connect(book.bookUrl).config(true).get()\n            val panelBody = doc.selectFirst(".panel-body")\n            val coverUrl = panelBody.selectFirst("img").absUrl("src")\n            val infos = panelBody.selectFirst(".row > div:last-child").children()\n            val author = infos[1].text()\n            val artist = infos[2].text()\n            val intro = infos[3].text()\n            book.coverUrl = coverUrl\n            book.artist = artist\n            book.author = author\n            book.intro = intro\n            return@fromCallable null\n        }\n    }\n\n    override fun getBookDetailInfo(bookUrl: String, loadEpisodes: Boolean, loadFullPages: Boolean): BookDetail {\n        val episodes = ArrayList<Episode>()\n        val doc = Jsoup.connect(bookUrl).config(true).get()\n        val panelBody = doc.selectFirst(".panel-body")\n        val coverUrl = panelBody.selectFirst("img").absUrl("src")\n        val infos = panelBody.selectFirst(".row > div:last-child").children()\n        val author = infos[1].text()\n        val artist = infos[2].text()\n        val intro = infos[3].text()\n\n        val panelBodyList = doc.select(".panel-body")\n        episodes.addAll(panelBodyList[1].select(".row > div > a").map {\n            Episode(it.text(), it.attr("abs:href"))\n        })\n        return BookDetail(episodes, intro, coverUrl = coverUrl, artist = artist, author = author)\n    }\n\n    override fun getAudioUrlExtractor(): AudioUrlExtractor {\n        AudioUrlWebViewExtractor.setUp(true, script = "(function() { return (ap.audio.currentSrc); })();") { src ->\n            return@setUp src.replace("\\"", "")\n        }\n        return AudioUrlWebViewExtractor\n    }\n\n    override fun getCategoryMenus(): List<CategoryMenu> {\n        val menu1 = CategoryMenu(\n            "\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4", listOf(\n                CategoryTab("\xe7\xbd\x91\xe7\xbb\x9c\xe7\x8e\x84\xe5\xb9\xbb", "https://www.yousxs.com/classify.html?clsid=1&pageNum=1"),\n                CategoryTab("\xe7\xa7\x91\xe5\xb9\xbb\xe5\xb0\x8f\xe8\xaf\xb4", "https://www.yousxs.com/classify.html?clsid=2&pageNum=1"),\n                CategoryTab("\xe6\x81\x90\xe6\x80\x96\xe6\x82\xac\xe7\x96\x91", "https://www.yousxs.com/classify.html?clsid=3&pageNum=1"),\n                CategoryTab("\xe6\xad\xa6\xe4\xbe\xa0\xe5\xb0\x8f\xe8\xaf\xb4", "https://www.yousxs.com/classify.html?clsid=4&pageNum=1"),\n                CategoryTab("\xe9\x83\xbd\xe5\xb8\x82\xe8\xa8\x80\xe6\x83\x85", "https://www.yousxs.com/classify.html?clsid=5&pageNum=1"),\n                CategoryTab("\xe5\x88\x91\xe4\xbe\xa6\xe6\x8e\xa8\xe7\x90\x86", "https://www.yousxs.com/classify.html?clsid=6&pageNum=1"),\n                CategoryTab("\xe5\x8e\x86\xe5\x8f\xb2\xe5\x86\x9b\xe4\xba\x8b", "https://www.yousxs.com/classify.html?clsid=7&pageNum=1"),\n                CategoryTab("\xe7\xab\xa5\xe8\xaf\x9d\xe5\xaf\x93\xe8\xa8\x80", "https://www.yousxs.com/classify.html?clsid=8&pageNum=1"),\n                CategoryTab("\xe5\xae\x98\xe5\x9c\xba\xe5\x95\x86\xe6\x88\x98", "https://www.yousxs.com/classify.html?clsid=9&pageNum=1"),\n                CategoryTab("\xe4\xba\xba\xe7\x89\xa9\xe7\xba\xaa\xe5\xae\x9e", "https://www.yousxs.com/classify.html?clsid=10&pageNum=1")\n            )\n        )\n        val menu2 = CategoryMenu(\n            "\xe8\xaf\x84\xe4\xb9\xa6", listOf(\n                CategoryTab("\xe5\x8d\x95\xe7\x94\xb0\xe8\x8a\xb3", "https://www.yousxs.com/classify.html?clsid=24&pageNum=1"),\n                CategoryTab("\xe5\x85\xb3\xe5\x8b\x87\xe8\xb6\x85", "https://www.yousxs.com/classify.html?clsid=25&pageNum=1"),\n                CategoryTab("\xe5\xbc\xa0\xe5\xb0\x91\xe4\xbd\x90", "https://www.yousxs.com/classify.html?clsid=26&pageNum=1"),\n                CategoryTab("\xe7\x94\xb0\xe6\x88\x98\xe4\xb9\x89", "https://www.yousxs.com/classify.html?clsid=27&pageNum=1"),\n                CategoryTab("\xe7\x94\xb0\xe8\xbf\x9e\xe5\x85\x83", "https://www.yousxs.com/classify.html?clsid=28&pageNum=1"),\n                CategoryTab("\xe8\xa2\x81\xe9\x98\x94\xe6\x88\x90", "https://www.yousxs.com/classify.html?clsid=29&pageNum=1"),\n                CategoryTab("\xe8\xbf\x9e\xe4\xb8\xbd\xe5\xa6\x82", "https://www.yousxs.com/classify.html?clsid=30&pageNum=1"),\n                CategoryTab("\xe9\xa9\xac\xe9\x95\xbf\xe8\xbe\x89", "https://www.yousxs.com/classify.html?clsid=31&pageNum=1"),\n                CategoryTab("\xe5\xad\x99\xe4\xb8\x80", "https://www.yousxs.com/classify.html?clsid=32&pageNum=1"),\n                CategoryTab("\xe7\xb2\xa4\xe8\xaf\xad\xe8\xaf\x84\xe4\xb9\xa6", "https://www.yousxs.com/classify.html?clsid=22&pageNum=1"),\n                CategoryTab("\xe5\x85\xb6\xe4\xbb\x96\xe8\xaf\x84\xe4\xb9\xa6", "https://www.yousxs.com/classify.html?clsid=16&pageNum=1")\n            )\n        )\n        val menu3 = CategoryMenu(\n            "\xe5\x85\xb6\xe4\xbb\x96", listOf(\n                CategoryTab("\xe7\x99\xbe\xe5\xae\xb6\xe8\xae\xb2\xe5\x9d\x9b", "https://www.yousxs.com/classify.html?clsid=11&pageNum=1"),\n                CategoryTab("\xe4\xba\xb2\xe5\xad\x90\xe6\x95\x99\xe8\x82\xb2", "https://www.yousxs.com/classify.html?clsid=12&pageNum=1"),\n                CategoryTab("\xe5\x95\x86\xe4\xb8\x9a\xe8\xb4\xa2\xe7\xbb\x8f", "https://www.yousxs.com/classify.html?clsid=13&pageNum=1"),\n                CategoryTab("\xe5\x9c\xb0\xe6\x96\xb9\xe6\x88\x8f\xe6\x9b\xb2", "https://www.yousxs.com/classify.html?clsid=14&pageNum=1"),\n                CategoryTab("\xe5\x81\xa5\xe5\xba\xb7\xe5\x85\xbb\xe7\x94\x9f", "https://www.yousxs.com/classify.html?clsid=15&pageNum=1"),\n                CategoryTab("\xe5\xb9\xbf\xe6\x92\xad\xe5\x89\xa7", "https://www.yousxs.com/classify.html?clsid=23&pageNum=1"),\n                CategoryTab("\xe6\x95\x99\xe8\x82\xb2\xe5\x9f\xb9\xe8\xae\xad", "https://www.yousxs.com/classify.html?clsid=17&pageNum=1"),\n                CategoryTab("\xe6\x97\xb6\xe5\xb0\x9a\xe7\x94\x9f\xe6\xb4\xbb", "https://www.yousxs.com/classify.html?clsid=18&pageNum=1"),\n                CategoryTab("\xe6\x9c\x89\xe5\xa3\xb0\xe6\x96\x87\xe5\xad\xa6", "https://www.yousxs.com/classify.html?clsid=19&pageNum=1"),\n                CategoryTab("\xe7\x9b\xb8\xe5\xa3\xb0\xe5\xb0\x8f\xe5\x93\x81", "https://www.yousxs.com/classify.html?clsid=20&pageNum=1"),\n                CategoryTab("\xe7\xbb\xbc\xe8\x89\xba\xe5\xa8\xb1\xe4\xb9\x90", "https://www.yousxs.com/classify.html?clsid=21&pageNum=1"),\n                CategoryTab("\xe8\x84\xb1\xe5\x8f\xa3\xe7\xa7\x80", "https://www.yousxs.com/classify.html?clsid=34&pageNum=1")\n            )\n        )\n        return listOf(menu1, menu2, menu3)\n    }\n\n    override fun getCategoryList(url: String): Category {\n        val doc = Jsoup.connect(url).config(true).get()\n        val nextUrl = doc.selectFirst(".pagination > li:nth-last-child(2) > a").absUrl("href")\n        val currentPage = doc.selectFirst(".pagination > li.active").text().toInt()\n        val totalPageInfo = doc.selectFirst(".pagination > li:last-child").text()\n        val totalPage = Regex("^.+\xe9\x83\xa8\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4\xe6\x80\xbb\xe5\x85\xb1(\\\\d+)\xe9\xa1\xb5.+$").find(totalPageInfo)?.groupValues?.get(1)?.toInt() ?: 1\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select(".panel-body")[1].select("ul > li")\n        elementList.forEach { element ->\n            val bookUrl = element.selectFirst("a").absUrl("href")\n            val coverUrl = ""\n            val title = element.selectFirst("a").text().split("\xe3\x80\x91")[1]\n            val intro = ""\n            val status = element.selectFirst("span").text()\n            list.add(Book(coverUrl, bookUrl, title, "", "").apply {\n                this.intro = intro\n                this.status = status\n                this.sourceId = getSourceId()\n            })\n        }\n\n        return Category(list, currentPage, totalPage, url, nextUrl)\n    }\n\n}'