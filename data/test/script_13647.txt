b'\xef\xbb\xbf// LA2451 Brackets Sequence\n// Rujia Liu\n// \xe7\xae\x97\xe6\xb3\x95\xef\xbc\x9a\xe5\xbd\xa2\xe5\xa6\x82(S)\xe6\x88\x96\xe8\x80\x85[S]\xef\xbc\x8c\xe8\xbd\xac\xe7\xa7\xbb\xe5\x88\xb0d(S)\xef\xbc\x8c\xe7\x84\xb6\xe5\x90\x8e\xe5\x88\x86\xe6\x88\x90AB\xef\xbc\x8c\xe8\xbd\xac\xe7\xa7\xbb\xe5\x88\xb0d(A)+d(B)\xe3\x80\x82\xe6\xb3\xa8\xe6\x84\x8f(S, [S, )S\xe4\xb9\x8b\xe7\xb1\xbb\xe5\x85\xa8\xe9\x83\xa8\xe5\xb1\x9e\xe4\xba\x8e\xe7\xac\xac\xe4\xba\x8c\xe7\xa7\x8d\xe8\xbd\xac\xe7\xa7\xbb\xe3\x80\x82\n// \xe6\xb3\xa8\xe6\x84\x8f\xe8\xbe\x93\xe5\x85\xa5\xe6\x9c\x89\xe7\xa9\xba\xe8\xa1\x8c\xe3\x80\x82\n// \xe6\x9c\xac\xe7\xa8\x8b\xe5\xba\x8f\xe6\x98\xaf\xe8\xae\xb0\xe5\xbf\x86\xe5\x8c\x96\xe8\xa7\xa3\xe6\xb3\x95\xef\xbc\x8c\xe9\x80\x9f\xe5\xba\xa6\xe8\xbe\x83\xe6\x85\xa2\xef\xbc\x8c\xe5\xa4\x84\xe4\xba\x8e\xe8\xb6\x85\xe6\x97\xb6\xe7\x9a\x84\xe8\xbe\xb9\xe7\xbc\x98\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\nconst int maxn = 100 + 5;\nchar S[maxn];\nint n, d[maxn][maxn];\n\nbool match(char a, char b) {\n  return (a == \'(\' && b == \')\') || (a == \'[\' && b == \']\');\n}\n\nint dp(int i, int j) {\n  if(i > j) return 0;\n  if(i == j) return 1;\n  int& ans = d[i][j];\n  if(ans >= 0) return ans;\n  ans = n;\n  if(match(S[i], S[j])) ans = min(ans, dp(i+1, j-1));\n  for(int k = i; k < j; k++)\n    ans = min(ans, dp(i, k) + dp(k+1, j));\n  return ans;\n}\n\nvoid print(int i, int j) {\n  if(i > j) return ;\n  if(i == j) {\n    if(S[i] == \'(\' || S[i] == \')\') printf("()");\n    else printf("[]");\n    return;\n  }\n  int ans = dp(i, j);\n  if(match(S[i], S[j]) && ans == dp(i+1, j-1)) {\n    printf("%c", S[i]); print(i+1, j-1); printf("%c", S[j]);\n    return;\n  }\n  for(int k = i; k < j; k++)\n    if(ans == dp(i, k) + dp(k+1, j)) {\n      print(i, k); print(k+1, j);\n      return;\n    }\n}\n\nvoid readline(char* S) {\n  fgets(S, maxn, stdin);\n}\n\nint main() {\n  int T;\n\n  readline(S);\n  sscanf(S, "%d", &T);\n  readline(S);\n\n  while(T--) {\n    readline(S);\n    n = strlen(S) - 1;\n    memset(d, -1, sizeof(d));\n    print(0, n-1);\n    printf("\\n");\n    if(T) printf("\\n");\n    readline(S);\n  }\n  return 0;\n}\n'