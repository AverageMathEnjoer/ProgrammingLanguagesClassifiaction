b'import com.github.eprendre.tingshu.utils.Book\nimport com.github.eprendre.tingshu.utils.Episode\nimport com.github.kittinunf.fuel.Fuel\nimport com.github.kittinunf.fuel.json.responseJson\nimport org.junit.Test\n\nclass BoKanYouShengTest {\n\n    @Test\n    fun bookDetail() {\n        val id = "904730"\n        val url = "https://api.bookan.com.cn/voice/album/units?album_id=$id&page=1&num=20&order=1"\n        val jsonArray = Fuel.get(url).responseJson().third.get().obj().getJSONObject("data").getJSONArray("list")\n        val episodes = ArrayList<Episode>()\n        (0 until jsonArray.length()).forEach {\n            val obj = jsonArray.getJSONObject(it)\n            val title = obj.getString("title")\n            val file = obj.getString("file")\n            episodes.add(Episode(title, file))\n        }\n        episodes.take(5).forEach {\n            println(it)\n        }\n    }\n\n    @Test\n    fun categoryList() {\n        val instance_id = 25304\n        val catetgory_id = 1308\n//        val url = "https://api.bookan.com.cn/voice/recommend/resources?instance_id=25304&section_type=8&num=300&show_latest_issue=0"\n        //val url = "https://api.bookan.com.cn/voice/album/list?instance_id=25304&page=1&category_id=8&num=24\n        val url = "https://api.bookan.com.cn/voice/book/list?instance_id=$instance_id&page=1&category_id=$catetgory_id&num=24"\n        val data = Fuel.get(url).responseJson().third.get().obj().getJSONObject("data")\n        val currentPage = data.getInt("current_page")\n        val totalPage = data.getInt("last_page")\n        val nextUrl = "https://api.bookan.com.cn/voice/book/list?instance_id=$instance_id&page=${currentPage + 1}&category_id=$catetgory_id&num=24"\n        val list = ArrayList<Book>()\n        val jsonArray = data.getJSONArray("list")\n        (0 until jsonArray.length()).forEach { i ->\n            val item = jsonArray.getJSONObject(i)\n            val coverUrl = item.getString("cover")\n            val bookUrl = item.getLong("id").toString()\n            val title = item.getString("name")\n            val artist = ""\n            val author = ""\n            val status = "\xe5\x85\xb1 ${item.getInt("total")} \xe7\xab\xa0"\n            list.add(\n                Book(\n                    coverUrl,\n                    bookUrl,\n                    title,\n                    author,\n                    artist\n                ).apply {\n                    this.status = status\n                }\n            )\n        }\n        list.take(5).forEach {\n            println(it)\n        }\n        assert(list.size > 0)\n    }\n\n    fun radio() {\n        val url1 = "https://apidata.bookan.com.cn/(radio)_(channels)__(instanceId)_(25304)_(page)_(1)_(pagenum)_()_(tags)_()"\n        val url2 = "https://apidata.bookan.com.cn/(radio)_(channels)__(instanceId)_(25304)_(page)_(2)_(pagenum)_()_(tags)_()"\n    }\n\n}'