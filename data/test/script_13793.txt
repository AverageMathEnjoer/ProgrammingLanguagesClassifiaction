b'package lyons.dao;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\n\nimport lyons.db.DbClose;\nimport lyons.db.DbConn;\nimport lyons.entity.SalesMan;\n\n/**\n * \xca\xfd\xbe\xdd\xbf\xe2SalesMan\xb1\xed\xb2\xd9\xd7\xf7\n * @author lyons(zhanglei)\n */\npublic final class SalesManDao\n{\n\t Connection        conn  = null;\n\t PreparedStatement pstmt = null;\n\t ResultSet \t\trs \t \t = null;\n\t\n\t/**\n\t * 1.\xc7\xb0\xcc\xa8\xca\xd5\xd2\xf8\xb5\xc7\xc2\xbd\n\t * @param sName \xd3\xc3\xbb\xa7\xc3\xfb\n\t * @return ArrayList<SalesMan> sPassWord,sId\n\t */\n \tpublic ArrayList<SalesMan> checkstandLog(String sName)\n\t{\n \t\tArrayList<SalesMan> salesManInfo = new ArrayList<SalesMan>();\n\t\tconn = DbConn.getconn();\n\t\tString sql = "SELECT SID,SPASSWORD FROM SALESMAN WHERE SNAME=?";\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\t\tpstmt.setString(1,sName);\n\t\t\t\t\t\n\t\t\t\t\trs \t  = pstmt.executeQuery();\n\t\t\t\t\twhile (rs.next())\n\t\t\t\t\t{\n\t\t\t\t\t\tString sPassWord = rs.getString("spassword");\n\t\t\t\t\t\tint sId = rs.getInt("sId");\n\t\t\t\t\t\tSalesMan salesMan = new SalesMan(sId,sPassWord); \n\t\t\t\t\t\tsalesManInfo.add(salesMan);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t} catch (SQLException e1)\n\t\t\t\t{\n\t\t\t\t\te1.printStackTrace();\n\t\t\t\t}finally\n\t\t\t\t{\n\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t}\n\t return salesManInfo;\n\t}\n\n \t/**\n\t * 2.\xcc\xed\xbc\xd3\xca\xdb\xbb\xf5\xd4\xb1\n\t * @param sName \xd3\xc3\xbb\xa7\xc3\xfb\n\t * @return boolean\n\t */\n\t\tpublic boolean addSalesMan(SalesMan sName)\n\t\t{\n\t\t\tboolean bool = false;\n\t\t\tconn = DbConn.getconn();\n\t\t\tString sql = "INSERT INTO SALESMAN(SNAME,SPASSWORD) VALUES(?,?)";\n\t\t\t\t\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\t\tpstmt.setString(1,sName.getSName());\n\t\t\t\t\tpstmt.setString(2,sName.getSPassWord());\n\t\t\t\t\t\n\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbool = true;\n\t\t\t\t\t}\n\t\t\t\t} catch (SQLException e)\n\t\t\t\t{\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}finally\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t}\n\t\treturn bool;\n\t\t}\n\t\n\t/**\n\t * 3.\xb8\xfc\xb8\xc4\xca\xdb\xbb\xf5\xd4\xb1\xd0\xc5\xcf\xa2\n\t * @param key \t\xd2\xaa\xb8\xfc\xb8\xc4\xcf\xee\n\t * @param sName \xd3\xc3\xbb\xa7\xc3\xfb\n\t * @return boolean\n\t */\n\tpublic  boolean updateSalesMan(int key,SalesMan sName)\n\t{\n\t\t\n\t\tboolean bool = false;\n\t\tconn = DbConn.getconn();\n\t\t\tswitch (key)\n\t\t\t{\n\t\t\tcase 1:\t\t//\t3.1 \xb8\xfc\xb8\xc4\xca\xdb\xbb\xf5\xd4\xb1\xd0\xd5\xc3\xfb\n\t\t\t\t\t\tString sqlName = "UPDATE SALESMAN SET SNAME=? WHERE SID=?";\n\t\t\t\t\t\t\n\t\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlName);\n\t\t\t\t\t\tpstmt.setString(1, sName.getSName());\n\t\t\t\t\t\tpstmt.setInt(2,sName.getSId());\n\t\t\t\t\t\t\n\t\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t{\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\t\t//\t3.2 \xb8\xfc\xb8\xc4\xca\xdb\xbb\xf5\xd4\xb1\xc3\xdc\xc2\xeb\n\t\t\t\t\t\tString sqlPrice = "UPDATE SALESMAN SET SPASSWORD=? WHERE SID=?";\n\t\t\t\t\t\t\n\t\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlPrice);\n\t\t\t\t\t\tpstmt.setString(1,sName.getSPassWord());\n\t\t\t\t\t\tpstmt.setInt(2, sName.getSId());\n\t\t\t\t\t\t\n\t\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t{\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\treturn bool;\n\t}\n\n\t/**\n\t * 4.\xc9\xbe\xb3\xfd\xca\xdb\xbb\xf5\xd4\xb1\n\t * @param sName \xd3\xc3\xbb\xa7\xc3\xfb\n\t * @return boolean\n\t */\n\tpublic boolean deleteSalesMan(String sName)\n\t{\n\t\tboolean bool = false;\n\t\tconn = DbConn.getconn();\n\t\tString sql = "DELETE FROM SALESMAN WHERE SNAME=?";\n\t\ttry\n\t\t{\n\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\tpstmt.setString(1,sName);\n\t\t\tint rs = pstmt.executeUpdate();\n\t\t\tif (rs > 0)\n\t\t\t{\n\t\t\t\tbool = true;\n\t\t\t}\n\t\t} catch (SQLException e)\n\t\t{\n\t\t\te.printStackTrace();\n\t\t}finally{\n\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t}\n\t return bool;\n\t}\n\t\n\t/**\n\t * 5.\xc4\xa3\xba\xfd\xb2\xe9\xd1\xaf\xca\xdb\xbb\xf5\xd4\xb1\n\t * @param sName \xd3\xc3\xbb\xa7\xc3\xfb\n\t * @return ArrayList<SalesMan>\n\t */\n\tpublic ArrayList<SalesMan> querySalesMan(String sName)\n\t{\n\t\tArrayList<SalesMan> SalesManList = new ArrayList<SalesMan>();\n\t\tconn = DbConn.getconn();\t\n\t\n\t\tsName = "%"+sName+"%";\t//\xb4\xd3\xd3\xc3\xbb\xa7\xb4\xa6\xbb\xf1\xc8\xa1\xb5\xc4\xd7\xd6\xb7\xfb\xb4\xae\xbc\xd3\xc9\xcf % \xb7\xfb\xba\xc5\xa3\xac\xc0\xb4\xb4\xef\xb5\xbd\xc4\xa3\xba\xfd\xb2\xe9\xd1\xaf\xb5\xc4\xc4\xbf\xb5\xc4.\xd7\xd6\xb7\xfb\xb4\xae \xb5\xc4\xc1\xac\xbd\xd3\xbb\xb9\xd3\xd0\xb8\xfc\xd3\xc5\xd0\xe3\xb5\xc4\xb7\xbd\xca\xbd\xa3\xac\xb4\xfd\xd3\xc5\xbb\xaf\xb4\xfa\xc2\xeb\xa3\xa1\n\t\tString sql = "SELECT * FROM SALESMAN WHERE SNAME LIKE ?";  //\xbe\xd3\xc8\xbb\xb2\xbb\xc4\xdc\xd6\xb1\xbd\xd3\xb8\xfa % .\xd6\xbb\xc4\xdc\xd3\xc3\xc1\xac\xbd\xd3\xd7\xd6\xb7\xfb\xb4\xae\xb5\xc4\xb7\xbd\xca\xbd\n\t\t   try\n\t\t   {\n\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\tpstmt.setString(1, sName);\n\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\twhile (rs.next())\n\t\t\t\t{\n\t\t\t\t\tint sid = rs.getInt("sid");\n\t\t\t\t\tString sname = rs.getString(2);\n\t\t\t\t\tString sPassWord = rs.getString(3);\n\t\t\t\t\t\n\t\t\t\t\tSalesMan salesMan = new SalesMan(sid,sname,sPassWord);\n\t\t\t\t\tSalesManList.add(salesMan);\n\t\t\t\t}\n\t\t\t} catch (SQLException e)\n\t\t\t{\n\t\t\t\te.printStackTrace();\n\t\t\t}finally\n\t\t\t\t\t{\n\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t}\n\t\treturn SalesManList;\n\t}\n\t\n\t/**\n\t * 6.\xcf\xd4\xca\xbe\xcb\xf9\xd3\xd0\xca\xdb\xbb\xf5\xd4\xb1\n\t * @return ArrayList<SalesMan>\n\t */\n\tpublic  ArrayList<SalesMan> displaySalesMan()\n\t{\n\t\tArrayList<SalesMan> salesManList = new ArrayList<SalesMan>();\n\t\tconn = DbConn.getconn(); \n\t\tString sql = "SELECT * FROM SALESMAN";\n\t\t\n\t\ttry\n\t\t{\n\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\trs =  pstmt.executeQuery();\n\t\t\twhile (rs.next())\n\t\t\t{\n\t\t\t\tint sId = rs.getInt(1);\n\t\t\t\tString sName = rs.getString(2);\n\t\t\t\tString sSpassWord = rs.getString(3);\n\t\t\t\t\n\t\t\t\tSalesMan salesMan = new SalesMan(sId,sName,sSpassWord);\n\t\t\t\tsalesManList.add(salesMan);\n\t\t\t}\n\t\t} catch (SQLException e)\n\t\t{\n\t\t\te.printStackTrace();\n\t\t}finally\n\t\t\t\t{\n\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t}\n\t return salesManList;\n\t}\n\t\n}\n'