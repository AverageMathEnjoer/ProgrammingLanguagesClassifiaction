b'package com.codeest.geeknews.ui.gank.fragment;\n\nimport android.os.Bundle;\nimport android.support.design.widget.TabLayout;\nimport android.support.v4.app.Fragment;\nimport android.support.v4.view.ViewPager;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.base.SimpleFragment;\nimport com.codeest.geeknews.component.RxBus;\nimport com.codeest.geeknews.model.event.SearchEvent;\nimport com.codeest.geeknews.ui.gank.adapter.GankMainAdapter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\n\n/**\n * Created by codeest on 16/8/19.\n */\n\npublic class GankMainFragment extends SimpleFragment{\n\n    @BindView(R.id.tab_gank_main)\n    TabLayout mTabLayout;\n    @BindView(R.id.vp_gank_main)\n    ViewPager mViewPager;\n\n    public static String[] tabTitle = new String[]{"Android","iOS","\xe5\x89\x8d\xe7\xab\xaf","\xe7\xa6\x8f\xe5\x88\xa9"};\n    List<Fragment> fragments = new ArrayList<>();\n\n    GankMainAdapter mAdapter;\n    TechFragment androidFragment;\n    TechFragment iOSFragment;\n    TechFragment webFragment;\n    GirlFragment girlFragment;\n\n    @Override\n    protected int getLayoutId() {\n        return R.layout.fragment_gank_main;\n    }\n\n    @Override\n    protected void initEventAndData() {\n        androidFragment = new TechFragment();\n        iOSFragment = new TechFragment();\n        webFragment = new TechFragment();\n        girlFragment = new GirlFragment();\n        Bundle androidBundle = new Bundle();\n        androidBundle.putString(Constants.IT_GANK_TYPE, tabTitle[0]);\n        androidBundle.putInt(Constants.IT_GANK_TYPE_CODE, Constants.TYPE_ANDROID);\n        androidFragment.setArguments(androidBundle);\n        Bundle iosBundle = new Bundle();\n        iosBundle.putString(Constants.IT_GANK_TYPE, tabTitle[1]);\n        iosBundle.putInt(Constants.IT_GANK_TYPE_CODE, Constants.TYPE_IOS);\n        iOSFragment.setArguments(iosBundle);\n        Bundle webBundle = new Bundle();\n        webBundle.putString(Constants.IT_GANK_TYPE, tabTitle[2]);\n        webBundle.putInt(Constants.IT_GANK_TYPE_CODE, Constants.TYPE_WEB);\n        webFragment.setArguments(webBundle);\n\n        fragments.add(androidFragment);\n        fragments.add(iOSFragment);\n        fragments.add(webFragment);\n        fragments.add(girlFragment);\n        mAdapter = new GankMainAdapter(getChildFragmentManager(),fragments);\n        mViewPager.setAdapter(mAdapter);\n\n        //TabLayout\xe9\x85\x8d\xe5\x90\x88ViewPager\xe6\x9c\x89\xe6\x97\xb6\xe4\xbc\x9a\xe5\x87\xba\xe7\x8e\xb0\xe4\xb8\x8d\xe6\x98\xbe\xe7\xa4\xbaTab\xe6\x96\x87\xe5\xad\x97\xe7\x9a\x84Bug,\xe9\x9c\x80\xe8\xa6\x81\xe6\x8c\x89\xe5\xa6\x82\xe4\xb8\x8b\xe9\xa1\xba\xe5\xba\x8f\n        mTabLayout.addTab(mTabLayout.newTab().setText(tabTitle[0]));\n        mTabLayout.addTab(mTabLayout.newTab().setText(tabTitle[1]));\n        mTabLayout.addTab(mTabLayout.newTab().setText(tabTitle[2]));\n        mTabLayout.addTab(mTabLayout.newTab().setText(tabTitle[3]));\n        mTabLayout.setupWithViewPager(mViewPager);\n        mTabLayout.getTabAt(0).setText(tabTitle[0]);\n        mTabLayout.getTabAt(1).setText(tabTitle[1]);\n        mTabLayout.getTabAt(2).setText(tabTitle[2]);\n        mTabLayout.getTabAt(3).setText(tabTitle[3]);\n    }\n\n    public void doSearch(String query) {\n        switch (mViewPager.getCurrentItem()) {\n            case 0:\n                RxBus.getDefault().post(new SearchEvent(query, Constants.TYPE_ANDROID));\n                break;\n            case 1:\n                RxBus.getDefault().post(new SearchEvent(query, Constants.TYPE_IOS));\n                break;\n            case 2:\n                RxBus.getDefault().post(new SearchEvent(query, Constants.TYPE_WEB));\n                break;\n            case 3:\n                RxBus.getDefault().post(new SearchEvent(query, Constants.TYPE_GIRL));\n                break;\n        }\n    }\n}\n'