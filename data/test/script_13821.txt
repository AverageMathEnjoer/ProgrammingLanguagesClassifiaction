b'// UVa12412 A Typical Homework (a.k.a Shi Xiong Bang Bang Mang)\n// Rujia Liu\n#include<stdio.h>\n#include<string.h>\n#define maxn 1000\n#define maxl 100\n#define EPS 1e-5\n\nint n = 0;\nchar sid[maxn][maxl];\nint cid[maxn];\nchar name[maxn][maxl];\nint score[maxn][5];\nint removed[maxn];\n\nconst char* course_name[] = {"Chinese", "Mathematics", "English", "Programming"};\n\nint valid(int k) {\n  for(int i = 0; i < k; i++) if(!removed[i]) {\n    if(strcmp(sid[i], sid[k]) == 0) return 0;\n  }\n  return 1;\n}\n\nvoid add() {\n  for(;;) {\n    printf("Please enter the SID, CID, name and four scores. Enter 0 to finish.\\n");\n    scanf("%s", sid[n]);\n    if(strcmp(sid[n], "0") == 0) break;\n    scanf("%d%s%d%d%d%d", &cid[n], name[n], &score[n][0], &score[n][1], &score[n][2], &score[n][3]);\n    if(valid(n)) { score[n][4] = score[n][0]+score[n][1]+score[n][2]+score[n][3]; n++; }\n    else printf("Duplicated SID.\\n");\n  }\n}\n\nint rank(int k) {\n  int r = 0;\n  for(int i = 0; i < n; i++)\n    if(!removed[i] && score[i][4] > score[k][4]) r++;\n  return r+1;\n}\n\nvoid DQ(int isq) {\n  char s[maxl];\n  for(;;) {\n    printf("Please enter SID or name. Enter 0 to finish.\\n");\n    scanf("%s", s);\n    if(strcmp(s, "0") == 0) break;\n    int r = 0;\n    for(int i = 0; i < n; i++) if(!removed[i]) {\n      if(strcmp(sid[i], s) == 0 || strcmp(name[i], s) == 0) {\n        if(isq) printf("%d %s %d %s %d %d %d %d %d %.2f\\n", rank(i), sid[i], cid[i], name[i], score[i][0], score[i][1], score[i][2], score[i][3], score[i][4], score[i][4]/4.0+EPS);\n        else { removed[i] = 1; r++; }\n      }\n    }\n    if(!isq) printf("%d student(s) removed.\\n", r);\n  }\n}\n\ndouble get_course_stat(int c, int s, int* passed, int* failed) {\n  int tot = 0;\n  *passed = *failed = 0;\n  for(int i = 0; i < n; i++)\n    if(!removed[i] && (c == 0 || cid[i] == c)) {\n      tot += score[i][s];\n      if(score[i][s] >= 60) (*passed)++; else (*failed)++;\n    }\n  return (double)tot / (double)(*passed + *failed);\n}\n\nvoid get_overall_stat(int c, int* cnt) {\n  cnt[0] = cnt[1] = cnt[2] = cnt[3] = cnt[4] = 0;\n  for(int i = 0; i < n; i++)\n    if(!removed[i] && (c == 0 || cid[i] == c)) {\n      int k = 0;\n      for(int j = 0; j < 4; j++) if(score[i][j] >= 60) k++;\n      cnt[k]++;\n    }\n}\n\nvoid stat() {\n  int c;\n  printf("Please enter class ID, 0 for the whole statistics.\\n");\n  scanf("%d", &c);\n  for(int i = 0; i < 4; i++) {\n    int passed, failed;\n    double avg = get_course_stat(c, i, &passed, &failed);\n    printf("%s\\n", course_name[i]);\n    printf("Average Score: %.2f\\n", avg+EPS);\n    printf("Number of passed students: %d\\n", passed);\n    printf("Number of failed students: %d\\n", failed);\n    printf("\\n");\n  }\n  int cnt[5];\n  get_overall_stat(c, cnt);\n\n  printf("Overall:\\n");\n  printf("Number of students who passed all subjects: %d\\n", cnt[4]);\n  printf("Number of students who passed 3 or more subjects: %d\\n", cnt[4]+cnt[3]);\n  printf("Number of students who passed 2 or more subjects: %d\\n", cnt[4]+cnt[3]+cnt[2]);\n  printf("Number of students who passed 1 or more subjects: %d\\n", cnt[4]+cnt[3]+cnt[2]+cnt[1]);\n  printf("Number of students who failed all subjects: %d\\n", cnt[0]);\n  printf("\\n");\n}\n\nint main() {\n  for(;;) {\n    int choice;\n    printf("Welcome to Student Performance Management System (SPMS).\\n");\n    printf("\\n");\n    printf("1 - Add\\n");\n    printf("2 - Remove\\n");\n    printf("3 - Query\\n");\n    printf("4 - Show ranking\\n");\n    printf("5 - Show Statistics\\n");\n    printf("0 - Exit\\n");\n    printf("\\n");\n\n    scanf("%d", &choice);\n    if(choice == 0) break;\n    if(choice == 1) add();\n    if(choice == 2) DQ(0);\n    if(choice == 3) DQ(1);\n    if(choice == 4) printf("Showing the ranklist hurts students\' self-esteem. Don\'t do that.\\n");\n    if(choice == 5) stat();\n  }\n  return 0;\n}\n'