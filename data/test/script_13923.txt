b'package org.sang.controller;\n\nimport org.sang.bean.RespBean;\nimport org.sang.service.UserService;\nimport org.sang.utils.Util;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n/**\n * Created by sang on 2017/12/24.\n */\n@RestController\npublic class UserController {\n\n    @Autowired\n    UserService userService;\n\n    @RequestMapping("/currentUserName")\n    public String currentUserName() {\n        return Util.getCurrentUser().getNickname();\n    }\n\n    @RequestMapping("/currentUserId")\n    public Long currentUserId() {\n        return Util.getCurrentUser().getId();\n    }\n\n    @RequestMapping("/currentUserEmail")\n    public String currentUserEmail() {\n        return Util.getCurrentUser().getEmail();\n    }\n\n    @RequestMapping("/isAdmin")\n    public Boolean isAdmin() {\n        List<GrantedAuthority> authorities = Util.getCurrentUser().getAuthorities();\n        for (GrantedAuthority authority : authorities) {\n            if (authority.getAuthority().contains("\xe8\xb6\x85\xe7\xba\xa7\xe7\xae\xa1\xe7\x90\x86\xe5\x91\x98")) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    @RequestMapping(value = "/updateUserEmail",method = RequestMethod.PUT)\n    public RespBean updateUserEmail(String email) {\n        if (userService.updateUserEmail(email) == 1) {\n            return new RespBean("success", "\xe5\xbc\x80\xe5\x90\xaf\xe6\x88\x90\xe5\x8a\x9f!");\n        }\n        return new RespBean("error", "\xe5\xbc\x80\xe5\x90\xaf\xe5\xa4\xb1\xe8\xb4\xa5!");\n    }\n}\n'