b'package icu.nullptr.twifucker.ui\n\nimport android.app.AlertDialog\nimport android.content.Context\nimport com.github.kyuubiran.ezxhelper.EzXHelper.addModuleAssetPath\nimport icu.nullptr.twifucker.R\nimport icu.nullptr.twifucker.modulePrefs\nimport org.json.JSONArray\nimport org.json.JSONObject\n\nclass KeyValueDialog(context: Context, onChange: (JSONArray) -> Unit) :\n    AlertDialog.Builder(context) {\n    init {\n        addModuleAssetPath(context)\n\n        setTitle(R.string.feature_switch_value_boolean)\n        val keyValueView = KeyValueView(context)\n        setView(keyValueView)\n        setNeutralButton(R.string.settings_dismiss, null)\n        setPositiveButton(R.string.save) { _, _ ->\n            if (keyValueView.editText.text.isBlank()) return@setPositiveButton\n            val featureSwitch = modulePrefs.getString("feature_switch", "[]")\n            val arr = JSONArray(featureSwitch)\n            if (keyValueView.isBoolean) {\n                arr.put(\n                    JSONObject().put("key", keyValueView.editText.text)\n                        .put("value", keyValueView.switch.isChecked).put("type", "boolean")\n                )\n            } else {\n                if (keyValueView.inputDecimal.text.isBlank()) return@setPositiveButton\n                arr.put(\n                    JSONObject().put("key", keyValueView.editText.text)\n                        .put("value", keyValueView.inputDecimal.text).put("type", "decimal")\n                )\n            }\n            modulePrefs.putString("feature_switch", arr.toString())\n            onChange(arr)\n        }\n        keyValueView.focus()\n        show()\n    }\n}'