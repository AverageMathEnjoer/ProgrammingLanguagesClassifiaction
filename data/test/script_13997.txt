b'// UVa12538 Version Controlled IDE\n// Rujia Liu\n// This code makes use of rope, a persistent string available in gcc\'s STL extensions.\n#include<cstdio>\n#include<iostream>\n#include<ext/rope>\nusing namespace std;\nusing namespace __gnu_cxx;\n\nconst int maxn = 50000 + 5;\nconst int maxlen = 100000 + 5;\n\ncrope cur, versions[maxn];\nchar s[maxlen];\n\nint main() {\n  int n;\n  scanf("%d", &n); // a single test case\n  int d = 0;\n  int vnow = 0;\n  while(n--) {\n    int op, p, c, v;\n    scanf("%d", &op);\n    if(op == 1) {\n      scanf("%d%s", &p, s);\n      p -= d;\n      cur.insert(p, s);\n      versions[++vnow] = cur;\n    }\n    else if(op == 2) {\n      scanf("%d%d", &p, &c);\n      p -= d; c -= d;\n      cur.erase(p-1, c);\n      versions[++vnow] = cur;\n    }\n    else {\n      scanf("%d%d%d", &v, &p, &c);\n      p -= d; v -= d; c -= d;\n      crope r = versions[v].substr(p-1, c);\n      d += count(r.begin(), r.end(), \'c\');\n      cout << r << "\\n";\n    }\n  }\n  return 0;\n}\n'