b'package com.github.razir.progressbutton\n\nimport android.content.Context\nimport android.graphics.Rect\nimport android.text.SpannableString\nimport android.text.Spanned\nimport android.text.TextUtils\nimport android.text.method.TransformationMethod\nimport android.view.View\nimport java.util.*\n\nclass AllCapsSpannedTransformationMethod(context: Context) : TransformationMethod {\n\n\n    private val locale: Locale? = context.resources.configuration.locale\n\n    override fun getTransformation(source: CharSequence?, view: View): CharSequence? {\n        if (source == null) {\n            return null\n        }\n        val upperCaseText = source.toString().toUpperCase(locale ?: Locale.getDefault())\n        if (source is Spanned) {\n            val spannable = SpannableString(upperCaseText)\n            TextUtils.copySpansFrom(source, 0, source.length, null, spannable, 0)\n            return spannable\n        } else {\n            return upperCaseText\n        }\n    }\n\n    override fun onFocusChanged(\n        view: View, sourceText: CharSequence, focused: Boolean, direction: Int,\n        previouslyFocusedRect: Rect?\n    ) {\n    }\n\n}\n'