b'package com.codeest.geeknews.ui.zhihu.fragment;\n\nimport android.app.ActivityOptions;\nimport android.content.Intent;\nimport android.support.v4.widget.SwipeRefreshLayout;\nimport android.support.v7.widget.LinearLayoutManager;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.View;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.base.RootFragment;\nimport com.codeest.geeknews.model.bean.HotListBean;\nimport com.codeest.geeknews.presenter.zhihu.HotPresenter;\nimport com.codeest.geeknews.base.contract.zhihu.HotContract;\nimport com.codeest.geeknews.ui.zhihu.activity.ZhihuDetailActivity;\nimport com.codeest.geeknews.ui.zhihu.adapter.HotAdapter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\n\n/**\n * Created by codeest on 2016/8/11.\n */\npublic class HotFragment extends RootFragment<HotPresenter> implements HotContract.View {\n\n    @BindView(R.id.view_main)\n    RecyclerView rvHotContent;\n    @BindView(R.id.swipe_refresh)\n    SwipeRefreshLayout swipeRefresh;\n\n    List<HotListBean.RecentBean> mList;\n    HotAdapter mAdapter;\n\n    @Override\n    protected void initInject() {\n        getFragmentComponent().inject(this);\n    }\n\n    @Override\n    protected int getLayoutId() {\n        return R.layout.view_common_list;\n    }\n\n    @Override\n    protected void initEventAndData() {\n        super.initEventAndData();\n        mList = new ArrayList<>();\n        stateLoading();\n        mAdapter = new HotAdapter(mContext,mList);\n        rvHotContent.setVisibility(View.INVISIBLE);\n        rvHotContent.setLayoutManager(new LinearLayoutManager(mContext));\n        rvHotContent.setAdapter(mAdapter);\n        mPresenter.getHotData();\n        swipeRefresh.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {\n            @Override\n            public void onRefresh() {\n                mPresenter.getHotData();\n            }\n        });\n        mAdapter.setOnItemClickListener(new HotAdapter.OnItemClickListener() {\n            @Override\n            public void onItemClick(int position, View shareView) {\n                mPresenter.insertReadToDB(mList.get(position).getNews_id());\n                mAdapter.setReadState(position,true);\n                mAdapter.notifyItemChanged(position);\n                Intent intent = new Intent();\n                intent.setClass(mContext, ZhihuDetailActivity.class);\n                intent.putExtra(Constants.IT_ZHIHU_DETAIL_ID, mList.get(position).getNews_id());\n                ActivityOptions options = ActivityOptions.makeSceneTransitionAnimation(mActivity, shareView, "shareView");\n                mContext.startActivity(intent,options.toBundle());\n            }\n        });\n    }\n\n    @Override\n    public void stateError() {\n        super.stateError();\n        if(swipeRefresh.isRefreshing()) {\n            swipeRefresh.setRefreshing(false);\n        }\n    }\n\n    @Override\n    public void showContent(HotListBean hotListBean) {\n        if (swipeRefresh.isRefreshing()) {\n            swipeRefresh.setRefreshing(false);\n        }\n        stateMain();\n        rvHotContent.setVisibility(View.VISIBLE);\n        mList.clear();\n        mList.addAll(hotListBean.getRecent());\n        mAdapter.notifyDataSetChanged();\n    }\n}\n'