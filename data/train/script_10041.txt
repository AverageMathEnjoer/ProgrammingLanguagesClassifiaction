b'package com.naman14.timber.dialogs;\n\nimport android.app.Dialog;\nimport android.os.Bundle;\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.DialogFragment;\nimport android.view.View;\n\nimport com.afollestad.materialdialogs.MaterialDialog;\nimport com.naman14.timber.MusicPlayer;\nimport com.naman14.timber.dataloaders.PlaylistLoader;\nimport com.naman14.timber.models.Playlist;\nimport com.naman14.timber.models.Song;\n\nimport java.util.List;\n\n/**\n * Created by naman on 20/12/15.\n */\npublic class AddPlaylistDialog extends DialogFragment {\n\n    public static AddPlaylistDialog newInstance(Song song) {\n        long[] songs = new long[1];\n        songs[0] = song.id;\n        return newInstance(songs);\n    }\n\n    public static AddPlaylistDialog newInstance(long[] songList) {\n        AddPlaylistDialog dialog = new AddPlaylistDialog();\n        Bundle bundle = new Bundle();\n        bundle.putLongArray("songs", songList);\n        dialog.setArguments(bundle);\n        return dialog;\n    }\n\n    @NonNull\n    @Override\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\n\n        final List<Playlist> playlists = PlaylistLoader.getPlaylists(getActivity(), false);\n        CharSequence[] chars = new CharSequence[playlists.size() + 1];\n        chars[0] = "Create new playlist";\n\n        for (int i = 0; i < playlists.size(); i++) {\n            chars[i + 1] = playlists.get(i).name;\n        }\n        return new MaterialDialog.Builder(getActivity()).title("Add to playlist").items(chars).itemsCallback(new MaterialDialog.ListCallback() {\n            @Override\n            public void onSelection(MaterialDialog dialog, View itemView, int which, CharSequence text) {\n                long[] songs = getArguments().getLongArray("songs");\n                if (which == 0) {\n                    CreatePlaylistDialog.newInstance(songs).show(getActivity().getSupportFragmentManager(), "CREATE_PLAYLIST");\n                    return;\n                }\n\n                MusicPlayer.addToPlaylist(getActivity(), songs, playlists.get(which - 1).id);\n                dialog.dismiss();\n\n            }\n        }).build();\n    }\n}\n'