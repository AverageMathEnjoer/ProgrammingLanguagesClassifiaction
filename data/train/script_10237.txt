b'/*Copyright \xc2\xa9  2017 Lyons. All rights reserved. */\npackage lyons.common.controller.goods;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport lyons.common.controller.BaseController;\nimport lyons.common.model.goods.GOrder;\nimport lyons.common.model.goods.Goods;\nimport lyons.common.service.goods.GOrderService;\nimport lyons.common.service.goods.GoodsService;\n\n/**\n * @Description: \xe5\x95\x86\xe5\x93\x81\xe5\xb1\x95\xe7\xa4\xba\n * @ClassName: GoodsController\n * @author: lyons<zhanglei>\n * @date: 2017\xe5\xb9\xb42\xe6\x9c\x886\xe6\x97\xa5 \xe4\xb8\x8b\xe5\x8d\x886:22:29\n * @version: [1.0]\n */\n@Controller\npublic class GoodsController extends BaseController\n{\n    @Autowired\n    private GoodsService goodsService;\n    @Autowired\n    private GOrderService orderService;\n    \n    \n    @RequestMapping("/buy")\n    public String buy(Model model,String detailgId)\n    {\n        goodsList.clear();\n        goodsList.add(goodsService.findDetail(detailgId));\n        \n        model.addAttribute("buyingList", goodsList);\n        return "/goods/buy";\n    }\n    \n    \n    /**\n     * @Title: show\n     * @Description: \xe6\x9f\xa5\xe8\xaf\xa2\xe6\x89\x80\xe6\x9c\x89\xe5\x95\x86\xe5\x93\x81\n     * @return: List<Goods>\n     */\n    @RequestMapping(value="/goods/show",method = RequestMethod.POST)\n    public List<Goods> show()\n    {\n      return  goodsService.findAllGoods();\n    }\n    \n    /**\n     * @Title: query\n     * @Description: \xe6\x90\x9c\xe7\xb4\xa2\xe5\x95\x86\xe5\x93\x81\n     * @param keyword\n     * @param model\n     * @return: void\n     */\n    @RequestMapping(value="/queryGoodsByKeyword")\n    public String query(@RequestParam("keyword") String keyword,Model model)\n    {\n        model.addAttribute("goodsList", goodsService.queryByKeyword(keyword));\n        return "goods/query";\n    }\n    \n    /**\n     * @Title: detail\n     * @Description: \xe5\x95\x86\xe5\x93\x81\xe8\xaf\xa6\xe6\x83\x85\n     * @param gId\n     * @param map\n     * @return: String\n     */\n    @RequestMapping("/goodsDetail")\n    public ModelAndView detail(@RequestParam("gId") String gId,Model model)\n    {\n        goods = goodsService.findDetail(gId);\n        if (goods != null)\n        {\n            model.addAttribute("goodsDetail", goods);\n            modelAndView.setViewName("/goods/detail");\n        }else {\n            modelAndView.setViewName("error/404");\n        }\n        \n        return modelAndView;\n    }\n\n    /**\n     * @Title: buy\n     * @Description: \xe8\xb4\xad\xe4\xb9\xb0\xe5\x95\x86\xe5\x93\x81\n     * @param order\n     * @return: int\n     */\n    @RequestMapping(value="/goods/buy",method = RequestMethod.POST)\n    public int buy(List<GOrder> orders)\n    {\n        \n        /*\n         * \xe5\x87\x8f\xe5\xba\x93\xe5\xad\x98\n         */\n        \n        \n        /*\n         *\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x88\xb0\xe8\xae\xa2\xe5\x8d\x95\xe8\xa1\xa8\xe4\xb8\xad \n         */\n        orderService.buyInsertsOrder(orders);\n        return 1;\n    }\n}\n'