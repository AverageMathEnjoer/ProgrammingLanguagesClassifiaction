b'\xef\xbb\xbfusing System;\nusing System.Windows.Threading;\n\nnamespace DMSkin.Core\n{\n    /// <summary>\n    /// UI\xe6\x89\xa7\xe8\xa1\x8c\xe5\x99\xa8\n    /// </summary>\n    public static class UIExecute\n    {\n        /// <summary>\n        /// UI\xe7\xba\xbf\xe7\xa8\x8b\xe4\xb8\xad\xe6\x89\xa7\xe8\xa1\x8c\xe6\x96\xb9\xe6\xb3\x95\n        /// </summary>\n        /// <param name="action">\xe6\x89\xa7\xe8\xa1\x8c\xe7\x9a\x84\xe6\x96\xb9\xe6\xb3\x95</param>\n        public static void Run(this Action action)\n        {\n            executor(action , false);\n        }\n\n        /// <summary>\n        /// UI\xe7\xba\xbf\xe7\xa8\x8b\xe4\xb8\xad\xe5\xbc\x82\xe6\xad\xa5\xe6\x89\xa7\xe8\xa1\x8c\xe6\x96\xb9\xe6\xb3\x95\n        /// </summary>\n        /// <param name="action">\xe6\x89\xa7\xe8\xa1\x8c\xe7\x9a\x84\xe6\x96\xb9\xe6\xb3\x95</param>\n        public static void RunAsync(this Action action)\n        {\n            executor(action, true);\n        }\n\n        private static Action<Action, bool> executor = (action, async) => action();\n        /// <summary>\n        /// \xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96UI\xe8\xb0\x83\xe5\xba\xa6\xe5\x99\xa8\n        /// </summary>\n        public static void Initialize()\n        {\n            var dispatcher = Dispatcher.CurrentDispatcher;\n            executor = (action, async) =>\n            {\n                //\xe7\xa1\xae\xe8\xae\xa4\xe6\x98\xaf\xe5\xbd\x93\xe5\x89\x8d\xe7\x9a\x84\xe7\xba\xbf\xe7\xa8\x8b\n                if (dispatcher.CheckAccess())\n                {\n                    action();\n                }\n                else\n                {\n                    //\xe5\xbc\x82\xe6\xad\xa5\xe6\x89\xa7\xe8\xa1\x8c\n                    if (async)\n                    {\n                        dispatcher.BeginInvoke(action);\n                    }\n                    else\n                    {\n                        dispatcher.Invoke(action);\n                    }\n                }\n            };\n        }\n    }\n}\n'