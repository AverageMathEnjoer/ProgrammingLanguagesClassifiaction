b'package id.zelory.compressor.constraint\n\nimport android.graphics.BitmapFactory\nimport id.zelory.compressor.calculateInSampleSize\nimport id.zelory.compressor.decodeSampledBitmapFromFile\nimport id.zelory.compressor.determineImageRotation\nimport id.zelory.compressor.overWrite\nimport java.io.File\n\n/**\n * Created on : January 24, 2020\n * Author     : zetbaitsu\n * Name       : Zetra\n * GitHub     : https://github.com/zetbaitsu\n */\nclass ResolutionConstraint(private val width: Int, private val height: Int) : Constraint {\n\n    override fun isSatisfied(imageFile: File): Boolean {\n        return BitmapFactory.Options().run {\n            inJustDecodeBounds = true\n            BitmapFactory.decodeFile(imageFile.absolutePath, this)\n            calculateInSampleSize(this, width, height) <= 1\n        }\n    }\n\n    override fun satisfy(imageFile: File): File {\n        return decodeSampledBitmapFromFile(imageFile, width, height).run {\n            determineImageRotation(imageFile, this).run {\n                overWrite(imageFile, this)\n            }\n        }\n    }\n}\n\nfun Compression.resolution(width: Int, height: Int) {\n    constraint(ResolutionConstraint(width, height))\n}'