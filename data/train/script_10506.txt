b'package lyons.goods.action;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.util.LinkedList;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\nimport lyons.goods.service.GoodsServiceImpl;\nimport lyons.user.entity.User;\nimport lyons.user.service.UserService;\nimport lyons.util.Iconst;\n\n@SuppressWarnings("serial")\npublic class BuyGoodsAction extends HttpServlet\n{\n    String userName, backNews;\n    \n    LinkedList<String> car;\n    \n    public void doGet(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException\n    {\n        doPost(request, response);\n    }\n    \n    public void doPost(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException\n    {\n        \n        response.setContentType("text/html;charset=UTF-8");\n        request.setCharacterEncoding("UTF-8");\n        \n        // \xc5\xd0\xb6\xcf\xca\xc7\xb7\xf1\xb5\xc7\xc2\xbd\n        userName = (new UserService()).isLogin(request, response).trim();\n        if ("".equals(userName) || userName == null){return;}\n        \n        // \xb4\xd3\xc4\xa3\xd0\xcd\xd6\xd0\xd6\xb1\xbd\xd3\xc4\xc3\xc8\xa1\xb9\xba\xce\xef\xb3\xb5\xd0\xc5\xcf\xa2\n        HttpSession session = request.getSession(true);\n        User loginBean = (User)session.getAttribute("loginBean");\n        car = loginBean.getCar();\n        GoodsServiceImpl goodsService = new GoodsServiceImpl();// \xbb\xf1\xc8\xa1\xc9\xcc\xc6\xb7\xb7\xfe\xce\xf1\xb6\xd4\xcf\xf3\n        \n        String backNews = goodsService.BuyGoods(userName,car);// \xb9\xba\xce\xef\xc7\xe5\xcb\xe3\n        messShopping(request,response,backNews);     // \xb4\xf2\xd3\xa1\xb4\xa6\xc0\xed\xbd\xe1\xb9\xfb\n        car.clear(); //\xb9\xba\xce\xef\xcd\xea\xb3\xc9\xa3\xac\xb1\xd8\xd0\xeb\xc7\xe5\xbf\xd5\xb9\xba\xce\xef\xb3\xb5\n\n    }\n  \n    /**\n     * \n     * \xb4\xf2\xd3\xa1\xc9\xcc\xc6\xb7\xb9\xba\xc2\xf2\xb4\xa6\xc0\xed\xbd\xe1\xb9\xfb\n     * @param request\n     * @param response\n     * @param mess  \xb7\xb5\xbb\xd8\xb5\xc4\xb4\xa6\xc0\xed\xcf\xfb\xcf\xa2\n     * @throws IOException\n     */\n    public static void messShopping(HttpServletRequest request, HttpServletResponse response, String mess)\n        throws IOException\n    {\n        PrintWriter out = response.getWriter();\n        \n        out.print(Iconst.buy_goods_success_1 + mess + Iconst.buy_goods_success_2);\n    }\n}\n'