b'package com.codeest.geeknews.ui.gank.adapter;\n\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\n\nimport com.bumptech.glide.Glide;\nimport com.bumptech.glide.load.engine.DiskCacheStrategy;\nimport com.bumptech.glide.request.animation.GlideAnimation;\nimport com.bumptech.glide.request.target.SimpleTarget;\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.App;\nimport com.codeest.geeknews.model.bean.GankItemBean;\n\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\n\n/**\n * Created by codeest on 16/8/21.\n */\n\npublic class GirlAdapter extends RecyclerView.Adapter<GirlAdapter.ViewHolder>{\n\n    private List<GankItemBean> mList;\n    private LayoutInflater inflater;\n    private Context mContext;\n    private OnItemClickListener onItemClickListener;\n\n    public GirlAdapter(Context mContext,List<GankItemBean> mList) {\n        inflater = LayoutInflater.from(mContext);\n        this.mList = mList;\n        this.mContext = mContext;\n    }\n\n    /**\n     * \xe5\x9c\xa8StaggeredGridLayoutManager\xe7\x80\x91\xe5\xb8\x83\xe6\xb5\x81\xe4\xb8\xad,\xe5\xbd\x93\xe9\x9c\x80\xe8\xa6\x81\xe4\xbe\x9d\xe6\x8d\xae\xe5\x9b\xbe\xe7\x89\x87\xe5\xae\x9e\xe9\x99\x85\xe7\x9b\xb8\xe5\xaf\xb9\xe9\xab\x98\xe5\xba\xa6,\xe4\xb8\x8d\xe6\x96\xad\xe5\x8a\xa8\xe6\x80\x81\xe8\xae\xbe\xe7\xbd\xaeImageView\xe7\x9a\x84LayoutParams\xe6\x97\xb6,\n     * \xe4\xbc\x9a\xe5\xaf\xbc\xe8\x87\xb4\xe5\xbf\xab\xe9\x80\x9f\xe6\xbb\x91\xe5\x8a\xa8\xe7\x8a\xb6\xe6\x80\x81\xe4\xb8\x8b\xe4\xba\xa7\xe7\x94\x9f\xe9\x87\x8d\xe6\x96\xb0\xe6\x8e\x92\xe5\x88\x97,\xe9\x87\x8d\xe5\x86\x99getItemViewType\xe5\xb9\xb6\xe8\xae\xbe\xe7\xbd\xaeStaggeredGridLayoutManager.GAP_HANDLING_NONE\xe8\xa7\xa3\xe5\x86\xb3\xe4\xba\x86\xe8\xbf\x99\xe4\xb8\xaa\xe9\x97\xae\xe9\xa2\x98\xef\xbc\x8c\xe5\x8e\x9f\xe5\x9b\xa0\xe7\x9b\xae\xe5\x89\x8d\xe6\x9c\xaa\xe7\x9f\xa5\n     * https://github.com/oxoooo/mr-mantou-android/blob/master/app/src/main/java/ooo/oxo/mr/MainAdapter.java\n     * @param position\n     * @return\n     */\n    @Override\n    public int getItemViewType(int position) {\n        return Math.round((float) App.SCREEN_WIDTH / (float) mList.get(position).getHeight() * 10f);\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        return new ViewHolder(inflater.inflate(R.layout.item_girl, parent, false));\n    }\n\n    @Override\n    public void onBindViewHolder(final ViewHolder holder, int position) {\n        //\xe5\xad\x98\xe5\x9c\xa8\xe8\xae\xb0\xe5\xbd\x95\xe7\x9a\x84\xe9\xab\x98\xe5\xba\xa6\xe6\x97\xb6\xe5\x85\x88Layout\xe5\x86\x8d\xe5\xbc\x82\xe6\xad\xa5\xe5\x8a\xa0\xe8\xbd\xbd\xe5\x9b\xbe\xe7\x89\x87\n        if (mList.get(holder.getAdapterPosition()).getHeight() > 0) {\n            ViewGroup.LayoutParams layoutParams = holder.ivGirl.getLayoutParams();\n            layoutParams.height = mList.get(holder.getAdapterPosition()).getHeight();\n        }\n\n        Glide.with(mContext).load(mList.get(position).getUrl()).asBitmap().diskCacheStrategy(DiskCacheStrategy.ALL)\n                .into(new SimpleTarget<Bitmap>(App.SCREEN_WIDTH / 2, App.SCREEN_WIDTH / 2) {\n                    @Override\n                    public void onResourceReady(Bitmap resource, GlideAnimation<? super Bitmap> glideAnimation) {\n                        if(holder.getAdapterPosition() != RecyclerView.NO_POSITION) {\n                            if (mList.get(holder.getAdapterPosition()).getHeight() <= 0) {\n                                int width = resource.getWidth();\n                                int height = resource.getHeight();\n                                int realHeight = (App.SCREEN_WIDTH / 2) * height / width;\n                                mList.get(holder.getAdapterPosition()).setHeight(realHeight);\n                                ViewGroup.LayoutParams lp = holder.ivGirl.getLayoutParams();\n                                lp.height = realHeight;\n                            }\n                            holder.ivGirl.setImageBitmap(resource);\n                        }\n                    }\n                });\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(onItemClickListener != null) {\n                    View shareView = view.findViewById(R.id.iv_girl);\n                    onItemClickListener.onItemClickListener(holder.getAdapterPosition(),shareView);\n                }\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return mList.size();\n    }\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n\n        @BindView(R.id.iv_girl)\n        ImageView ivGirl;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            ButterKnife.bind(this,itemView);\n        }\n    }\n\n    public void setOnItemClickListener(OnItemClickListener onItemClickListener) {\n        this.onItemClickListener = onItemClickListener;\n    }\n\n    public interface OnItemClickListener {\n        void onItemClickListener(int position,View view);\n    }\n }\n'