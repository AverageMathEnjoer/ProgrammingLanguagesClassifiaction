b'package io.github.javiewer.fragment.genre;\n\n\nimport android.os.Bundle;\nimport androidx.annotation.Nullable;\nimport com.google.android.material.tabs.TabLayout;\nimport androidx.viewpager.widget.ViewPager;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ProgressBar;\n\nimport java.util.LinkedHashMap;\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\nimport io.github.javiewer.JAViewer;\nimport io.github.javiewer.R;\nimport io.github.javiewer.adapter.ViewPagerAdapter;\nimport io.github.javiewer.adapter.item.Genre;\nimport io.github.javiewer.fragment.ExtendedAppBarFragment;\nimport io.github.javiewer.network.provider.AVMOProvider;\nimport okhttp3.ResponseBody;\nimport retrofit2.Call;\nimport retrofit2.Callback;\nimport retrofit2.Response;\n\npublic class GenreTabsFragment extends ExtendedAppBarFragment {\n\n    @BindView(R.id.genre_tabs)\n    public TabLayout mTabLayout;\n\n    @BindView(R.id.genre_view_pager)\n    public ViewPager mViewPager;\n\n    @BindView(R.id.genre_progress_bar)\n    public ProgressBar mProgressBar;\n\n    public ViewPagerAdapter mAdapter;\n\n    public GenreTabsFragment() {\n        // Required empty public constructor\n    }\n\n    @Override\n    public void onActivityCreated(@Nullable Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n\n        mAdapter = new ViewPagerAdapter(getActivity().getSupportFragmentManager());\n        mViewPager.setAdapter(mAdapter);\n        mTabLayout.setupWithViewPager(mViewPager);\n\n        Call<ResponseBody> call = JAViewer.SERVICE.getGenre();\n        call.enqueue(new Callback<ResponseBody>() {\n            @Override\n            public void onResponse(Call<ResponseBody> call, Response<ResponseBody> response) {\n                mProgressBar.setVisibility(View.GONE);\n                try {\n                    LinkedHashMap<String, List<Genre>> genres = AVMOProvider.parseGenres(response.body().string());\n\n                    GenreFragment fragment;\n                    for (String title : genres.keySet()) {\n                        fragment = new GenreFragment();\n                        fragment.getGenres().addAll(genres.get(title));\n                        mAdapter.addFragment(fragment, title);\n                    }\n\n                    mAdapter.notifyDataSetChanged();\n\n                    mTabLayout.setVisibility(View.VISIBLE);\n                } catch (Throwable e) {\n                    onFailure(call, e);\n                }\n            }\n\n            @Override\n            public void onFailure(Call<ResponseBody> call, Throwable t) {\n                t.printStackTrace();\n            }\n        });\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_genre, container, false);\n        ButterKnife.bind(this, view);\n        return view;\n    }\n}\n'