b'package com.droidcba.kedditbysteps\n\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.support.v4.app.FragmentManager\nimport android.support.v7.app.AppCompatActivity\nimport android.support.v7.widget.Toolbar\nimport com.droidcba.kedditbysteps.features.news.NewsFragment\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val toolbar = findViewById<Toolbar>(R.id.toolbar)\n        setSupportActionBar(toolbar)\n\n        if (savedInstanceState == null) {\n            changeFragment(NewsFragment())\n        }\n    }\n\n    fun changeFragment(f: Fragment, cleanStack: Boolean = false) {\n        val ft = supportFragmentManager.beginTransaction()\n        if (cleanStack) {\n            clearBackStack()\n        }\n        ft.setCustomAnimations(\n                R.anim.abc_fade_in, R.anim.abc_fade_out, R.anim.abc_popup_enter, R.anim.abc_popup_exit)\n        ft.replace(R.id.activity_base_content, f)\n        ft.addToBackStack(null)\n        ft.commit()\n    }\n\n    fun clearBackStack() {\n        val manager = supportFragmentManager\n        if (manager.backStackEntryCount > 0) {\n            val first = manager.getBackStackEntryAt(0)\n            manager.popBackStack(first.id, FragmentManager.POP_BACK_STACK_INCLUSIVE)\n        }\n    }\n\n    /**\n     * Finish activity when reaching the last fragment.\n     */\n    override fun onBackPressed() {\n        val fragmentManager = supportFragmentManager\n        if (fragmentManager.backStackEntryCount > 1) {\n            fragmentManager.popBackStack()\n        } else {\n            finish()\n        }\n    }\n}\n'