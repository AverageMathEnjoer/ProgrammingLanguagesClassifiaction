b'package lyons.dao;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\n\nimport lyons.db.DbClose;\nimport lyons.db.DbConn;\nimport lyons.entity.Goods;\nimport lyons.tools.ScannerChoice;\n\n/**\n * \xca\xfd\xbe\xdd\xbf\xe2goods\xb1\xed\xb2\xd9\xd7\xf7\n * @author lyons(zhanglei)\n */\npublic final class GoodsDao \n{\n\t\tConnection        conn  = null;\n\t\tPreparedStatement pstmt = null;\n\t\tResultSet \t\t  rs    = null;\n\t\n\t/**\n\t * 1.\xcc\xed\xbc\xd3\xc9\xcc\xc6\xb7\xb5\xbd\xca\xfd\xbe\xdd\xbf\xe2goods\xb1\xed\n\t * @param goods \xc9\xcc\xc6\xb7\xb6\xd4\xcf\xf3\n\t * @return boolean\n\t */\n\tpublic boolean addGoods(Goods goods)\n\t{\n\t\tboolean bool = false;\n\t\tconn = DbConn.getconn();\n\t\tString sql = "INSERT INTO GOODS(GNAME,GPRICE,GNUM) VALUES(?,?,?)";\n\t\t\t\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\tpstmt.setString(1,goods.getGname());\n\t\t\t\tpstmt.setDouble(2,goods.getGprice());\n\t\t\t\tpstmt.setInt(3,goods.getGnum());\n\t\t\t\t\n\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\tif (rs > 0)\n\t\t\t\t{\n\t\t\t\t\tbool = true;\n\t\t\t\t}\n\t\t\t} catch (SQLException e)\n\t\t\t{\n\t\t\t\te.printStackTrace();\n\t\t\t}finally\n\t\t\t\t\t{\n\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t}\n\t return bool;\n\t}\n\n\t/**\n\t * 2.\xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7\xd0\xc5\xcf\xa2\xb5\xbd\xca\xfd\xbe\xdd\xbf\xe2goods\xb1\xed\n\t * @param key   \xd1\xa1\xd4\xf1\xd2\xaa\xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7\xd0\xc5\xcf\xa2\n\t * @param goods \xc9\xcc\xc6\xb7\xb6\xd4\xcf\xf3\n\t * @return boolean\n\t */\n\tpublic boolean updateGoods(int key,Goods goods)\n\t{\n\t\tboolean bool = false;\n\t\tconn = DbConn.getconn();\n\t\t\tswitch (key)\n\t\t\t{\n\t\t\tcase 1:\t\t//\tkey=1,\xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7\xc3\xfb\xb3\xc6\n\t\t\t\t\t\tString sqlName = "UPDATE GOODS SET GNAME=? WHERE GID=?";\n\t\t\t\t\t\t\n\t\t\t\t\t    try\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlName);\n\t\t\t\t\t\t\tpstmt.setString(1, goods.getGname());\n\t\t\t\t\t\t\tpstmt.setInt(2,goods.getGid());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\t\t//\tkey=2,\xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7\xbc\xdb\xb8\xf1\n\t\t\t\t\t\tString sqlPrice = "UPDATE GOODS SET GPRICE=? WHERE GID=?";\n\t\t\t\t\t\t\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlPrice);\n\t\t\t\t\t\t\tpstmt.setDouble(1, goods.getGprice());\n\t\t\t\t\t\t\tpstmt.setInt(2,goods.getGid());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\t\t//\tkey=3,\xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7\xca\xfd\xc1\xbf\n\t\t\t\t\t\tString sqlNum = "UPDATE GOODS SET GNUM=? WHERE GID=?";\n\t\t\t\t\t\t\t\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlNum);\n\t\t\t\t\t\t\tpstmt.setInt(1, goods.getGnum());\n\t\t\t\t\t\t\tpstmt.setInt(2,goods.getGid());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\t\t\t\tif (rs > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\treturn bool;\n\t}\n\t\n\t/**\n\t * 3.\xb4\xd3\xca\xfd\xbe\xdd\xbf\xe2goods\xb1\xed\xd6\xd0-\x84h\xb3\xfd\xc9\xcc\xc6\xb7\n\t * @param gid \xc9\xcc\xc6\xb7\xb1\xe0\xba\xc5\n\t * @return boolean\n\t */\n\tpublic boolean deleteGoods(int gid)\n\t{\n\t\tboolean bool = false;\n\t\tconn = DbConn.getconn();\n\t\tString sql = "DELETE FROM GOODS WHERE GID=?";\n\t\t\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\tpstmt.setInt(1,gid);\n\t\t\t\tint rs = pstmt.executeUpdate();\n\t\t\t\tif (rs > 0)\n\t\t\t\t{\n\t\t\t\t\tbool = true;\n\t\t\t\t}\n\t\t\t} catch (SQLException e)\n\t\t\t{\n\t\t\t\te.printStackTrace();\n\t\t\t}finally{\n\t\t\t\t\t\tDbClose.addClose(pstmt,conn);\n\t\t\t\t\t}\n\t\treturn bool;\n\t}\n\t\n\t/**\n\t *4.\xb2\xe9\xd1\xaf\xc9\xcc\xc6\xb7\xd0\xc5\xcf\xa2\n\t * @param key \xb2\xe9\xd1\xaf\xb7\xbd\xca\xbd\n\t * @return ArrayList<Goods>\n\t */\n\tpublic ArrayList<Goods> queryGoods(int key) \n\t{\t\t\t\t\t\t\t\t\t\t\n\t\tArrayList<Goods> goodsList = new ArrayList<Goods>();\n\t\tconn = DbConn.getconn();\t\n\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\t\t//\tkey=1\xc9\xcc\xc6\xb7 \xca\xfd\xc1\xbf \xc9\xfd\xd0\xf2\xb2\xe9\xd1\xaf\n\t\t\t\t\tString sqlGnum = "SELECT * FROM GOODS ORDER BY GNUM ASC";\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlGnum);\n\t\t\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\t\t\twhile (rs.next())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint gid = rs.getInt("gid");\n\t\t\t\t\t\t\tString gname = rs.getString(2);\n\t\t\t\t\t\t\tdouble gprice = rs.getDouble(3);\n\t\t\t\t\t\t\tint gnum = rs.getInt(4);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tGoods goods = new Goods(gid,gname,gprice,gnum);\n\t\t\t\t\t\t\tgoodsList.add(goods);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t{\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}finally\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t \t//\tkey=2\xc9\xcc\xc6\xb7 \xbc\xdb\xb8\xf1 \xc9\xfd\xd0\xf2\xb2\xe9\xd1\xaf\n\t\t\t\t\tString sqlGprice = "SELECT * FROM GOODS ORDER BY GPRICE ASC";\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlGprice);\n\t\t\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\t\t\twhile (rs.next())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint gid = rs.getInt("gid");\n\t\t\t\t\t\t\tString gname = rs.getString(2);\n\t\t\t\t\t\t\tdouble gprice = rs.getDouble(3);\n\t\t\t\t\t\t\tint gnum = rs.getInt(4);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tGoods goods = new Goods(gid,gname,gprice,gnum);\n\t\t\t\t\t\t\tgoodsList.add(goods);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t{\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}finally\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t\t//\tkey=3\xc9\xcc\xc6\xb7 \xb9\xd8\xbc\xfc\xd7\xd6 \xb2\xe9\xd1\xaf\n\t\t\t\t\tString nameGet = ScannerChoice.ScannerInfoString();\n\t\t\t\t\tString sqlGname = "SELECT * FROM GOODS WHERE GNAME LIKE \'%\'||?||\'%\'";\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpstmt = conn.prepareStatement(sqlGname);\n\t\t\t\t\t\tpstmt.setString(1, nameGet);\n\t\t\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\t\t\twhile (rs.next())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint gid = rs.getInt("gid");\n\t\t\t\t\t\t\tString gname = rs.getString(2);\n\t\t\t\t\t\t\tdouble gprice = rs.getDouble(3);\n\t\t\t\t\t\t\tint gnum = rs.getInt(4);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tGoods goods = new Goods(gid,gname,gprice,gnum);\n\t\t\t\t\t\t\tgoodsList.add(goods);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (SQLException e)\n\t\t\t\t\t{\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}finally\n\t\t\t\t\t{\n\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn goodsList;\n\t}\n\n\t/**\n\t *5.\xcf\xd4\xca\xbe\xcb\xf9\xd3\xd0\xc9\xcc\xc6\xb7\xd0\xc5\xcf\xa2\n\t * @return ArrayList<Goods>\n\t */\n\tpublic ArrayList<Goods> displayGoods()\n\t{\n\t\tArrayList<Goods> goodsList = new ArrayList<Goods>(); \n\t\tconn = DbConn.getconn();\n\t\tString sql = "SELECT * FROM GOODS";\n\t\t\n\t\ttry\n\t\t{\n\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\trs \t  = pstmt.executeQuery();\n\t\t\t\t\n\t\t\t\twhile (rs.next())\n\t\t\t\t{\n\t\t\t\t\tint gid = rs.getInt(1);\n\t\t\t\t\tString gname = rs.getString(2);\n\t\t\t\t\tdouble gprice = rs.getDouble("gprice"); \t\t//\xcb\xab\xd2\xfd\xba\xc5+\xd6\xf7\xbc\xfc\xc3\xfb,\xd2\xb2\xbf\xc9\xd3\xc3\xca\xfd\xd7\xd6\xb1\xed\xca\xbe.\n\t\t\t\t\tint gnum = rs.getInt(4);\n\t\t\t\t\t\n\t\t\t\t\tGoods goods = new Goods(gid,gname,gprice,gnum);\t//\xb4\xb4\xbd\xa8Goods\xb6\xd4\xcf\xf3\xa3\xac\xb2\xa2\xb8\xb3\xd6\xb5.\n\t\t\t\t\tgoodsList.add(goods);\t\t\t\t\t\t\t//\xcc\xed\xbc\xd3\xd0\xc5\xcf\xa2\xb5\xbd\xb6\xaf\xcc\xac\xca\xfd\xd7\xe9\xd6\xd0.\n\t\t\t\t}\n\t\t} catch (SQLException e)\n\t\t{\n\t\t\te.printStackTrace();\n\t\t}finally\n\t\t\t\t{\n\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t}\n\t\treturn goodsList;\n\t\t\n\t}\n\t\t\n}'