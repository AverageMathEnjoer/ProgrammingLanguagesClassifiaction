b'\xef\xbb\xbfusing Aerial;\nusing System;\nusing System.Diagnostics;\nusing System.Windows.Forms;\n\nnamespace ScreenSaver\n{\n\n    class IgnoreMouseClickMessageFilter : IMessageFilter\n    {\n        private Control parent { get; set; }\n        private Control target { get; set; }\n\n        public IgnoreMouseClickMessageFilter(Control parent, Control target)\n        {\n            this.parent = parent;\n            this.target = target;\n        }\n\n        public bool PreFilterMessage(ref Message messageBeforeFiltering)\n        {\n            Trace.WriteLine("PreFilterMessage()");\n            const bool FilterTheMessageOut = true;\n            const bool LetTheMessageThrough = false;\n\n            if (IsNull(parent)) return LetTheMessageThrough;\n            if (IsNull(target)) return LetTheMessageThrough;\n            if (WasNotClickedOnTarget(parent, target)) return LetTheMessageThrough;\n            if (MessageContainsAnyMousebutton(messageBeforeFiltering)) return FilterTheMessageOut;\n            return LetTheMessageThrough;\n        }\n\n        private bool MessageContainsAnyMousebutton(Message message)\n        {\n            Trace.WriteLine("MessageContainsAnyMousebutton()");\n            if (message.HWnd == parent.Handle)\n            {\n                if (message.Msg == NativeMethods.WM_LBUTTONUP) return true;\n                if (message.Msg == NativeMethods.WM_LBUTTONDBLCLK) return true;\n                if (message.Msg == NativeMethods.WM_RBUTTONDOWN) return true;\n                if (message.Msg == NativeMethods.WM_RBUTTONUP) return true;\n                return false;\n            }\n            return false;\n        }\n\n        private bool WasNotClickedOnTarget(Control parent, Control target)\n        {\n            Trace.WriteLine("WasNotClickedOnTarget()");\n            Control clickedOn = parent.GetChildAtPoint(Cursor.Position);\n            if (IsNull(clickedOn)) return true;\n            if (AreEqual(clickedOn, target)) return false;\n            return true;\n        }\n\n        private bool AreEqual(Control controlA, Control controlB)\n        {\n            if (controlA == controlB) return true;\n            return false;\n        }\n\n        private bool IsNull(Control control)\n        {\n            if (control == null) return true;\n            return false;\n        }\n    }\n}\n'