b'package com.codeest.geeknews.component;\r\n\r\nimport com.codeest.geeknews.util.RxUtil;\r\n\r\nimport io.reactivex.Flowable;\r\nimport io.reactivex.disposables.Disposable;\r\nimport io.reactivex.functions.Consumer;\r\nimport io.reactivex.processors.FlowableProcessor;\r\nimport io.reactivex.processors.PublishProcessor;\r\n\r\n/**\r\n * Created by codeest on 2016/8/2.\r\n */\r\npublic class RxBus {\r\n    // \xe4\xb8\xbb\xe9\xa2\x98\r\n    private final FlowableProcessor<Object> bus;\r\n    // PublishSubject\xe5\x8f\xaa\xe4\xbc\x9a\xe6\x8a\x8a\xe5\x9c\xa8\xe8\xae\xa2\xe9\x98\x85\xe5\x8f\x91\xe7\x94\x9f\xe7\x9a\x84\xe6\x97\xb6\xe9\x97\xb4\xe7\x82\xb9\xe4\xb9\x8b\xe5\x90\x8e\xe6\x9d\xa5\xe8\x87\xaa\xe5\x8e\x9f\xe5\xa7\x8bFlowable\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe5\x8f\x91\xe5\xb0\x84\xe7\xbb\x99\xe8\xa7\x82\xe5\xaf\x9f\xe8\x80\x85\r\n    private RxBus() {\r\n        bus = PublishProcessor.create().toSerialized();\r\n    }\r\n\r\n    public static RxBus getDefault() {\r\n        return RxBusHolder.sInstance;\r\n    }\r\n\r\n    private static class RxBusHolder {\r\n        private static final RxBus sInstance = new RxBus();\r\n    }\r\n\r\n\r\n    // \xe6\x8f\x90\xe4\xbe\x9b\xe4\xba\x86\xe4\xb8\x80\xe4\xb8\xaa\xe6\x96\xb0\xe7\x9a\x84\xe4\xba\x8b\xe4\xbb\xb6\r\n    public void post(Object o) {\r\n        bus.onNext(o);\r\n    }\r\n\r\n    // \xe6\xa0\xb9\xe6\x8d\xae\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84 eventType \xe7\xb1\xbb\xe5\x9e\x8b\xe8\xbf\x94\xe5\x9b\x9e\xe7\x89\xb9\xe5\xae\x9a\xe7\xb1\xbb\xe5\x9e\x8b(eventType)\xe7\x9a\x84 \xe8\xa2\xab\xe8\xa7\x82\xe5\xaf\x9f\xe8\x80\x85\r\n    public <T> Flowable<T> toFlowable(Class<T> eventType) {\r\n        return bus.ofType(eventType);\r\n    }\r\n\r\n    // \xe5\xb0\x81\xe8\xa3\x85\xe9\xbb\x98\xe8\xae\xa4\xe8\xae\xa2\xe9\x98\x85\r\n    public <T> Disposable toDefaultFlowable(Class<T> eventType, Consumer<T> act) {\r\n        return bus.ofType(eventType).compose(RxUtil.<T>rxSchedulerHelper()).subscribe(act);\r\n    }\r\n}\r\n'