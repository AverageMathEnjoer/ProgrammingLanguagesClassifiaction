b'package lyons.tools;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\n\nimport lyons.dao.GoodsDao;\nimport lyons.db.DbClose;\nimport lyons.db.DbConn;\nimport lyons.entity.Goods;\nimport lyons.entity.SalesMan;\n\n/**\n * \xb2\xe9\xd1\xaf&&\xb4\xf2\xd3\xa1 \xba\xaf\xca\xfd\xb9\xa4\xbe\xdf(\xba\xf3\xc6\xda\xd3\xc5\xbb\xaf\xbf\xc9\xc4\xdc\xbb\xe1\xc9\xbe)\n *@author lyons(zhanglei)\n */\n\npublic final class QueryPrint\n{\n\t\tConnection        conn  = null;\n\t\tPreparedStatement pstmt = null;\n\t\tResultSet \t\trs \t \t = null;\n\t\n\t/**\n\t * \xc4\xa3\xba\xfd\xb2\xe9\xd1\xaf\xb2\xa2\xb3\xc2\xc1\xd0\xb2\xe9\xd1\xaf\xd0\xc5\xcf\xa2\xba\xaf\xca\xfd\xd0\xa1\xb9\xa4\xbe\xdf\n\t * @param oper \xb5\xf7\xd3\xc3\xd5\xdf\n\t * @return \xb2\xe9\xd1\xaf\xb5\xbd\xb5\xc4\xd0\xc5\xcf\xa2\xb5\xc4gid,\xc8\xe7\xb9\xfb\xb7\xb5\xbb\xd8\xd6\xb5\xb5\xc8\xd3\xda-1\xa3\xac\xd4\xf2\xb4\xfa\xb1\xed\xb2\xe9\xd1\xaf\xd2\xec\xb3\xa3\xa1\xa3\t  \n\t */\n\t\tpublic static int query(String oper)\n\t\t{\n\t\t\tint gid = -1;\n\t\t\tString shopping = ScannerChoice.ScannerInfoString(); //\xbc\xfc\xc5\xcc\xbb\xf1\xc8\xa1\xc9\xcc\xc6\xb7\xc3\xfb\xd7\xd6\n\t\t\tArrayList<Goods> goodsList = new QueryPrint().queryGoodsKey(-1,shopping);  //\xb8\xf9\xbe\xdd\xbc\xfc\xc5\xcc\xbb\xf1\xc8\xa1\xb5\xc4\xc9\xcc\xc6\xb7\xc3\xfb\xd7\xd6\xd5{\xd3\xc3 \xbe\xab\xc8\xb7\xb2\xe9\xd1\xaf\xba\xaf\xca\xfd\xa3\xac\xb4_\xb6\xa8\xd3\xc3\x91\xf4\xcb\xf9\xd2\xaa\xb2\xd9\xd7\xf7\xb5\xc4\xca\xfd\xbe\xdd\n\t\t\t    if (goodsList == null || goodsList.size() <= 0)\n\t\t\t\t{\n\t\t\t\t\t\tSystem.err.println("\\t\xa3\xa1\xa3\xa1\xb2\xe9\xce\xde\xb4\xcb\xc9\xcc\xc6\xb7 \xa3\xa1\xa3\xa1");\n\t\t\t\t\t\t\n\t\t\t\t\t\t//\xd5{\xd3\xc3\xd1\xa1\xd4\xf1\xcf\xc2\xd2\xbb\xb2\xbd\xba\xaf\xca\xfd\n\t\t\t\t\t\tScannerChoice.changedInfoNext(oper);\n\t\t\t\t\t\t\n\t\t\t\t}else\t//\xb2\xe9\xb5\xbd\xd3\xd0\xb4\xcb\xc9\xcc\xc6\xb7\xa3\xac\xca\xb5\xcf\xd6\xbd\xf8\xd0\xd0 \xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7 \xd0\xc5\xcf\xa2\xb2\xd9\xd7\xf7\xa3\xa1\n\t\t\t\t\t{\t\t\n\t\t\t\t\t\tGoods goods = goodsList.get(0);\n\t\t\t\t\t\t\n\t\t\t\t\t\tSystem.out.println("\\t\\t\\t\\t\\t\xc9\xcc\xc6\xb7\xc1\xd0\xb1\xed\\n\\n");\n\t\t\t\t\t\tSystem.out.println("\\t\xc9\xcc\xc6\xb7\xb1\xe0\xba\xc5\\t\\t\xc9\xcc\xc6\xb7\xc3\xfb\xb3\xc6\\t\\t\xc9\xcc\xc6\xb7\xbc\xdb\xb8\xf1\\t\\t\xc9\xcc\xc6\xb7\xca\xfd\xc1\xbf\\t\\t\xb1\xb8\xd7\xa2\\n");\n\t\t\t\t\t\tSystem.out.print("\\t"+goods.getGid()+"\\t\\t"+goods.getGname()+"\\t\\t"+goods.getGprice()+"\\t\\t"+goods.getGnum());\n\t\t\t\t\t\tif (goods.getGnum()==0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSystem.out.println("\\t\\t\xb8\xc3\xc9\xcc\xc6\xb7\xd2\xd1\xca\xdb\xbf\xd5");\n\t\t\t\t\t\t}else if (goods.getGnum()<10)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tSystem.out.println("\\t\\t\xb8\xc3\xc9\xcc\xc6\xb7\xd2\xd1\xb2\xbb\xd7\xe310\xbc\xfe");\n\t\t\t\t\t\t\t\t}else \n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tSystem.out.println("\\t\\t-");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\tgid = goods.getGid(); //\xbd\xab\xc9\xcc\xc6\xb7\xb1\xe0\xba\xc5\xb7\xb5\xbb\xd8\xb8\xf8\xb5\xf7\xd3\xc3\xd5\xdf\n\t\t\t\t\t}\n\t\t return gid;\n\t\t} \n\t\n\t/**\n\t * \xc4\xa3\xba\xfd\xb2\xe9\xd1\xaf\xba\xaf\xca\xfd\xd0\xa1\xb9\xa4\xbe\xdf\n\t * @return int \xb5\xb1\xc9\xcc\xc6\xb7\xbc\xfe\xca\xfd\xd3\xd0\xc7\xd2\xd6\xbb\xd3\xd0\xd2\xbb\xbc\xfe\xca\xb1\xb7\xb5\xbb\xd8\xc9\xcc\xc6\xb7gid\xba\xc5\xa3\xac\xc9\xcc\xc6\xb7\xd2\xd1\xca\xdb\xbf\xd5\xca\xb1\xb7\xb5\xbb\xd8 -1. >1\xbc\xfe\xca\xb1\xb7\xb5\xbb\xd8-2 . \xb2\xe9\xce\xde\xb4\xcb\xc9\xcc\xc6\xb7\xca\xb1\xb7\xb5\xbb\xd8-3\n\t * \t\t\t\t\t  \n\t */\n\t\tpublic static int querySettlement() \n\t\t{\n\t\t\tint gid = -1;\n\t\t\tArrayList<Goods> goodsSettlement = new GoodsDao().queryGoods(3);//\xd5{\xd3\xc3 \xb9\xd8\xbc\xfc\xd7\xd6\xb2\xe9\xd1\xaf\xba\xaf\xca\xfd\n\t\t    if (goodsSettlement == null || goodsSettlement.size() <= 0)\n\t\t\t{\n\t\t\t\t\tSystem.err.println("\\t\xa3\xa1\xa3\xa1\xb2\xe9\xce\xde\xb4\xcb\xc9\xcc\xc6\xb7 \xa3\xa1\xa3\xa1\\n");\n\t\t\t\t\tgid = -3;\t\n\t\t\t}else\t//\xb2\xe9\xb5\xbd\xd3\xd0\xb4\xcb\xc9\xcc\xc6\xb7\xa3\xac\xca\xb5\xcf\xd6\xbd\xf8\xd0\xd0 \xb8\xfc\xb8\xc4\xc9\xcc\xc6\xb7 \xd0\xc5\xcf\xa2\xb2\xd9\xd7\xf7\xa3\xa1\n\t\t\t\t{\t\n\t\t\t\t\tSystem.out.println("\\t\\t\\t\\t\\t\xc9\xcc\xc6\xb7\xc1\xd0\xb1\xed\\n\\n");\n\t\t\t\t\tSystem.out.println("\\t\xc9\xcc\xc6\xb7\xb1\xe0\xba\xc5\\t\\t\xc9\xcc\xc6\xb7\xc3\xfb\xb3\xc6\\t\\t\xc9\xcc\xc6\xb7\xbc\xdb\xb8\xf1\\t\\t\xc9\xcc\xc6\xb7\xca\xfd\xc1\xbf\\t\\t\xb1\xb8\xd7\xa2\\n");\n\t\t\t\t\tfor (int i = 0; i < goodsSettlement.size(); i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tGoods goods = goodsSettlement.get(i);\n\t\t\t\t\t\tif (goods.getGnum() > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSystem.out.print("\\t"+goods.getGid()+"\\t\\t"+goods.getGname()+"\\t\\t"+goods.getGprice()+"\\t\\t"+goods.getGnum());\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (goods.getGnum()==0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tSystem.out.println("\\t\\t\xb8\xc3\xc9\xcc\xc6\xb7\xd2\xd1\xca\xdb\xbf\xd5");\n\t\t\t\t\t\t\t}else if (goods.getGnum()<10)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tSystem.out.println("\\t\\t\xb8\xc3\xc9\xcc\xc6\xb7\xd2\xd1\xb2\xbb\xd7\xe310\xbc\xfe");\n\t\t\t\t\t\t\t\t\t}else \n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tSystem.out.println("\\t\\t-");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (goodsSettlement.size()==1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tgid = goods.getGid(); //\xbd\xab\xc9\xcc\xc6\xb7\xb1\xe0\xba\xc5\xb7\xb5\xbb\xd8\xb8\xf8\xb5\xf7\xd3\xc3\xd5\xdf\n\t\t\t\t\t\t\t\t}else \n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tgid = -2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t return gid; \n\t\t} \n\t\n\n\t/**\n\t * \xb8\xf9\xbe\xdd\xc9\xcc\xc6\xb7 gid or gName\xb2\xe9\xd1\xaf\xc9\xcc\xc6\xb7\n\t * @param \xc9\xcc\xc6\xb7id,\xc9\xcc\xc6\xb7\xc3\xfb\xb3\xc6\n\t * @return \xc9\xcc\xc6\xb7\xd0\xc5\xcf\xa2\n\t */\n\t\tpublic ArrayList<Goods> queryGoodsKey(int gId,String gName) \n\t\t{\t\t\t\t\t\t\t\t\t\t\n\t\t\tArrayList<Goods> goodsList = new ArrayList<Goods>();\n\t\t\tconn = DbConn.getconn();\t\n\t\t\t\n\t\t\tString sql = "SELECT * FROM GOODS WHERE GID=? OR GNAME=?"; \n\t\t\t   try\n\t\t\t   {\n\t\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\t\tpstmt.setInt(1, gId);\n\t\t\t\t\tpstmt.setString(2, gName);\n\t\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\t\twhile (rs.next())\n\t\t\t\t\t{\n\t\t\t\t\t\tint gid = rs.getInt("gid");\n\t\t\t\t\t\tString gname = rs.getString(2);\n\t\t\t\t\t\tdouble gprice = rs.getDouble(3);\n\t\t\t\t\t\tint gnum = rs.getInt(4);\n\t\t\t\t\t\t\n\t\t\t\t\t\tGoods goods = new Goods(gid,gname,gprice,gnum);\n\t\t\t\t\t\tgoodsList.add(goods);\n\t\t\t\t\t}\n\t\t\t\t} catch (SQLException e)\n\t\t\t\t{\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}finally\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t\t}\n\t\t  return goodsList;\n\t\t}\t\n\t\t\n\t/**\n\t * \xbe\xab\xc8\xb7\xb2\xe9\xd1\xaf\xca\xdb\xbb\xf5\xd4\xb1\xd0\xc5\xcf\xa2\n\t * @param \xca\xdb\xbb\xf5\xd4\xb1\xc3\xfb\xd7\xd6\n\t * @return \n\t */\n\tpublic ArrayList<SalesMan> querySalesMan(String sName)\n\t{\n\t\tArrayList<SalesMan> SalesManList = new ArrayList<SalesMan>();\n\t\tconn = DbConn.getconn();\t\n\t\tString sql = "SELECT * FROM SALESMAN WHERE SNAME=?";\n\t\t   try\n\t\t   {\n\t\t\t\tpstmt = conn.prepareStatement(sql);\n\t\t\t\tpstmt.setString(1, sName);\n\t\t\t\trs = pstmt.executeQuery();\n\t\t\t\twhile (rs.next())\n\t\t\t\t{\n\t\t\t\t\tint sid = rs.getInt("sid");\n\t\t\t\t\tString sname = rs.getString(2);\n\t\t\t\t\tString sPassWord = rs.getString(3);\n\t\t\t\t\t\n\t\t\t\t\tSalesMan salesMan = new SalesMan(sid,sname,sPassWord);\n\t\t\t\t\tSalesManList.add(salesMan);\n\t\t\t\t}\n\t\t\t} catch (SQLException e)\n\t\t\t{\n\t\t\t\te.printStackTrace();\n\t\t\t}finally\n\t\t\t\t\t{\n\t\t\t\t\t\tDbClose.queryClose(pstmt, rs, conn);\n\t\t\t\t\t}\n\t\treturn SalesManList;\n\t}\n}\n'