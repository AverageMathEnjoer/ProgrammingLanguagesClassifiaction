b'package tyrantgit.sample;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport tyrantgit.explosionfield.ExplosionField;\n\n\npublic class MainActivity extends Activity {\n\n    private ExplosionField mExplosionField;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mExplosionField = ExplosionField.attach2Window(this);\n        addListener(findViewById(R.id.root));\n    }\n\n    private void addListener(View root) {\n        if (root instanceof ViewGroup) {\n            ViewGroup parent = (ViewGroup) root;\n            for (int i = 0; i < parent.getChildCount(); i++) {\n                addListener(parent.getChildAt(i));\n            }\n        } else {\n            root.setClickable(true);\n            root.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    mExplosionField.explode(v);\n                    v.setOnClickListener(null);\n                }\n            });\n        }\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.menu_main,menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        if (item.getItemId() == R.id.action_reset) {\n            View root = findViewById(R.id.root);\n            reset(root);\n            addListener(root);\n            mExplosionField.clear();\n            return true;\n        }\n        return super.onOptionsItemSelected(item);\n    }\n\n    private void reset(View root) {\n        if (root instanceof ViewGroup) {\n            ViewGroup parent = (ViewGroup) root;\n            for (int i = 0; i < parent.getChildCount(); i++) {\n                reset(parent.getChildAt(i));\n            }\n        } else {\n            root.setScaleX(1);\n            root.setScaleY(1);\n            root.setAlpha(1);\n        }\n    }\n}\n'