b'package com.codeest.geeknews.ui.vtex.adapter;\n\nimport android.content.Context;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.component.ImageLoader;\nimport com.codeest.geeknews.model.bean.NodeListBean;\nimport com.codeest.geeknews.model.bean.RepliesListBean;\nimport com.codeest.geeknews.presenter.vtex.VtexPresenter;\nimport com.codeest.geeknews.util.DateUtil;\nimport com.codeest.geeknews.widget.SquareImageView;\n\nimport org.sufficientlysecure.htmltextview.HtmlHttpImageGetter;\nimport org.sufficientlysecure.htmltextview.HtmlTextView;\n\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\n\n/**\n * Created by codeest on 16/12/19.\n */\n\npublic class RepliesAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n\n    private Context mContext;\n    private LayoutInflater inflater;\n    private List<RepliesListBean> mList;\n    private NodeListBean mTopBean;\n\n    public RepliesAdapter(Context context, List<RepliesListBean> mList, NodeListBean mTopBean) {\n        this.mContext = context;\n        this.mList = mList;\n        this.mTopBean = mTopBean;\n        inflater = LayoutInflater.from(mContext);\n    }\n\n    public enum ITEM_TYPE {\n        ITEM_TOP,           //\xe4\xbd\x9c\xe8\x80\x85\xe5\x8f\x91\xe8\xa8\x80\n        ITEM_CONTENT,       //\xe5\x9b\x9e\xe5\xa4\x8d\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        if (position == 0) {\n            return ITEM_TYPE.ITEM_TOP.ordinal();\n        }\n        return ITEM_TYPE.ITEM_CONTENT.ordinal();\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        if (viewType == ITEM_TYPE.ITEM_TOP.ordinal()) {\n            return new TopViewHolder(inflater.inflate(R.layout.item_replies_top, parent, false));\n        }\n        return new ViewHolder(inflater.inflate(R.layout.item_replies, parent, false));\n    }\n\n    @Override\n    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n        if (holder instanceof TopViewHolder) {\n            TopViewHolder topHolder = ((TopViewHolder) holder);\n            if (mTopBean == null) {\n                return;\n            }\n            ImageLoader.load(mContext, VtexPresenter.parseImg(mTopBean.getMember().getavatar_normal()), topHolder.ivRepliesTopFace);\n            topHolder.tvRepliesTopContent.setHtml(mTopBean.getContent_rendered(), new HtmlHttpImageGetter(topHolder.tvRepliesTopContent));\n            topHolder.tvRepliesTopName.setText(mTopBean.getMember().getUsername());\n            topHolder.tvRepliesTopTitle.setText(mTopBean.getTitle());\n            topHolder.tvRepliesTopNum.setText(String.format("%s,   \xe5\x85\xb1%s\xe6\x9d\xa1\xe5\x9b\x9e\xe5\xa4\x8d", DateUtil.formatTime2String(mTopBean.getCreated()), mTopBean.getReplies()));\n        } else {\n            ViewHolder contentHolder = ((ViewHolder) holder);\n            RepliesListBean bean = mList.get(position - 1);\n            if (bean == null)\n                return;\n            ImageLoader.load(mContext, VtexPresenter.parseImg(bean.getMember().getavatar_normal()), contentHolder.ivRepliesFace);\n            contentHolder.tvRepliesName.setText(bean.getMember().getUsername());\n            contentHolder.tvRepliesTips.setText(String.format("%d\xe6\xa5\xbc %s", position, DateUtil.formatTime2String(bean.getCreated())));\n            contentHolder.tvRepliesContent.setHtml(bean.getContent_rendered(), new HtmlHttpImageGetter(contentHolder.tvRepliesContent));\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return mList.size() + 1;\n    }\n\n    public static class TopViewHolder extends RecyclerView.ViewHolder {\n\n        @BindView(R.id.tv_replies_top_title)\n        TextView tvRepliesTopTitle;\n        @BindView(R.id.iv_replies_top_face)\n        SquareImageView ivRepliesTopFace;\n        @BindView(R.id.tv_replies_top_name)\n        TextView tvRepliesTopName;\n        @BindView(R.id.tv_replies_top_num)\n        TextView tvRepliesTopNum;\n        @BindView(R.id.tv_replies_top_content)\n        HtmlTextView tvRepliesTopContent;\n\n        public TopViewHolder(View itemView) {\n            super(itemView);\n            ButterKnife.bind(this, itemView);\n        }\n    }\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n\n        @BindView(R.id.iv_replies_face)\n        SquareImageView ivRepliesFace;\n        @BindView(R.id.tv_replies_name)\n        TextView tvRepliesName;\n        @BindView(R.id.tv_replies_tips)\n        TextView tvRepliesTips;\n        @BindView(R.id.tv_replies_content)\n        HtmlTextView tvRepliesContent;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            ButterKnife.bind(this, itemView);\n        }\n    }\n\n    public void setTopData(NodeListBean mTopBean) {\n        this.mTopBean = mTopBean;\n        notifyItemChanged(0);\n    }\n\n    public void setContentData(List<RepliesListBean> mList) {\n        this.mList = mList;\n        notifyDataSetChanged();\n    }\n}\n'