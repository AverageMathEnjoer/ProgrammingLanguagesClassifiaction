b'\xef\xbb\xbfusing System;\nusing System.Collections.Generic;\n\nnamespace DMSkin.Core\n{\n    /// <summary>\n    /// \xe5\xb9\xbf\xe6\x92\xad\xe5\x99\xa8\n    /// </summary>\n    public class Broadcast\n    {\n        #region \xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\n        private static Dictionary<string, List<object>> Broadcasts;\n        /// <summary>\n        /// \xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\n        /// </summary>\n        public static void Initialize()\n        {\n            Broadcasts = new Dictionary<string, List<object>>();\n        }\n\n        /// <summary>\n        /// \xe6\x9f\xa5\xe6\x89\xbe\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d</param>\n        /// <returns>\xe5\xb9\xbf\xe6\x92\xad</returns>\n        private static List<object> FindBroadcast(string name)\n        {\n            if (Broadcasts.ContainsKey(name))\n            {\n                return Broadcasts[name];\n            }\n            return default;\n        }\n\n        /// <summary>\n        /// \xe6\xb3\xa8\xe5\x86\x8c\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        private static bool Register(string name,object action)\n        {\n            var broadcast = FindBroadcast(name);\n            if (broadcast != null)\n            {\n                if (!broadcast.Contains(action))//\xe9\x98\xb2\xe6\xad\xa2\xe9\x87\x8d\xe5\xa4\x8d\xe6\xb3\xa8\xe5\x86\x8c\n                {\n                    broadcast.Add(action);\n                    return true;\n                }\n            }\n            else//\xe6\x96\xb0\xe5\xa2\x9e\xe5\xb9\xbf\xe6\x92\xad\n            {\n                Broadcasts.Add(name, new List<object>() { action });\n                return true;\n            }\n            return false;\n        }\n        #endregion\n\n        #region \xe6\xb3\xa8\xe5\x86\x8c\xe5\xb9\xbf\xe6\x92\xad\n        /// <summary>\n        /// \xe6\xb3\xa8\xe5\x86\x8c\xe5\xb9\xbf\xe6\x92\xad\xe6\x8e\xa5\xe6\x94\xb6\xe5\x99\xa8-\xe5\x8d\x95\xe5\x90\x91\xe5\xb9\xbf\xe6\x92\xad-\xe6\x97\xa0\xe5\x8f\x82\n        /// </summary>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="action">\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\xe5\x87\xbd\xe6\x95\xb0</param>\n        public static bool RegisterBroadcast(string name, Action action)\n        {\n            return Register(name, action);\n        }\n\n        /// <summary>\n        /// \xe6\xb3\xa8\xe5\x86\x8c\xe5\xb9\xbf\xe6\x92\xad\xe6\x8e\xa5\xe6\x94\xb6\xe5\x99\xa8-\xe5\x8d\x95\xe5\x90\x91\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="action">\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\xe5\x87\xbd\xe6\x95\xb0</param>\n        public static bool RegisterBroadcast<T>(string name, Action<T> action)\n        {\n           return Register(name, action);\n        }\n\n        /// <summary>\n        /// \xe6\xb3\xa8\xe5\x86\x8c\xe5\xb9\xbf\xe6\x92\xad\xe6\x8e\xa5\xe6\x94\xb6\xe5\x99\xa8-\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <typeparam name="T1">\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="action">\xe5\xb9\xbf\xe6\x92\xad\xe7\x9a\x84\xe5\x9b\x9e\xe8\xb0\x83\xe5\x87\xbd\xe6\x95\xb0</param>\n        public static bool RegisterBroadcast<T, T1>(string name, Action<T, Action<T1>> action)\n        {\n            return Register(name, action);\n        }\n        #endregion\n\n        #region \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad\n        /// <summary>\n        /// \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        public static void PushBroadcast(string name)\n        {\n            var broadcast = FindBroadcast(name);\n            if (broadcast != null)\n            {\n                foreach (var item in broadcast)\n                {\n                    if (item is Action action)\n                    {\n                        action.Invoke();\n                    }\n                }\n            }\n        }\n\n        /// <summary>\n        /// \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="parameter">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae</param>\n        public static void PushBroadcast<T>(string name, T parameter = default)\n        {\n            var broadcast = FindBroadcast(name);\n            if (broadcast != null)\n            {\n                foreach (var item in broadcast)\n                {\n                    if (item is Action<T> action)\n                    {\n                        action.Invoke(parameter);\n                    }\n                }\n            }\n        }\n\n        /// <summary>\n        /// \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad-\xe5\xb9\xb6\xe6\x89\xa7\xe8\xa1\x8c\xe5\x9b\x9e\xe8\xb0\x83\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <typeparam name="T1">\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\xe6\xb6\x88\xe6\x81\xaf\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="parameter">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae</param>\n        /// <param name="callBack">\xe5\xb9\xbf\xe6\x92\xad\xe8\xae\xa2\xe9\x98\x85\xe8\x80\x85\xe7\x9a\x84\xe5\x9b\x9e\xe4\xbc\xa0\xe4\xbf\xa1\xe6\x81\xaf</param>\n        public static void PushBroadcast<T, T1>(string name, T parameter = default, Action<T1> callBack = default)\n        {\n            var broadcast = FindBroadcast(name);\n            if (broadcast != null)\n            {\n                foreach (var item in broadcast)\n                {\n                    if (item is Action<T, Action<T1>> action)\n                    {\n                        action.Invoke(parameter, callBack);\n                    }\n                }\n            }\n        }\n        #endregion\n\n        /// <summary>\n        /// \xe6\xb3\xa8\xe5\x86\x8c\xe4\xb8\x80\xe4\xb8\xaa\xe5\xb9\xbf\xe6\x92\xad\xe6\x8e\xa5\xe6\x94\xb6\xe5\x99\xa8\xef\xbc\x8c\xe4\xbd\xa0\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x9c\xa8\xe5\xa4\x9a\xe4\xb8\xaa\xe5\x9c\xb0\xe6\x96\xb9\xe6\xb3\xa8\xe5\x86\x8c\xef\xbc\x8c\xe5\xb9\xb6\xe4\xb8\x94\xe5\xaf\xb9\xe6\x96\xb9\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x91\xbc\xe5\x8f\xab\xe4\xbd\xa0\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <typeparam name="T1">\xe5\x9b\x9e\xe8\xb0\x83\xe4\xbc\xa0\xe6\x92\xad\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="action">\xe6\x94\xb6\xe5\x88\xb0\xe5\xb9\xbf\xe6\x92\xad\xe4\xb9\x8b\xe5\x90\x8e\xe6\x89\xa7\xe8\xa1\x8c\xe7\x9a\x84\xe5\x87\xbd\xe6\x95\xb0</param>\n        public static bool RegisterBroadcast<T, T1>(string name, Func<T, T1> action)\n        {\n            return Register(name, action);\n        }\n\n        #region \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad-\xe5\xb9\xb6\xe6\x89\xa7\xe8\xa1\x8c\xe8\xbf\x94\xe5\x9b\x9e\xe5\x80\xbc\n        /// <summary>\n        /// \xe6\x8e\xa8\xe9\x80\x81\xe5\xb9\xbf\xe6\x92\xad-\xe5\xb9\xb6\xe6\x89\xa7\xe8\xa1\x8c\xe5\x9b\x9e\xe8\xb0\x83\n        /// </summary>\n        /// <typeparam name="T">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <typeparam name="T1">\xe5\xb9\xbf\xe6\x92\xad\xe5\x9b\x9e\xe8\xb0\x83\xe6\xb6\x88\xe6\x81\xaf\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe7\xb1\xbb\xe5\x9e\x8b</typeparam>\n        /// <param name="name">\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        /// <param name="parameter">\xe5\xb9\xbf\xe6\x92\xad\xe4\xbc\xa0\xe9\x80\x92\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae</param>\n        /// <param name="callBack">\xe5\xb9\xbf\xe6\x92\xad\xe8\xae\xa2\xe9\x98\x85\xe8\x80\x85\xe7\x9a\x84\xe5\x9b\x9e\xe4\xbc\xa0\xe4\xbf\xa1\xe6\x81\xaf</param>\n        public static T1 PushBroadcast<T, T1>(string name, T parameter = default)\n        {\n            var broadcast = FindBroadcast(name);\n            if (broadcast != null)\n            {\n                foreach (var item in broadcast)\n                {\n                    if (item is Func<T, T1> action)\n                    {\n                        return action.Invoke(parameter);\n                    }\n                }\n            }\n            return default;\n        }\n        #endregion\n\n        #region \xe5\x8d\xb8\xe8\xbd\xbd\xe5\xb9\xbf\xe6\x92\xad\n        /// <summary>\n        /// \xe5\x8d\xb8\xe8\xbd\xbd\xe5\xb9\xbf\xe6\x92\xad\n        /// </summary>\n        /// <param name="name">\xe5\x8d\xb8\xe8\xbd\xbd\xe7\x9a\x84\xe5\xb9\xbf\xe6\x92\xad\xe5\x90\x8d\xe7\xa7\xb0</param>\n        public static void UninstallBroadcast(string name)\n        {\n            Broadcasts.Remove(name);\n        }\n        #endregion\n    }\n}\n'