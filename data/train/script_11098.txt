b'## ----setup, include=FALSE-----------------------------------------------------\nlibrary(knitr)\nopts_chunk$set(comment = NA,\n               prompt  = FALSE,\n               cache   = FALSE,\n               results = \'asis\')\nlibrary(kableExtra)\nlibrary(summarytools)\nlibrary(magrittr)\nst_options(plain.ascii = FALSE,\n           style       = "rmarkdown",\n           footnote    = NA,\n           subtitle.emphasis = FALSE,\n           lang = "en")\n\n## ---- echo=FALSE--------------------------------------------------------------\nst_css(main = TRUE, global = TRUE, bootstrap = FALSE)\n\n## ---- results=\'asis\', echo=FALSE----------------------------------------------\ntxt <- data.frame(\n  Function = \n    c(\'<a href="#freq"><strong><code>freq()</strong></code></a>\',\n      \'<a href="#ctable"><strong><code>ctable()</strong></code></a>\',\n      \'<a href="#descr"><strong><code>descr()</strong></code></a>\',\n      \'<a href="#dfsummary"><strong><code>dfSummary()</strong></code></a>\'),\n  Description = \n    c(paste("**Frequency Tables** featuring counts, proportions, cumulative",\n             "statistics as well as missing data reporting"),\n      paste("**Cross-Tabulations** (joint frequencies) between pairs",\n            "of discrete/categorical variables, featuring marginal sums",\n            "as well as row, column or total proportions"),\n      paste("**Descriptive (Univariate) Statistics** for numerical data, featuring",\n            "common measures of central tendency and dispersion"),\n      paste("**Data Frame Summaries** featuring type-specific",\n            "information for all variables: univariate",\n            "statistics and/or frequency distributions, bar charts or",\n            "histograms, as well as missing data counts and proportions.",\n            "Very useful to quickly, detect anomalies and identify trends",\n            "at a glance"))\n)\n\nkable(txt, format = "html", escape = FALSE, align = c(\'l\', \'l\')) %>%\n  kable_paper(full_width = FALSE, position = "left") %>%\n  column_spec(1, extra_css = "vertical-align:top") %>%\n  column_spec(2, extra_css = "vertical-align:top")\n\n## -----------------------------------------------------------------------------\nfreq(iris$Species, plain.ascii = FALSE, style = "rmarkdown")\n\n## -----------------------------------------------------------------------------\nfreq(iris$Species, report.nas = FALSE, headings = FALSE)\n\n## -----------------------------------------------------------------------------\nfreq(iris$Species, \n     report.nas = FALSE, \n     totals     = FALSE, \n     cumul      = FALSE, \n     headings   = FALSE)\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  freq(tobacco)\n\n## -----------------------------------------------------------------------------\nfreq(tobacco$disease, \n     order    = "freq",\n     rows     = 1:5,\n     headings = FALSE)\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  view(freq(tobacco), collapse = TRUE)\n\n## -----------------------------------------------------------------------------\nctable(x = tobacco$smoker, \n       y = tobacco$diseased, \n       prop = "r")   # Show row proportions\n\n## -----------------------------------------------------------------------------\nwith(tobacco, \n     print(ctable(x = smoker, \n                  y = diseased, \n                  prop     = \'n\',\n                  totals   = FALSE, \n                  headings = FALSE),\n           method = "render")\n)\n\n## -----------------------------------------------------------------------------\nlibrary(magrittr)\ntobacco %$%  # Acts like with(tobacco, ...)\n  ctable(x = smoker, y = diseased,\n         chisq = TRUE,\n         OR    = TRUE,\n         RR    = TRUE,\n         headings = FALSE) %>%\n  print(method = "render")\n\n## -----------------------------------------------------------------------------\ndescr(iris)\n\n## -----------------------------------------------------------------------------\nst_options(descr.silent = TRUE)\n\n## -----------------------------------------------------------------------------\ndescr(iris,\n      stats     = c("mean", "sd"),\n      transpose = TRUE,\n      headings  = FALSE)\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  st_options(descr.stats = "common")\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  view(dfSummary(iris))\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  dfSummary(tobacco,\n#            plain.ascii  = FALSE,\n#            style        = "grid",\n#            graph.magnif = 0.75,\n#            valid.col    = FALSE,\n#            tmp.img.dir  = "/tmp")\n\n## -----------------------------------------------------------------------------\nst_options(\n  dfSummary.custom.1 = \n    expression(\n      paste(\n        "Q1 - Q3 :",\n        round(\n          quantile(column_data, probs = .25, type = 2, \n                   names = FALSE, na.rm = TRUE), digits = 1\n        ), " - ",\n        round(\n          quantile(column_data, probs = .75, type = 2, \n                   names = FALSE, na.rm = TRUE), digits = 1\n        )\n      )\n    )\n)\n\nprint(\n  dfSummary(iris, \n            varnumbers   = FALSE,\n            na.col       = FALSE,\n            style        = "multiline",\n            plain.ascii  = FALSE,\n            headings     = FALSE,\n            graph.magnif = .8),\n  method = "render"\n)\n\n## ---- results=\'markup\'--------------------------------------------------------\nlibrary(formatR)\nst_options(dfSummary.custom.1 = "default")\nformatR::tidy_source(\n  text   = deparse(st_options("dfSummary.custom.1")),\n  indent = 2,\n  args.newline = TRUE\n)\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  dfs <- dfSummary(iris)\n#  dfs$Variable <- NULL # This deletes the "Variable" column\n\n## -----------------------------------------------------------------------------\n(iris_stats_by_species <- stby(data      = iris, \n                               INDICES   = iris$Species, \n                               FUN       = descr, \n                               stats     = "common", \n                               transpose = TRUE))\n\n## -----------------------------------------------------------------------------\nwith(tobacco, \n     stby(data    = BMI, \n          INDICES = age.gr, \n          FUN     = descr,\n          stats   = c("mean", "sd", "min", "med", "max"))\n)\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  stby(data    = list(x = tobacco$smoker, y = tobacco$diseased),\n#       INDICES = tobacco$gender,\n#       FUN     = ctable)\n#  \n#  # or equivalently\n#  with(tobacco,\n#       stby(data    = list(x = smoker, y = diseased),\n#            INDICES = gender,\n#            FUN     = ctable))\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  library(dplyr)\n#  tobacco$gender %<>% forcats::fct_explicit_na()\n#  tobacco %>%\n#    group_by(gender) %>%\n#    descr(stats = "fivenum")\n\n## ---- echo=FALSE--------------------------------------------------------------\nsuppressPackageStartupMessages(library(dplyr))\nlibrary(magrittr)\ntobacco$gender %<>% forcats::fct_explicit_na()\ntobacco %>% group_by(gender) %>% descr(stats = "fivenum")\n\n## ---- results=\'markup\'--------------------------------------------------------\nlibrary(magrittr)\niris %>%\n  descr(stats = "common") %>%\n  tb()\n\niris$Species %>% \n  freq(cumul = FALSE, report.nas = FALSE) %>% \n  tb()\n\n## ---- results=\'markup\'--------------------------------------------------------\ngrouped_descr <- stby(data    = exams,\n                      INDICES = exams$gender, \n                      FUN     = descr,\n                      stats   = "common")\n\ngrouped_descr %>% tb()\n\n## ---- results=\'markup\'--------------------------------------------------------\ngrouped_descr %>% tb(order = 2)\n\n## ---- results=\'markup\'--------------------------------------------------------\ngrouped_descr %>% tb(order = 3)\n\n## ---- results=\'asis\'----------------------------------------------------------\nlibrary(kableExtra)\nlibrary(magrittr)\nstby(data    = iris, \n     INDICES = iris$Species, \n     FUN     = descr, \n     stats   = "fivenum") %>%\n  tb(order = 3) %>%\n  kable(format = "html", digits = 2) %>%\n  collapse_rows(columns = 1, valign = "top")\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  view(iris_stats_by_species, file = "~/iris_stats_by_species.html")\n#  view(iris_stats_by_species, file = "~/iris_stats_by_species.md")\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  st_options()                      # Display all global options values\n#  st_options(\'round.digits\')        # Display the value of a specific option\n#  st_options(style = \'rmarkdown\',   # Set the value of one or several options\n#             footnote = NA)         # Turn off the footnote for all html output\n\n## -----------------------------------------------------------------------------\n(age_stats <- freq(tobacco$age.gr)) \nprint(age_stats,\n      report.nas     = FALSE, \n      totals         = FALSE, \n      display.type   = FALSE,\n      Variable.label = "Age Group")\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  print(dfSummary(tobacco),\n#        custom.css    = \'path/to/custom.css\',\n#        table.classes = \'tiny-text\',\n#        file          = "tiny-tobacco-dfSummary.html")\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  print(dfSummary(somedata,\n#                  varnumbers   = FALSE,\n#                  valid.col    = FALSE,\n#                  graph.magnif = 0.8),\n#        method   = \'render\',\n#        headings = FALSE,\n#        bootstrap.css = FALSE)\n\n## -----------------------------------------------------------------------------\nst_options(lang = "fr")\n\n## -----------------------------------------------------------------------------\nfreq(iris$Species)\n\n## ---- eval = FALSE------------------------------------------------------------\n#  Sys.setlocale("LC_CTYPE", "russian")\n#  st_options(lang = \'ru\')\n\n## ---- eval=FALSE--------------------------------------------------------------\n#  Sys.setlocale("LC_CTYPE", "")\n#  st_options(lang = "en")\n\n## -----------------------------------------------------------------------------\nsection_title <- "**Species of Iris**"\ndefine_keywords(title.freq = section_title,\n                freq = "N")\nfreq(iris$Species)\n\n## -----------------------------------------------------------------------------\ndefine_keywords(title.freq = "Types and Counts, Iris Flowers")\nprint(\n  freq(iris$Species,\n       display.type = FALSE), # Variable type won\'t be displayed...\n  Variable = ""               # and neither will the variable name\n  ) \n\n'