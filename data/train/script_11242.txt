b'package com.codeest.geeknews.ui.gold.fragment;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.design.widget.TabLayout;\nimport android.support.v4.view.ViewPager;\nimport android.view.View;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.base.BaseFragment;\nimport com.codeest.geeknews.model.bean.GoldManagerBean;\nimport com.codeest.geeknews.model.bean.GoldManagerItemBean;\nimport com.codeest.geeknews.presenter.gold.GoldMainPresenter;\nimport com.codeest.geeknews.base.contract.gold.GoldMainContract;\nimport com.codeest.geeknews.ui.gold.activity.GoldManagerActivity;\nimport com.codeest.geeknews.ui.gold.adapter.GoldPagerAdapter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.OnClick;\n\n/**\n * Created by codeest on 16/11/27.\n */\n\npublic class GoldMainFragment extends BaseFragment<GoldMainPresenter> implements GoldMainContract.View {\n\n    @BindView(R.id.tab_gold_main)\n    TabLayout mTabLayout;\n    @BindView(R.id.vp_gold_main)\n    ViewPager mViewPager;\n\n    public static String[] typeStr = {"Android", "iOS", "\xe5\x89\x8d\xe7\xab\xaf", "\xe5\x90\x8e\xe7\xab\xaf", "\xe8\xae\xbe\xe8\xae\xa1", "\xe4\xba\xa7\xe5\x93\x81", "\xe9\x98\x85\xe8\xaf\xbb", "\xe5\xb7\xa5\xe5\x85\xb7\xe8\xb5\x84\xe6\xba\x90"};\n    public static String[] type = {"android", "ios", "frontend", "backend", "design", "product", "article", "freebie"};\n\n    List<GoldPagerFragment> fragments = new ArrayList<>();\n    private int currentIndex = 0;\n\n    @Override\n    protected void initInject() {\n        getFragmentComponent().inject(this);\n    }\n\n    @Override\n    protected int getLayoutId() {\n        return R.layout.fragment_gold_main;\n    }\n\n    @Override\n    protected void initEventAndData() {\n        mTabLayout.setTabMode(TabLayout.MODE_SCROLLABLE);\n        mTabLayout.setupWithViewPager(mViewPager);\n        mPresenter.initManagerList();\n    }\n\n    @Override\n    public void updateTab(List<GoldManagerItemBean> mList) {\n        fragments.clear();\n        mTabLayout.removeAllTabs();\n        for (GoldManagerItemBean item : mList) {\n            if (item.getIsSelect()) {\n                GoldPagerFragment fragment = new GoldPagerFragment();\n                Bundle bundle = new Bundle();\n                bundle.putString(Constants.IT_GOLD_TYPE, type[item.getIndex()]);\n                bundle.putString(Constants.IT_GOLD_TYPE_STR, typeStr[item.getIndex()]);\n                mTabLayout.addTab(mTabLayout.newTab().setText(typeStr[item.getIndex()]));\n                fragment.setArguments(bundle);\n                fragments.add(fragment);\n            }\n        }\n        GoldPagerAdapter mAdapter = new GoldPagerAdapter(getChildFragmentManager(), fragments);\n        mViewPager.setAdapter(mAdapter);\n        for (GoldManagerItemBean item : mList) {\n            if (item.getIsSelect()) {\n                mTabLayout.getTabAt(currentIndex++).setText(typeStr[item.getIndex()]);\n            }\n        }\n        currentIndex = 0;\n    }\n\n    @Override\n    public void jumpToManager(GoldManagerBean mBean) {\n        Intent intent = new Intent(getActivity(), GoldManagerActivity.class);\n        intent.putExtra(Constants.IT_GOLD_MANAGER, mBean);\n        mContext.startActivity(intent);\n    }\n\n    @OnClick(R.id.iv_gold_menu)\n    public void onClick(View view) {\n        mPresenter.setManagerList();\n    }\n}\n'