b'\xef\xbb\xbf// UVa120 Stacks of Flapjacks\n// Rujia Liu\n#include<cstdio>\n#include<iostream>\n#include<sstream>\n#include<algorithm>\nusing namespace std;\n\nconst int maxn = 30 + 5;\nint n, a[maxn];\n\n// \xe7\xbf\xbb\xe8\xbd\xaca[0..p]\nvoid flip(int p) {\n  for(int i = 0; i < p-i; i++)\n    swap(a[i], a[p-i]);\n  printf("%d ", n-p);\n}\n\nint main() {\n  string s;\n  while(getline(cin, s)) {\n    cout << s << "\\n";\n    stringstream ss(s);\n    n = 0;\n    while(ss >> a[n]) n++;\n    for(int i = n-1; i > 0; i--) {\n      int p = max_element(a, a+i+1) - a; // \xe5\x85\x83\xe7\xb4\xa0a[0..i]\xe4\xb8\xad\xe7\x9a\x84\xe6\x9c\x80\xe5\xa4\xa7\xe5\x85\x83\xe7\xb4\xa0\n      if(p == i) continue;\n      if(p > 0) flip(p); // flip(0)\xe6\xb2\xa1\xe5\x95\xa5\xe6\x84\x8f\xe6\x80\x9d\xef\xbc\x8c\xe6\x98\xaf\xe4\xb8\x8d\xef\xbc\x9f\n      flip(i);\n    }\n    printf("0\\n");\n  }\n  return 0;\n}\n'