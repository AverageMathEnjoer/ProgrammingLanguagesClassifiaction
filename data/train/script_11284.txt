b'package net.println.kt11\n\nimport kotlin.properties.Delegates\n\n/**\n * Created by benny on 11/20/16.\n */\nclass Player {\n    private var state: State by Delegates.observable(State.IDLE, { prop, old, new ->\n        println("$old -> $new")\n        onPlayerStateChangedListener?.onStateChanged(old, new)\n    })\n\n    private fun sendCmd(cmd: PlayerCmd) {\n        when (cmd) {\n            is PlayerCmd.Play -> {\n                println("\\nPlay ${cmd.url} from ${cmd.position}ms")\n                state = State.PLAYING\n                doPlay(cmd.url, cmd.position)\n            }\n            is PlayerCmd.Resume -> {\n                println("\\nResume. ")\n                state = State.PLAYING\n                doResume()\n            }\n            is PlayerCmd.Pause -> {\n                println("\\nPause. ")\n                state = State.PAUSED\n                doPause()\n            }\n            is PlayerCmd.Stop -> {\n                println("\\nStop.")\n                state = State.IDLE\n                doStop()\n            }\n            is PlayerCmd.Seek -> {\n                println("\\nSeek to ${cmd.position}ms, state: $state")\n            }\n        }\n    }\n\n    private fun doPlay(url: String, position: Long) {\n        TODO("Play function not yet implemented")\n    }\n\n    private fun doResume(){\n        //todo\n    }\n\n    private fun doPause() {\n        //todo\n    }\n\n    private fun doStop() {\n        //todo\n    }\n\n    //region api\n    interface OnPlayerStateChangedListener {\n        fun onStateChanged(oldState: State, new: State)\n    }\n\n    var onPlayerStateChangedListener: OnPlayerStateChangedListener? = null\n\n    fun play(url: String, position: Long = 0) {\n        sendCmd(PlayerCmd.Play(url, position))\n    }\n\n    fun resume() {\n        sendCmd(PlayerCmd.Resume)\n    }\n\n    fun pause() {\n        sendCmd(PlayerCmd.Pause)\n    }\n\n    fun stop() {\n        sendCmd(PlayerCmd.Stop)\n    }\n\n    fun seekTo(position: Long) {\n        sendCmd(PlayerCmd.Seek(position))\n    }\n    //endregion\n}\n'