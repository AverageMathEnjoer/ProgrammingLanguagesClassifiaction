b'package icu.nullptr.twifucker.hook\n\nimport com.github.kyuubiran.ezxhelper.ClassUtils.loadClass\nimport com.github.kyuubiran.ezxhelper.HookFactory.`-Static`.createHook\nimport com.github.kyuubiran.ezxhelper.Log\nimport com.github.kyuubiran.ezxhelper.finders.FieldFinder\nimport com.github.kyuubiran.ezxhelper.finders.MethodFinder\nimport icu.nullptr.twifucker.afterMeasure\nimport icu.nullptr.twifucker.modulePrefs\nimport icu.nullptr.twifucker.reGenericClass\n\nobject JsonTimelineTrendHook : BaseHook() {\n    override val name: String\n        get() = "TimelineTrendHook"\n\n    override fun init() {\n        if (!modulePrefs.getBoolean("disable_promoted_trends", true)) return\n\n        val jsonTimelineTrendClass =\n            loadClass("com.twitter.model.json.timeline.urt.JsonTimelineTrend")\n        val jsonTimelineTrendMapperClass =\n            loadClass("com.twitter.model.json.timeline.urt.JsonTimelineTrend\\$\\$JsonObjectMapper")\n\n        val jsonPromotedTrendMetadataClass =\n            loadClass("com.twitter.model.json.timeline.urt.JsonPromotedTrendMetadata").genericSuperclass?.toString()\n                ?.let {\n                    reGenericClass.matchEntire(it)?.groupValues?.get(2)\n                        ?.let { genericClass -> loadClass(genericClass) }\n                } ?: throw ClassNotFoundException()\n        val jsonPromotedTrendMetadataField = FieldFinder.fromClass(jsonTimelineTrendClass)\n            .filterByType(jsonPromotedTrendMetadataClass).first()\n\n        MethodFinder.fromClass(jsonTimelineTrendMapperClass).filterByName("_parse")\n            .filterByReturnType(jsonTimelineTrendClass).first().createHook {\n                afterMeasure(name) { param ->\n                    param.result ?: return@afterMeasure\n                    jsonPromotedTrendMetadataField.get(param.result) ?: return@afterMeasure\n                    param.result = null\n                    Log.d("Remove promoted trend item")\n                }\n            }\n    }\n}\n'