b'// Now you try #2\ntype ContactDetails =\n| Address of string\n| Telephone of string\n| Email of string\ntype CustomerId = CustomerId of string\ntype Customer =\n    { CustomerId : CustomerId\n      PrimaryContactDetails : ContactDetails\n      SecondaryContactDetails : ContactDetails option }\n\n// Listing 23.5\nlet createCustomer customerId contactDetails secondaryDetails =\n    { CustomerId = customerId\n      PrimaryContactDetails = contactDetails\n      SecondaryContactDetails = secondaryDetails }\n\nlet customer = createCustomer (CustomerId "C-123") (Email "nicki@myemail.com") None\n\n// Listing 23.6\ntype GenuineCustomer = GenuineCustomer of Customer\n\nlet validateCustomer customer =\n    match customer.PrimaryContactDetails with\n    | Email e when e.EndsWith "SuperCorp.com" -> Some(GenuineCustomer customer)\n    | Address _ | Telephone _ -> Some(GenuineCustomer customer)\n    | Email _ -> None\n\nlet sendWelcomeEmail (GenuineCustomer customer) =\n    printfn "Hello, %A, and welcome to our site!" customer.CustomerId\n\nsendWelcomeEmail customer // does not compile\n\n// compiles - only called if validate customer returns Some(GenuineCustomer _) \ncustomer\n|> validateCustomer\n|> Option.map sendWelcomeEmail\n\n\n// Listing 23.8\nlet insertContactUnsafe contactDetails =\n  if contactDetails = (Email "nicki@myemail.com") then\n    { CustomerId = CustomerId "ABC"\n      PrimaryContactDetails = contactDetails\n      SecondaryContactDetails = None }\n  else failwith "Unable to insert  - customer already exists."\n\ntype Result<\'a> =\n| Success of \'a\n| Failure of string\n\nlet insertContact contactDetails =\n  if contactDetails = (Email "nicki@myemail.com") then\n    Success { CustomerId = CustomerId "ABC"\n              PrimaryContactDetails = contactDetails\n              SecondaryContactDetails = None }\n  else Failure "Unable to insert  - customer already exists."\n\nmatch insertContact (Email "nicki@myemail.com") with\n| Success customer -> printfn "Saved with %A" customer.CustomerId\n| Failure error -> printfn "Unable to save: %s" error\n'