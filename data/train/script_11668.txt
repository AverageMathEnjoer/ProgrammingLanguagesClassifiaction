b'package com.codeest.geeknews.ui.vtex.adapter;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.component.ImageLoader;\nimport com.codeest.geeknews.model.bean.NodeBean;\nimport com.codeest.geeknews.model.bean.NodeListBean;\nimport com.codeest.geeknews.presenter.vtex.VtexPresenter;\nimport com.codeest.geeknews.ui.vtex.activity.RepliesActivity;\nimport com.codeest.geeknews.util.DateUtil;\nimport com.codeest.geeknews.widget.CircleImageView;\nimport com.codeest.geeknews.widget.SquareImageView;\n\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\n\n/**\n * Created by codeest on 16/12/19.\n */\n\npublic class NodeListAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n\n    private Context mContext;\n    private LayoutInflater inflater;\n    private List<NodeListBean> mList;\n    private NodeBean mTopBean;\n\n    public NodeListAdapter(Context context, List<NodeListBean> mList) {\n        this.mContext = context;\n        this.mList = mList;\n        inflater = LayoutInflater.from(mContext);\n    }\n\n    public enum ITEM_TYPE {\n        ITEM_TOP,           //\xe8\x8a\x82\xe7\x82\xb9\xe4\xbf\xa1\xe6\x81\xaf\n        ITEM_CONTENT,       //\xe8\x8a\x82\xe7\x82\xb9\xe5\x88\x97\xe8\xa1\xa8\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        if (position == 0) {\n            return ITEM_TYPE.ITEM_TOP.ordinal();\n        }\n        return ITEM_TYPE.ITEM_CONTENT.ordinal();\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        if (viewType == ITEM_TYPE.ITEM_TOP.ordinal()) {\n            return new TopViewHolder(inflater.inflate(R.layout.item_node_top, parent, false));\n        }\n        return new ViewHolder(inflater.inflate(R.layout.item_vtex, parent, false));\n    }\n\n    @Override\n    public void onBindViewHolder(final RecyclerView.ViewHolder holder, int position) {\n        if (holder instanceof TopViewHolder) {\n            TopViewHolder topHolder = ((TopViewHolder) holder);\n            if (mTopBean == null)\n                return;\n            ImageLoader.load(mContext, VtexPresenter.parseImg(mTopBean.getavatar_normal()), topHolder.ivNodeFace);\n            topHolder.tvNodeContent.setText(mTopBean.getHeader());\n            topHolder.tvNodesTips.setText(String.format("%d\xe4\xb8\xaa\xe4\xb8\xbb\xe9\xa2\x98\\n%d\xe6\xac\xa1\xe6\x94\xb6\xe8\x97\x8f", mTopBean.getTopics(), mTopBean.getStars()));\n            topHolder.tvNodeName.setText(mTopBean.getTitle());\n        } else {\n            ViewHolder contentHolder = ((ViewHolder) holder);\n            NodeListBean bean = mList.get(position - 1);\n            if (bean == null)\n                return;\n            ImageLoader.load(mContext, VtexPresenter.parseImg(bean.getMember().getavatar_normal()), contentHolder.ivTopicFace);\n            contentHolder.tvTopicName.setText(bean.getMember().getUsername());\n            contentHolder.tvTopicTips.setText(DateUtil.formatTime2String(bean.getCreated()));\n            contentHolder.tvTopicComment.setText(String.valueOf(bean.getReplies()));\n            contentHolder.tvTopicTitle.setText(bean.getTitle());\n            contentHolder.tvTopicNode.setText(bean.getNode().getTitle());\n            contentHolder.itemView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    Intent intent = new Intent();\n                    intent.setClass(mContext, RepliesActivity.class);\n                    if (holder.getAdapterPosition() - 1 < 0 || mList.get(holder.getAdapterPosition() - 1) == null)\n                        return;\n                    intent.putExtra(Constants.IT_VTEX_TOPIC_ID, mList.get(holder.getAdapterPosition() - 1).getId());\n                    intent.putExtra(Constants.IT_VTEX_REPLIES_TOP, mList.get(holder.getAdapterPosition() - 1));\n                    mContext.startActivity(intent);\n                }\n            });\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        if (mTopBean == null) {\n            return mList.size();\n        }\n        return mList.size() + 1;\n    }\n\n    public static class TopViewHolder extends RecyclerView.ViewHolder {\n\n        @BindView(R.id.iv_node_face)\n        CircleImageView ivNodeFace;\n        @BindView(R.id.tv_node_name)\n        TextView tvNodeName;\n        @BindView(R.id.tv_nodes_tips)\n        TextView tvNodesTips;\n        @BindView(R.id.tv_node_content)\n        TextView tvNodeContent;\n\n        public TopViewHolder(View itemView) {\n            super(itemView);\n            ButterKnife.bind(this, itemView);\n        }\n    }\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n\n        @BindView(R.id.iv_topic_face)\n        SquareImageView ivTopicFace;\n        @BindView(R.id.tv_topic_name)\n        TextView tvTopicName;\n        @BindView(R.id.tv_topic_tips)\n        TextView tvTopicTips;\n        @BindView(R.id.tv_topic_comment)\n        TextView tvTopicComment;\n        @BindView(R.id.tv_topic_node)\n        TextView tvTopicNode;\n        @BindView(R.id.tv_topic_title)\n        TextView tvTopicTitle;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            ButterKnife.bind(this, itemView);\n        }\n    }\n\n    public void setTopData(NodeBean mTopBean) {\n        this.mTopBean = mTopBean;\n        notifyItemChanged(0);\n    }\n\n    public void setContentData(List<NodeListBean> mList) {\n        this.mList = mList;\n        notifyDataSetChanged();\n    }\n}'