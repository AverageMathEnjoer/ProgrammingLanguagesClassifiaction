b'\xef\xbb\xbfusing Microsoft.Extensions.Configuration;\nusing Microsoft.Extensions.DependencyInjection;\nusing RonSijm.ButtFish.InputLoops;\n\nnamespace RonSijm.ButtFish;\n\n// ReSharper disable once ClassNeverInstantiated.Global\n// ReSharper disable once UnusedParameter.Global\n// ReSharper disable once StringLiteralTypo\npublic class Program\n{\n    public static async Task Main(string[] args)\n    {\n        Console.WriteAscii("ButtFish", Color.FromArgb(0, 212, 255));\n        Console.WriteLine();\n\n        var builder = new ConfigurationBuilder().AddJsonFile("appsettings.json", optional: true).Build();\n        var options = builder.Get<Options>();\n\n        ICharacterEncoder encoder = options.Encoder is not "SimplifiedPulse" ? new MorseEncoder() : new SimplifiedPulseEncoder();\n\n        TimeUnitConfig.TimeInit = options.TimeUnitInMS;\n\n        var serviceProvider = new ServiceCollection()\n            .AddTransient<FENBasedLoop>()\n            .AddTransient<ManualInputLoop>()\n            .AddTransient<DeviceBroadcaster>()\n            .AddSingleton(encoder)\n            .AddSingleton(options)\n            .BuildServiceProvider();\n\n\n        Console.WriteLine("Welcome to Buttfish!", Color.GreenYellow);\n        Console.WriteLine();\n        Console.WriteLine($"Using Encoder: {encoder.GetType().Name}");\n        Console.WriteLine(" - Available Options: SimplifiedPulse, MorseEncoder");\n\n        var deviceDiscoveryManager = new DeviceDiscoveryManager();\n        var devices = await deviceDiscoveryManager.GetDevice();\n\n        Console.WriteLine();\n        Console.WriteLine();\n\n        IInputLoop inputLoop = options.UseManualInput ? serviceProvider.GetRequiredService<ManualInputLoop>() : serviceProvider.GetRequiredService<FENBasedLoop>();\n\n        await inputLoop.Start(devices);\n\n        Console.ReadKey();\n    }\n}'