b'package com.codeest.geeknews.presenter.gold;\n\nimport com.codeest.geeknews.base.RxPresenter;\nimport com.codeest.geeknews.base.contract.gold.GoldMainContract;\nimport com.codeest.geeknews.component.RxBus;\nimport com.codeest.geeknews.model.DataManager;\nimport com.codeest.geeknews.model.bean.GoldManagerBean;\nimport com.codeest.geeknews.model.bean.GoldManagerItemBean;\nimport com.codeest.geeknews.util.RxUtil;\nimport com.codeest.geeknews.widget.CommonSubscriber;\n\nimport javax.inject.Inject;\n\nimport io.realm.RealmList;\n\n/**\n * Created by codeest on 16/11/28.\n */\n\npublic class GoldMainPresenter extends RxPresenter<GoldMainContract.View> implements GoldMainContract.Presenter{\n\n    private DataManager mDataManager;\n    private RealmList<GoldManagerItemBean> mList;\n\n    @Inject\n    public GoldMainPresenter(DataManager mDataManager) {\n        this.mDataManager = mDataManager;\n    }\n\n    @Override\n    public void attachView(GoldMainContract.View view) {\n        super.attachView(view);\n        registerEvent();\n    }\n\n    private void registerEvent() {\n        addSubscribe(RxBus.getDefault().toFlowable(GoldManagerBean.class)\n                .compose(RxUtil.<GoldManagerBean>rxSchedulerHelper())\n                .subscribeWith(new CommonSubscriber<GoldManagerBean>(mView, "\xe8\xae\xbe\xe7\xbd\xae\xe5\xa4\xb1\xe8\xb4\xa5", false) {\n                    @Override\n                    public void onNext(GoldManagerBean goldManagerBean) {\n                        mDataManager.updateGoldManagerList(goldManagerBean);\n                        mView.updateTab(goldManagerBean.getManagerList());\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                        super.onError(e);\n                        registerEvent();\n                    }\n                })\n        );\n    }\n\n    @Override\n    public void initManagerList() {\n        if (mDataManager.getManagerPoint()) {\n            //\xe7\xac\xac\xe4\xb8\x80\xe6\xac\xa1\xe4\xbd\xbf\xe7\x94\xa8\xef\xbc\x8c\xe7\x94\x9f\xe6\x88\x90\xe9\xbb\x98\xe8\xae\xa4ManagerList\n            initList();\n            mDataManager.updateGoldManagerList(new GoldManagerBean(mList));\n            mView.updateTab(mList);\n        } else {\n            if (mDataManager.getGoldManagerList() == null) {\n                initList();\n                mDataManager.updateGoldManagerList(new GoldManagerBean(mList));\n            } else {\n                mList = mDataManager.getGoldManagerList().getManagerList();\n            }\n            mView.updateTab(mList);\n        }\n    }\n\n    @Override\n    public void setManagerList() {\n        mView.jumpToManager(mDataManager.getGoldManagerList());\n    }\n\n    private void initList() {\n        mList = new RealmList<>();\n        mList.add(new GoldManagerItemBean(0, true));\n        mList.add(new GoldManagerItemBean(1, true));\n        mList.add(new GoldManagerItemBean(2, true));\n        mList.add(new GoldManagerItemBean(3, true));\n        mList.add(new GoldManagerItemBean(4, false));\n        mList.add(new GoldManagerItemBean(5, false));\n        mList.add(new GoldManagerItemBean(6, false));\n        mList.add(new GoldManagerItemBean(7, false));\n    }\n}\n'