b'package com.codeest.geeknews.widget;\n\nimport android.support.v7.widget.GridLayoutManager;\nimport android.support.v7.widget.LinearLayoutManager;\nimport android.support.v7.widget.RecyclerView;\nimport android.support.v7.widget.helper.ItemTouchHelper;\n\n/**\n * Created by codeest on 2016/8/24.\n * http://blog.csdn.net/yanzhenjie1003/article/details/51935982\n */\n\npublic class DefaultItemTouchHelpCallback extends ItemTouchHelper.Callback {\n\n    /**\n     * Item\xe6\x93\x8d\xe4\xbd\x9c\xe7\x9a\x84\xe5\x9b\x9e\xe8\xb0\x83\n     */\n    private OnItemTouchCallbackListener onItemTouchCallbackListener;\n\n    /**\n     * \xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe6\x8b\x96\xe6\x8b\xbd\n     */\n    private boolean isCanDrag = true;\n    /**\n     * \xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xa2\xab\xe6\xbb\x91\xe5\x8a\xa8\n     */\n    private boolean isCanSwipe = true;\n\n    public DefaultItemTouchHelpCallback(OnItemTouchCallbackListener onItemTouchCallbackListener) {\n        this.onItemTouchCallbackListener = onItemTouchCallbackListener;\n    }\n\n    /**\n     * \xe8\xae\xbe\xe7\xbd\xaeItem\xe6\x93\x8d\xe4\xbd\x9c\xe7\x9a\x84\xe5\x9b\x9e\xe8\xb0\x83\xef\xbc\x8c\xe5\x8e\xbb\xe6\x9b\xb4\xe6\x96\xb0UI\xe5\x92\x8c\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90\n     *\n     * @param onItemTouchCallbackListener\n     */\n    public void setOnItemTouchCallbackListener(OnItemTouchCallbackListener onItemTouchCallbackListener) {\n        this.onItemTouchCallbackListener = onItemTouchCallbackListener;\n    }\n\n    /**\n     * \xe8\xae\xbe\xe7\xbd\xae\xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xa2\xab\xe6\x8b\x96\xe6\x8b\xbd\n     *\n     * @param canDrag \xe6\x98\xaftrue\xef\xbc\x8c\xe5\x90\xa6false\n     */\n    public void setDragEnable(boolean canDrag) {\n        isCanDrag = canDrag;\n    }\n\n    /**\n     * \xe8\xae\xbe\xe7\xbd\xae\xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xa2\xab\xe6\xbb\x91\xe5\x8a\xa8\n     *\n     * @param canSwipe \xe6\x98\xaftrue\xef\xbc\x8c\xe5\x90\xa6false\n     */\n    public void setSwipeEnable(boolean canSwipe) {\n        isCanSwipe = canSwipe;\n    }\n\n    /**\n     * \xe5\xbd\x93Item\xe8\xa2\xab\xe9\x95\xbf\xe6\x8c\x89\xe7\x9a\x84\xe6\x97\xb6\xe5\x80\x99\xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xa2\xab\xe6\x8b\x96\xe6\x8b\xbd\n     *\n     * @return\n     */\n    @Override\n    public boolean isLongPressDragEnabled() {\n        return isCanDrag;\n    }\n\n    /**\n     * Item\xe6\x98\xaf\xe5\x90\xa6\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xa2\xab\xe6\xbb\x91\xe5\x8a\xa8(H\xef\xbc\x9a\xe5\xb7\xa6\xe5\x8f\xb3\xe6\xbb\x91\xe5\x8a\xa8\xef\xbc\x8cV\xef\xbc\x9a\xe4\xb8\x8a\xe4\xb8\x8b\xe6\xbb\x91\xe5\x8a\xa8)\n     *\n     * @return\n     */\n    @Override\n    public boolean isItemViewSwipeEnabled() {\n        return isCanSwipe;\n    }\n\n    /**\n     * \xe5\xbd\x93\xe7\x94\xa8\xe6\x88\xb7\xe6\x8b\x96\xe6\x8b\xbd\xe6\x88\x96\xe8\x80\x85\xe6\xbb\x91\xe5\x8a\xa8Item\xe7\x9a\x84\xe6\x97\xb6\xe5\x80\x99\xe9\x9c\x80\xe8\xa6\x81\xe6\x88\x91\xe4\xbb\xac\xe5\x91\x8a\xe8\xaf\x89\xe7\xb3\xbb\xe7\xbb\x9f\xe6\xbb\x91\xe5\x8a\xa8\xe6\x88\x96\xe8\x80\x85\xe6\x8b\x96\xe6\x8b\xbd\xe7\x9a\x84\xe6\x96\xb9\xe5\x90\x91\n     *\n     * @param recyclerView\n     * @param viewHolder\n     * @return\n     */\n    @Override\n    public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {\n        RecyclerView.LayoutManager layoutManager = recyclerView.getLayoutManager();\n        if (layoutManager instanceof GridLayoutManager) {// GridLayoutManager\n            // flag\xe5\xa6\x82\xe6\x9e\x9c\xe5\x80\xbc\xe6\x98\xaf0\xef\xbc\x8c\xe7\x9b\xb8\xe5\xbd\x93\xe4\xba\x8e\xe8\xbf\x99\xe4\xb8\xaa\xe5\x8a\x9f\xe8\x83\xbd\xe8\xa2\xab\xe5\x85\xb3\xe9\x97\xad\n            int dragFlag = ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT | ItemTouchHelper.UP | ItemTouchHelper.DOWN;\n            int swipeFlag = 0;\n            // create make\n            return makeMovementFlags(dragFlag, swipeFlag);\n        } else if (layoutManager instanceof LinearLayoutManager) {// linearLayoutManager\n            LinearLayoutManager linearLayoutManager = (LinearLayoutManager) layoutManager;\n            int orientation = linearLayoutManager.getOrientation();\n\n            int dragFlag = 0;\n            int swipeFlag = 0;\n\n            // \xe4\xb8\xba\xe4\xba\x86\xe6\x96\xb9\xe4\xbe\xbf\xe7\x90\x86\xe8\xa7\xa3\xef\xbc\x8c\xe7\x9b\xb8\xe5\xbd\x93\xe4\xba\x8e\xe5\x88\x86\xe4\xb8\xba\xe6\xa8\xaa\xe7\x9d\x80\xe7\x9a\x84ListView\xe5\x92\x8c\xe7\xab\x96\xe7\x9d\x80\xe7\x9a\x84ListView\n            if (orientation == LinearLayoutManager.HORIZONTAL) {// \xe5\xa6\x82\xe6\x9e\x9c\xe6\x98\xaf\xe6\xa8\xaa\xe5\x90\x91\xe7\x9a\x84\xe5\xb8\x83\xe5\xb1\x80\n                swipeFlag = ItemTouchHelper.UP | ItemTouchHelper.DOWN;\n                dragFlag = ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT;\n            } else if (orientation == LinearLayoutManager.VERTICAL) {// \xe5\xa6\x82\xe6\x9e\x9c\xe6\x98\xaf\xe7\xab\x96\xe5\x90\x91\xe7\x9a\x84\xe5\xb8\x83\xe5\xb1\x80\xef\xbc\x8c\xe7\x9b\xb8\xe5\xbd\x93\xe4\xba\x8eListView\n                dragFlag = ItemTouchHelper.UP | ItemTouchHelper.DOWN;\n                swipeFlag = ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT;\n            }\n            return makeMovementFlags(dragFlag, swipeFlag);\n        }\n        return 0;\n    }\n\n    /**\n     * \xe5\xbd\x93Item\xe8\xa2\xab\xe6\x8b\x96\xe6\x8b\xbd\xe7\x9a\x84\xe6\x97\xb6\xe5\x80\x99\xe8\xa2\xab\xe5\x9b\x9e\xe8\xb0\x83\n     *\n     * @param recyclerView     recyclerView\n     * @param srcViewHolder    \xe6\x8b\x96\xe6\x8b\xbd\xe7\x9a\x84ViewHolder\n     * @param targetViewHolder \xe7\x9b\xae\xe7\x9a\x84\xe5\x9c\xb0\xe7\x9a\x84viewHolder\n     * @return\n     */\n    @Override\n    public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder srcViewHolder, RecyclerView.ViewHolder targetViewHolder) {\n        if (onItemTouchCallbackListener != null) {\n            return onItemTouchCallbackListener.onMove(srcViewHolder.getAdapterPosition(), targetViewHolder.getAdapterPosition());\n        }\n        return false;\n    }\n\n    @Override\n    public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\n        if (onItemTouchCallbackListener != null) {\n            onItemTouchCallbackListener.onSwiped(viewHolder.getAdapterPosition());\n        }\n    }\n\n    public interface OnItemTouchCallbackListener {\n        /**\n         * \xe5\xbd\x93\xe6\x9f\x90\xe4\xb8\xaaItem\xe8\xa2\xab\xe6\xbb\x91\xe5\x8a\xa8\xe5\x88\xa0\xe9\x99\xa4\xe7\x9a\x84\xe6\x97\xb6\xe5\x80\x99\n         *\n         * @param adapterPosition item\xe7\x9a\x84position\n         */\n        void onSwiped(int adapterPosition);\n\n        /**\n         * \xe5\xbd\x93\xe4\xb8\xa4\xe4\xb8\xaaItem\xe4\xbd\x8d\xe7\xbd\xae\xe4\xba\x92\xe6\x8d\xa2\xe7\x9a\x84\xe6\x97\xb6\xe5\x80\x99\xe8\xa2\xab\xe5\x9b\x9e\xe8\xb0\x83\n         *\n         * @param srcPosition    \xe6\x8b\x96\xe6\x8b\xbd\xe7\x9a\x84item\xe7\x9a\x84position\n         * @param targetPosition \xe7\x9b\xae\xe7\x9a\x84\xe5\x9c\xb0\xe7\x9a\x84Item\xe7\x9a\x84position\n         * @return \xe5\xbc\x80\xe5\x8f\x91\xe8\x80\x85\xe5\xa4\x84\xe7\x90\x86\xe4\xba\x86\xe6\x93\x8d\xe4\xbd\x9c\xe5\xba\x94\xe8\xaf\xa5\xe8\xbf\x94\xe5\x9b\x9etrue\xef\xbc\x8c\xe5\xbc\x80\xe5\x8f\x91\xe8\x80\x85\xe6\xb2\xa1\xe6\x9c\x89\xe5\xa4\x84\xe7\x90\x86\xe5\xb0\xb1\xe8\xbf\x94\xe5\x9b\x9efalse\n         */\n        boolean onMove(int srcPosition, int targetPosition);\n    }\n}\n'