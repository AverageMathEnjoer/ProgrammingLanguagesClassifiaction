b'\xef\xbb\xbfusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing Castle.DynamicProxy;\nusing Core.CrossCuttingConcerns.Logging;\nusing Core.CrossCuttingConcerns.Logging.Log4Net;\nusing Core.Utilities.Interceptors;\nusing Core.Utilities.Messages;\n\nnamespace Core.Aspects.Autofac.Logging\n{\n    public class LogAspect:MethodInterception\n    {\n        private LoggerServiceBase _loggerServiceBase;\n\n        public LogAspect(Type loggerService)\n        {\n            if (loggerService.BaseType!=typeof(LoggerServiceBase))\n            {\n                throw new System.Exception(AspectMessages.WrongLoggerType);\n            }\n\n            _loggerServiceBase = (LoggerServiceBase) Activator.CreateInstance(loggerService);\n        }\n\n        protected override void OnBefore(IInvocation invocation)\n        {\n            _loggerServiceBase.Info(GetLogDetail(invocation));\n        }\n\n        private LogDetail GetLogDetail(IInvocation invocation)\n        {\n            var logParameters = new List<LogParameter>();\n            for (int i = 0; i < invocation.Arguments.Length; i++)\n            {\n             logParameters.Add(new LogParameter\n             {\n                 Name = invocation.GetConcreteMethod().GetParameters()[i].Name,\n                 Value = invocation.Arguments[i],\n                 Type = invocation.Arguments[i].GetType().Name\n             });   \n            }\n            \n            var logDetail =new LogDetail\n            {\n                MethodName = invocation.Method.Name,\n                LogParameters = logParameters\n            };\n\n            return logDetail;\n        }\n    }\n}\n'