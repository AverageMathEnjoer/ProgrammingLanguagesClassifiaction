b'//http://codeforces.com/contest/525/problem/E\n#include <bits/stdc++.h>\nusing namespace std;\n#define gc getchar_unlocked\n#define fo(i,n) for(i=0;i<n;i++)\n#define Fo(i,k,n) for(i=k;k<n?i<n:i>n;k<n?i+=1:i-=1)\n#define ll long long\n#define si(x)\tscanf("%d",&x)\n#define sl(x)\tscanf("%lld",&x)\n#define ss(s)\tscanf("%s",s)\n#define pi(x)\tprintf("%d\\n",x)\n#define pl(x)\tprintf("%lld\\n",x)\n#define ps(s)\tprintf("%s\\n",s)\n#define pb push_back\n#define mp make_pair\n#define F first\n#define S second\n#define all(x) x.begin(), x.end()\n#define clr(x) memset(x, 0, sizeof(x))\n#define sortall(x) sort(all(x))\n#define tr(it, a) for(auto it = a.begin(); it != a.end(); it++)\n#define PI 3.1415926535897932384626\ntypedef pair<int, int>\tpii;\ntypedef pair<ll, ll>\tpll;\ntypedef vector<int>\t\tvi;\ntypedef vector<ll>\t\tvll;\ntypedef vector<pii>\t\tvpii;\ntypedef vector<pll>\t\tvpll;\ntypedef vector<vi>\t\tvvi;\ntypedef vector<vll>\t\tvvl;\nconst int mod = 1000000007;\nconst int N = 3e5;\nvi g[N];\nint a[N];\nvi rep(int no, int len, int base){\n\tvi ans;\n\twhile(no){\n\t\tans.pb(no%base);\n\t\tno /= base;\n\t}\n\twhile((int)ans.size() != len) ans.pb(0);\n\treverse(all(ans));\n\treturn ans;\n}\nmap<ll, ll> cnt[30];\nll fac[20];\nint main()\n{\n\tios_base::sync_with_stdio(false);\n\tcin.tie(NULL);\n\tint i,n,k,j, mask;\n\tll s, ans = 0;\n\tcin>>n>>k>>s;\n\tfo(i, n) cin>>a[i];\n\tint len = n/2, left = n-len;\n\tint lim = pow(3, len);\n\tfo(i, n+1) cnt[i].clear();\n\tfac[1] = 1;\n\tFo(i, 2, 20) fac[i] = fac[i-1]*i;\n\tfo(mask, lim){\n\t\tvi bit = rep(mask, len, 3);\n\t\tint used = 0;\n\t\tll sum = 0;\n\t\tfo(i, bit.size()){\n\t\t\tint dig = bit[i];\n\t\t\tif(dig==0)continue;\n\t\t\telse if(dig==1) sum += a[i];\n\t\t\telse if (a[i]<20)sum += fac[a[i]], used++;\n\t\t\telse if(a[i]>=20) {\n\t\t\t\tsum = -1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(sum>=0){\n\t\t\t// for(int x:bit) cout<<x;\n\t\t\t// cout<<" ";\n\t\t\t// cout<<used<<" "<<sum<<endl;\n\t\t\tcnt[used][sum]++;\n\t\t}\n\t}\n\t//len to n-1\n\t\n\t\n\tlim = pow(3, left);\n\tfo(mask, lim){\n\t\tvi bit = rep(mask, left, 3);\n\t\tint used = 0;\n\t\tll sum = 0;\n\t\tfo(i, bit.size()){\n\t\t\tint dig = bit[i];\n\t\t\tif(dig==0)continue;\n\t\t\telse if(dig==1) sum += a[i+len];\n\t\t\telse if (a[i+len]<20)sum += fac[a[i+len]], used++;\n\t\t\telse if(a[i+len]>=20) {\n\t\t\t\tsum = -1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(sum>=0){\n\t\t\tint remk = k-used;\n\t\t\tll need = s-sum;\n\t\t\twhile(remk>=0 and need>=0 ){\n\t\t\t\tif(cnt[remk].count(need))\n\t\t\t\t\tans += cnt[remk][need];\n\t\t\t\tremk--;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcout<<ans<<endl;\n\treturn 0;\n} \n\n'