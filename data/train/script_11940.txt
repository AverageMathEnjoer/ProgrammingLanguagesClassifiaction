b'/*\n * Copyright (C) 2015 Naman Dwivedi\n *\n * Licensed under the GNU General Public License v3\n *\n * This is free software: you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n */\n\npackage com.naman14.timber.subfragments;\n\nimport android.content.Context;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport androidx.annotation.Nullable;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentStatePagerAdapter;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport com.naman14.timber.R;\nimport com.naman14.timber.utils.Constants;\nimport com.naman14.timber.utils.NavigationUtils;\nimport com.naman14.timber.widgets.MultiViewPager;\n\npublic class StyleSelectorFragment extends Fragment {\n\n    public String ACTION = "action";\n    private FragmentStatePagerAdapter adapter;\n    private MultiViewPager pager;\n    private SubStyleSelectorFragment selectorFragment;\n    private SharedPreferences preferences;\n\n    public static StyleSelectorFragment newInstance(String what) {\n        StyleSelectorFragment fragment = new StyleSelectorFragment();\n        Bundle bundle = new Bundle();\n        bundle.putString(Constants.SETTINGS_STYLE_SELECTOR_WHAT, what);\n        fragment.setArguments(bundle);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            ACTION = getArguments().getString(Constants.SETTINGS_STYLE_SELECTOR_WHAT);\n        }\n        preferences = getActivity().getSharedPreferences(Constants.FRAGMENT_ID, Context.MODE_PRIVATE);\n    }\n\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container,\n                             @Nullable Bundle savedInstanceState) {\n        View rootView = inflater.inflate(R.layout.fragment_style_selector, container, false);\n\n        if (ACTION.equals(Constants.SETTINGS_STYLE_SELECTOR_NOWPLAYING)) {\n\n        }\n        pager = (MultiViewPager) rootView.findViewById(R.id.pager);\n\n        adapter = new FragmentStatePagerAdapter(getChildFragmentManager()) {\n\n            @Override\n            public int getCount() {\n                return 6;\n            }\n\n            @Override\n            public Fragment getItem(int position) {\n                selectorFragment = SubStyleSelectorFragment.newInstance(position, ACTION);\n                return selectorFragment;\n            }\n\n            @Override\n            public int getItemPosition(Object object) {\n                return POSITION_NONE;\n            }\n        };\n        pager.setAdapter(adapter);\n        scrollToCurrentStyle();\n\n        return rootView;\n    }\n\n    public void updateCurrentStyle() {\n        if (selectorFragment != null) {\n            adapter.notifyDataSetChanged();\n            scrollToCurrentStyle();\n        }\n\n    }\n\n    public void scrollToCurrentStyle() {\n        String fragmentID = preferences.getString(Constants.NOWPLAYING_FRAGMENT_ID, Constants.TIMBER3);\n        pager.setCurrentItem(NavigationUtils.getIntForCurrentNowplaying(fragmentID));\n    }\n\n}\n'