b'\xef\xbb\xbfusing BaiduPanDownload.HttpTool;\nusing BaiduPanDownload.Util;\nusing System;\nusing System.Collections.Generic;\nusing System.ComponentModel;\nusing System.Data;\nusing System.Drawing;\nusing System.Linq;\nusing System.Runtime.InteropServices;\nusing System.Text;\nusing System.Text.RegularExpressions;\nusing System.Threading.Tasks;\nusing System.Windows.Forms;\n\nnamespace BaiduPanDownload.Forms\n{\n    public partial class Login : Form\n    {\n\n    private const int INTERNET_OPTION_END_BROWSER_SESSION = 42;\n\n        [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]\n        static extern bool InternetGetCookieEx(string pchURL, string pchCookieName, StringBuilder pchCookieData, ref System.UInt32 pcchCookieData, int dwFlags, IntPtr lpReserved);\n        [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]\n        static extern int InternetSetCookieEx(string lpszURL, string lpszCookieName, string lpszCookieData, int dwFlags, IntPtr dwReserved);\n        [DllImport("wininet.dll", SetLastError = true)]\n        private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int lpdwBufferLength);\n        [DllImport("shell32.dll")]\n        static extern IntPtr ShellExecute(IntPtr hwnd, string lpOperation, string lpFile, string lpParameters, string lpDirectory, ShowCommands nShowCmd);\n\n        public Login()\n        {\n            InitializeComponent();\n        }\n\n        private void Login_Load(object sender, EventArgs e)\n        {\n            webBrowser1.Url = new Uri("http://www.139.sh");\n        }\n\n        private void button1_Click(object sender, EventArgs e)\n        {\n            Cookies cookies = new Cookies\n            {\n                CookiesStr = GetCookies("http://www.139.sh")\n            };\n            if (!cookies.Contains("Cookie_token"))\n            {\n                MessageBox.Show("\xe4\xbd\xa0\xe4\xbc\xbc\xe4\xb9\x8e\xe8\xbf\x98\xe6\xb2\xa1\xe6\x9c\x89\xe7\x99\xbb\xe5\xbd\x95\xe5\x91\xa2");\n                return;\n            }\n            Program.config.Access_Token = cookies.GetCookie("Cookie_token");\n            Program.config.save();\n            MessageBox.Show("\xe4\xbf\x9d\xe5\xad\x98\xe5\xae\x8c\xe6\x88\x90");\n            //ShellExecute(IntPtr.Zero, "open", "rundll32.exe", " InetCpl.cpl,ClearMyTracksByProcess 255", "", ShowCommands.SW_HIDE);\n            webBrowser1.Dispose();\n            this.Close();\n        }\n\n        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)\n        {\n\n        }\n        string GetCookies(string url)\n        {\n            uint datasize = 256;\n            StringBuilder cookieData = new StringBuilder((int)datasize);\n            if (!InternetGetCookieEx(url, null, cookieData, ref datasize, 0x2000, IntPtr.Zero))\n            {\n                if (datasize < 0)\n                {\n                    return null;\n                }\n                cookieData = new StringBuilder((int)datasize);\n                if (!InternetGetCookieEx(url, null, cookieData, ref datasize, 0x00002000, IntPtr.Zero))\n                {\n                    return null;\n                }\n            }\n            return cookieData.ToString();\n        }\n        private void button2_Click(object sender, EventArgs e)\n        {\n            ShellExecute(IntPtr.Zero, "open", "rundll32.exe", " InetCpl.cpl,ClearMyTracksByProcess 2", "", ShowCommands.SW_HIDE);\n            this.Close();\n        }\n\n        private void webBrowser1_NewWindow(object sender, CancelEventArgs e)\n        {\n            e.Cancel = true;\n            webBrowser1.Navigate(webBrowser1.StatusText);\n        }\n    }\n}\n'