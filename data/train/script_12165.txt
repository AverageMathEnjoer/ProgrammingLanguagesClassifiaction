b'package com.codeest.geeknews.ui.zhihu.activity;\n\nimport android.app.ActivityOptions;\nimport android.content.Intent;\nimport android.support.v4.widget.SwipeRefreshLayout;\nimport android.support.v7.widget.LinearLayoutManager;\nimport android.support.v7.widget.RecyclerView;\nimport android.support.v7.widget.Toolbar;\nimport android.view.View;\n\nimport com.codeest.geeknews.R;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.base.RootActivity;\nimport com.codeest.geeknews.model.bean.SectionChildListBean;\nimport com.codeest.geeknews.presenter.zhihu.SectionChildPresenter;\nimport com.codeest.geeknews.base.contract.zhihu.SectionChildContract;\nimport com.codeest.geeknews.ui.zhihu.adapter.SectionChildAdapter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\n\n/**\n * Created by codeest on 16/8/28.\n */\n\npublic class SectionActivity extends RootActivity<SectionChildPresenter> implements SectionChildContract.View {\n\n    @BindView(R.id.view_main)\n    RecyclerView rvSectionContent;\n    @BindView(R.id.swipe_refresh)\n    SwipeRefreshLayout swipeRefresh;\n    @BindView(R.id.tool_bar)\n    Toolbar mToolBar;\n\n    List<SectionChildListBean.StoriesBean> mList;\n    SectionChildAdapter mAdapter;\n\n    int id;\n    String title;\n\n    @Override\n    protected void initInject() {\n        getActivityComponent().inject(this);\n    }\n\n    @Override\n    protected int getLayout() {\n        return R.layout.activity_section;\n    }\n\n    @Override\n    protected void initEventAndData() {\n        super.initEventAndData();\n        Intent intent = getIntent();\n        id = intent.getIntExtra("id", 0);\n        title = intent.getStringExtra("title");\n        setToolBar(mToolBar,title);\n        mList = new ArrayList<>();\n        mAdapter = new SectionChildAdapter(mContext, mList);\n        rvSectionContent.setLayoutManager(new LinearLayoutManager(mContext));\n        rvSectionContent.setAdapter(mAdapter);\n        swipeRefresh.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {\n            @Override\n            public void onRefresh() {\n                mPresenter.getThemeChildData(id);\n            }\n        });\n        mAdapter.setOnItemClickListener(new SectionChildAdapter.OnItemClickListener() {\n            @Override\n            public void OnItemClick(int position, View shareView) {\n                mPresenter.insertReadToDB(mList.get(position).getId());\n                mAdapter.setReadState(position, true);\n                mAdapter.notifyItemChanged(position);\n                Intent intent = new Intent();\n                intent.setClass(mContext, ZhihuDetailActivity.class);\n                intent.putExtra(Constants.IT_ZHIHU_DETAIL_ID, mList.get(position).getId());\n                if (shareView != null) {\n                    mContext.startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(mContext, shareView, "shareView").toBundle());\n                } else {\n                    startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(mContext).toBundle());\n                }\n            }\n        });\n        mPresenter.getThemeChildData(id);\n        stateLoading();\n    }\n\n    @Override\n    public void showContent(SectionChildListBean sectionChildListBean) {\n        if(swipeRefresh.isRefreshing()) {\n            swipeRefresh.setRefreshing(false);\n        }\n        stateMain();\n        mList.clear();\n        mList.addAll(sectionChildListBean.getStories());\n        mAdapter.notifyDataSetChanged();\n    }\n\n    @Override\n    public void stateError() {\n        super.stateError();\n        if(swipeRefresh.isRefreshing()) {\n            swipeRefresh.setRefreshing(false);\n        }\n    }\n}\n'