b'package com.quyunshuo.androidbaseframemvvm.base.utils\n\nimport android.app.ActivityManager\nimport android.content.Context\nimport android.content.pm.PackageManager\nimport android.os.Process\nimport kotlin.jvm.Throws\n\n/**\n * \xe8\xbf\x9b\xe7\xa8\x8b\xe5\xb7\xa5\xe5\x85\xb7\xe7\xb1\xbb\n *\n * @author Qu Yunshuo\n * @since 3/16/21 9:06 AM\n */\nobject ProcessUtils {\n\n    /**\n     * \xe8\x8e\xb7\xe5\x8f\x96\xe5\xbd\x93\xe5\x89\x8d\xe6\x89\x80\xe6\x9c\x89\xe8\xbf\x9b\xe7\xa8\x8b\n     *\n     * @param context Context \xe4\xb8\x8a\xe4\xb8\x8b\xe6\x96\x87\n     * @return List<ActivityManager.RunningAppProcessInfo> \xe5\xbd\x93\xe5\x89\x8d\xe6\x89\x80\xe6\x9c\x89\xe8\xbf\x9b\xe7\xa8\x8b\n     */\n    fun getRunningAppProcessList(context: Context): List<ActivityManager.RunningAppProcessInfo> {\n        val activityManager = context.getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager\n        return activityManager.runningAppProcesses\n    }\n\n    /**\n     * \xe5\x88\xa4\xe6\x96\xad\xe8\xaf\xa5\xe8\xbf\x9b\xe7\xa8\x8bid\xe6\x98\xaf\xe5\x90\xa6\xe5\xb1\x9e\xe4\xba\x8e\xe8\xaf\xa5\xe8\xbf\x9b\xe7\xa8\x8b\xe5\x90\x8d\xe7\x9a\x84\xe8\xbf\x9b\xe7\xa8\x8b\n     *\n     * @param context Context \xe4\xb8\x8a\xe4\xb8\x8b\xe6\x96\x87\n     * @param processId Int \xe8\xbf\x9b\xe7\xa8\x8bId\n     * @param processName String \xe8\xbf\x9b\xe7\xa8\x8b\xe5\x90\x8d\n     * @return Boolean\n     */\n    fun isPidOfProcessName(context: Context, processId: Int, processName: String): Boolean {\n        // \xe9\x81\x8d\xe5\x8e\x86\xe6\x89\x80\xe6\x9c\x89\xe8\xbf\x9b\xe7\xa8\x8b\xe6\x89\xbe\xe5\x88\xb0\xe8\xaf\xa5\xe8\xbf\x9b\xe7\xa8\x8bid\xe5\xaf\xb9\xe5\xba\x94\xe7\x9a\x84\xe8\xbf\x9b\xe7\xa8\x8b\n        for (process in getRunningAppProcessList(context)) {\n            if (process.pid == processId) {\n                // \xe5\x88\xa4\xe6\x96\xad\xe8\xaf\xa5\xe8\xbf\x9b\xe7\xa8\x8bid\xe6\x98\xaf\xe5\x90\xa6\xe5\x92\x8c\xe8\xbf\x9b\xe7\xa8\x8b\xe5\x90\x8d\xe4\xb8\x80\xe8\x87\xb4\n                return (process.processName == processName)\n            }\n        }\n        return false\n    }\n\n    /**\n     * \xe8\x8e\xb7\xe5\x8f\x96\xe4\xb8\xbb\xe8\xbf\x9b\xe7\xa8\x8b\xe5\x90\x8d\n     *\n     * @param context Context \xe4\xb8\x8a\xe4\xb8\x8b\xe6\x96\x87\n     * @return String \xe4\xb8\xbb\xe8\xbf\x9b\xe7\xa8\x8b\xe5\x90\x8d\n     * @throws PackageManager.NameNotFoundException if a package with the given name cannot be found on the system.\n     */\n    @Throws(PackageManager.NameNotFoundException::class)\n    fun getMainProcessName(context: Context): String {\n        val applicationInfo = context.packageManager.getApplicationInfo(context.packageName, 0)\n        return applicationInfo.processName\n    }\n\n    /**\n     * \xe5\x88\xa4\xe6\x96\xad\xe5\xbd\x93\xe5\x89\x8d\xe8\xbf\x9b\xe7\xa8\x8b\xe6\x98\xaf\xe5\x90\xa6\xe6\x98\xaf\xe4\xb8\xbb\xe8\xbf\x9b\xe7\xa8\x8b\n     *\n     * @param context Context \xe4\xb8\x8a\xe4\xb8\x8b\xe6\x96\x87\n     * @return Boolean\n     * @throws PackageManager.NameNotFoundException if a package with the given name cannot be found on the system.\n     */\n    @Throws(PackageManager.NameNotFoundException::class)\n    fun isMainProcess(context: Context): Boolean {\n        val processId = Process.myPid()\n        val mainProcessName = getMainProcessName(context)\n        return isPidOfProcessName(context, processId, mainProcessName)\n    }\n}'