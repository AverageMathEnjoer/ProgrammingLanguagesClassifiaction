b'\xef\xbb\xbfusing RonSijm.ButtFish.Devices;\n\nnamespace RonSijm.ButtFish.InputLoops;\n\npublic class ManualInputLoop : IInputLoop\n{\n    private readonly DeviceBroadcaster _deviceBroadcaster;\n\n    public ManualInputLoop(DeviceBroadcaster deviceBroadcaster)\n    {\n        _deviceBroadcaster = deviceBroadcaster;\n    }\n\n    public async Task Start(IList<IDeviceAbstraction> devices)\n    {\n        Console.WriteLine("Using Manual move input");\n\n        do\n        {\n            try\n            {\n                Console.WriteLine("What\'s the next move?", Color.Green);\n                var nextPosition = Console.ReadLine();\n\n                // If you just send a whitespace, the engine keeps waiting for the rest of the command\n                if (string.IsNullOrWhiteSpace(nextPosition))\n                {\n                    Console.WriteLine("You didn\'t have to press enter there...", Color.Orange);\n                    continue;\n                }\n\n                await _deviceBroadcaster.SendNextMoveToDevice(nextPosition, devices);\n                Console.WriteLine();\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(); // Blank line because chess moves were not placed on a new line.\n                Console.WriteLine("Error occurred.", Color.Red);\n                Console.WriteLine(e, Color.Red);\n\n                if (!string.IsNullOrWhiteSpace(e.Source))\n                {\n                    Console.WriteLine($"Source:{e.Source}", Color.Red);\n                }\n            }\n        } while (true);\n        // ReSharper disable once FunctionNeverReturns\n    }\n}'