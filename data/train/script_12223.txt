b'package com.github.eprendre.sources_by_eprendre\n\nimport com.github.eprendre.tingshu.extensions.config\nimport com.github.eprendre.tingshu.sources.AudioUrlExtractor\nimport com.github.eprendre.tingshu.sources.AudioUrlWebViewExtractor\nimport com.github.eprendre.tingshu.sources.TingShu\nimport com.github.eprendre.tingshu.utils.*\nimport org.jsoup.Jsoup\nimport java.net.URLEncoder\n\nobject MaLaTingShu : TingShu() {\n    override fun getSourceId(): String {\n        return "0e2f8065189e417f9b200d8e37ee9d91"\n    }\n\n    override fun getUrl(): String {\n        return "https://m.malatingshu.com"\n    }\n\n    override fun getName(): String {\n        return "\xe9\xba\xbb\xe8\xbe\xa3\xe5\x90\xac\xe4\xb9\xa6"\n    }\n\n    override fun getDesc(): String {\n        return "\xe6\x8e\xa8\xe8\x8d\x90\xe6\x8c\x87\xe6\x95\xb0:2\xe6\x98\x9f \xe2\xad\x90\xe2\xad\x90\\n\xe7\xbd\x91\xe7\xab\x99\xe5\xb7\xb2\xe5\x85\xb3\xe9\x97\xad\xef\xbc\x8c\xe8\xaf\xb7\xe7\xa6\x81\xe7\x94\xa8\xe6\xad\xa4\xe6\xba\x90"\n    }\n\n    override fun isDiscoverable(): Boolean {\n        return false\n    }\n\n    override fun isSearchable(): Boolean {\n        return false\n    }\n\n    override fun search(keywords: String, page: Int): Pair<List<Book>, Int> {\n        val encodedKeywords = URLEncoder.encode(keywords, "utf-8")\n        val url = "https://m.malatingshu.com/vod-search-wd-$encodedKeywords-p-$page.html"\n        val doc = Jsoup.connect(url).config().get()\n\n        val totalPage = if (doc.getElementById("ff-next") != null) {\n            page + 1\n        } else {\n            page\n        }\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select(".container > .vod-item-img > li")\n        elementList.forEach { element ->\n            val bookUrl = element.selectFirst("h2 > a").absUrl("href")\n            val coverUrl = element.selectFirst(".image > a > img").attr("data-original")\n            val title = element.selectFirst("h2 > a").text()\n            val author = "\xe4\xbd\x9c\xe8\x80\x85: ${element.selectFirst("h4 > a").text()}"\n            list.add(Book(coverUrl, bookUrl, title, author, "").apply {\n                this.sourceId = getSourceId()\n            })\n        }\n\n        return Pair(list, totalPage)\n    }\n\n    override fun getBookDetailInfo(bookUrl: String, loadEpisodes: Boolean, loadFullPages: Boolean): BookDetail {\n        val doc = Jsoup.connect(bookUrl).config().get()\n        val episodes = doc.select(".ff-playurl > li[data-id] > a").map {\n            Episode(it.text(), it.attr("abs:href"))\n        }\n\n        val intro = doc.selectFirst(".vod-nav-content").text()\n        val artist = "\xe4\xb8\xbb\xe6\x92\xad: " + doc.select(".dl-horizontal > dd")[1].text()\n\n        return BookDetail(episodes, intro, artist)\n    }\n\n    override fun getAudioUrlExtractor(): AudioUrlExtractor {\n        AudioUrlWebViewExtractor.setUp(\n            script = "(function() { return (\'<html>\'+document.getElementById(\\"xplayer\\").contentDocument.documentElement.innerHTML+\'</html>\'); })();"\n        ) { str ->\n            val doc = Jsoup.parse(str)\n            val audioElement = doc.selectFirst("audio")\n            return@setUp audioElement?.attr("src")\n        }\n        return AudioUrlWebViewExtractor\n    }\n\n    override fun getCategoryMenus(): List<CategoryMenu> {\n        val menu1 = CategoryMenu(\n            "\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4", listOf(\n                CategoryTab("\xe7\x8e\x84\xe5\xb9\xbb", "https://m.malatingshu.com/list-select-id-1-type-%E7%8E%84%E5%B9%BB-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xa9\xbf\xe8\xb6\x8a", "https://m.malatingshu.com/list-select-id-1-type-%E7%A9%BF%E8%B6%8A-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\x81\x90\xe6\x80\x96", "https://m.malatingshu.com/list-select-id-1-type-%E6%81%90%E6%80%96-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe9\x83\xbd\xe5\xb8\x82", "https://m.malatingshu.com/list-select-id-1-type-%E9%83%BD%E5%B8%82-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe8\xa8\x80\xe6\x83\x85", "https://m.malatingshu.com/list-select-id-1-type-%E8%A8%80%E6%83%85-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xa7\x91\xe5\xb9\xbb", "https://m.malatingshu.com/list-select-id-1-type-%E7%A7%91%E5%B9%BB-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\xad\xa6\xe4\xbe\xa0", "https://m.malatingshu.com/list-select-id-1-type-%E6%AD%A6%E4%BE%A0-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\x8e\xa8\xe7\x90\x86", "https://m.malatingshu.com/list-select-id-1-type-%E6%8E%A8%E7%90%86-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\x8e\x86\xe5\x8f\xb2", "https://m.malatingshu.com/list-select-id-1-type-%E5%8E%86%E5%8F%B2-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\x86\x9b\xe4\xba\x8b", "https://m.malatingshu.com/list-select-id-1-type-%E5%86%9B%E4%BA%8B-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xbd\x91\xe6\xb8\xb8", "https://m.malatingshu.com/list-select-id-1-type-%E7%BD%91%E6%B8%B8-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xbb\x8f\xe5\x85\xb8", "https://m.malatingshu.com/list-select-id-1-type-%E7%BB%8F%E5%85%B8-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xb2\xa4\xe8\xaf\xad", "https://m.malatingshu.com/list-select-id-1-type-%E7%B2%A4%E8%AF%AD-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\xb9\xbf\xe6\x92\xad\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-1-type-%E5%B9%BF%E6%92%AD%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\x85\xbb\xe7\x94\x9f", "https://m.malatingshu.com/list-select-id-1-type-%E5%85%BB%E7%94%9F-area--year--star--state--order-addtime.html")\n            )\n        )\n        val menu2 = CategoryMenu(\n            "\xe8\xaf\x84\xe4\xb9\xa6", listOf(\n                CategoryTab("\xe8\xaf\x84\xe4\xb9\xa6", "https://m.malatingshu.com/list-select-id-2-type-%E8%AF%84%E4%B9%A6-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xb2\xa4\xe8\xaf\xad\xe8\xaf\x84\xe4\xb9\xa6", "https://m.malatingshu.com/list-select-id-2-type-%E7%B2%A4%E8%AF%AD%E8%AF%84%E4%B9%A6-area--year--star--state--order-addtime.html")\n\n            )\n        )\n        val menu3 = CategoryMenu(\n            "\xe7\x9b\xb8\xe5\xa3\xb0\xe5\xb0\x8f\xe5\x93\x81", listOf(\n                CategoryTab("\xe7\x9b\xb8\xe5\xa3\xb0", "https://m.malatingshu.com/list-select-id-3-type-%E7%9B%B8%E5%A3%B0-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\xb0\x8f\xe5\x93\x81", "https://m.malatingshu.com/list-select-id-3-type-%E5%B0%8F%E5%93%81-area--year--star--state--order-addtime.html")\n            )\n        )\n        val menu4 = CategoryMenu(\n            "\xe6\x88\x8f\xe6\x9b\xb2", listOf(\n                CategoryTab("\xe4\xba\xac\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E4%BA%AC%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe8\xaf\x84\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E8%AF%84%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe8\xb6\x8a\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E8%B6%8A%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe9\xbb\x84\xe6\xa2\x85\xe6\x88\x8f", "https://m.malatingshu.com/list-select-id-4-type-%E9%BB%84%E6%A2%85%E6%88%8F-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe8\xb1\xab\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E8%B1%AB%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe5\xb7\x9d\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E5%B7%9D%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\x99\x8b\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E6%99%8B%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\x98\x86\xe6\x9b\xb2", "https://m.malatingshu.com/list-select-id-4-type-%E6%98%86%E6%9B%B2-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\xb2\xaa\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E6%B2%AA%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\xbd\xae\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E6%BD%AE%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\xb2\xb3\xe5\x8c\x97\xe6\xa2\x86\xe5\xad\x90", "https://m.malatingshu.com/list-select-id-4-type-%E6%B2%B3%E5%8C%97%E6%A2%86%E5%AD%90-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\x9b\xb2\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E6%9B%B2%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe6\xb2\xb3\xe5\x8d\x97\xe5\x9d\xa0\xe5\xad\x90", "https://m.malatingshu.com/list-select-id-4-type-%E6%B2%B3%E5%8D%97%E5%9D%A0%E5%AD%90-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe8\x92\xb2\xe5\x89\xa7", "https://m.malatingshu.com/list-select-id-4-type-%E8%92%B2%E5%89%A7-area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe4\xba\x8c\xe4\xba\xba\xe8\xbd\xac", "https://m.malatingshu.com/list-select-id-4-type-%E4%BA%8C%E4%BA%BA%E8%BD%AC-area--year--star--state--order-addtime.html")\n            )\n        )\n        val menu5 = CategoryMenu(\n            "\xe5\x85\xb6\xe5\xae\x83", listOf(\n                CategoryTab("\xe5\x84\xbf\xe7\xab\xa5", "https://m.malatingshu.com/list-select-id-6-type--area--year--star--state--order-addtime.html"),\n                CategoryTab("\xe7\xac\x91\xe8\xaf\x9d", "https://m.malatingshu.com/list-select-id-5-type--area--year--star--state--order-addtime.html")\n            )\n        )\n        return listOf(menu1, menu2, menu3, menu4, menu5)\n    }\n\n    override fun getCategoryList(url: String): Category {\n        val doc = Jsoup.connect(url).config().get()\n        val nextUrl = doc.getElementById("ff-next")?.absUrl("href") ?: ""\n        val currentPage = Regex(".+-p-(\\\\d+).html").find(url)?.groupValues?.get(1)?.toInt() ?: 1\n        val totalPage = if (nextUrl.isEmpty()) {\n            currentPage\n        } else {\n            currentPage + 1\n        }\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select(".container > .vod-item-img > li")\n        elementList.forEach { element ->\n            val bookUrl = element.selectFirst("h2 > a").absUrl("href")\n            val coverUrl = element.selectFirst(".image > a > img").attr("data-original")\n            val title = element.selectFirst("h2 > a").text()\n            val author = "\xe4\xbd\x9c\xe8\x80\x85: ${element.selectFirst("h4 > a").text()}"\n            list.add(Book(coverUrl, bookUrl, title, author, "").apply {\n                this.sourceId = getSourceId()\n            })\n        }\n\n        return Category(list, currentPage, totalPage, url, nextUrl)\n    }\n\n}'