b'module Cachix.Client.CNix where\n\nimport Hercules.CNix.Store (Store, StorePath, isValidPath, storePathToPath)\nimport Protolude\nimport System.Console.Pretty (Color (..), color)\n\nfilterInvalidStorePaths :: Store -> [StorePath] -> IO [Maybe StorePath]\nfilterInvalidStorePaths store =\n  traverse (filterInvalidStorePath store)\n\nfilterInvalidStorePath :: Store -> StorePath -> IO (Maybe StorePath)\nfilterInvalidStorePath store storePath = do\n  isValid <- isValidPath store storePath\n  if isValid\n    then return $ Just storePath\n    else do\n      path <- storePathToPath store storePath\n      hPutStrLn stderr $ color Yellow $ "Warning: " <> decodeUtf8With lenientDecode path <> " is not valid, skipping"\n      return Nothing\n'