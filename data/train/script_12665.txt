b'package com.yyy.djk.dropdownmenu;\n\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.util.TypedValue;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.AdapterView;\nimport android.widget.GridView;\nimport android.widget.ListView;\nimport android.widget.TextView;\n\nimport com.yyydjk.library.DropDownMenu;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport butterknife.ButterKnife;\nimport butterknife.InjectView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @InjectView(R.id.dropDownMenu) DropDownMenu mDropDownMenu;\n    private String headers[] = {"\xe5\x9f\x8e\xe5\xb8\x82", "\xe5\xb9\xb4\xe9\xbe\x84", "\xe6\x80\xa7\xe5\x88\xab", "\xe6\x98\x9f\xe5\xba\xa7"};\n    private List<View> popupViews = new ArrayList<>();\n\n    private GirdDropDownAdapter cityAdapter;\n    private ListDropDownAdapter ageAdapter;\n    private ListDropDownAdapter sexAdapter;\n    private ConstellationAdapter constellationAdapter;\n\n    private String citys[] = {"\xe4\xb8\x8d\xe9\x99\x90", "\xe6\xad\xa6\xe6\xb1\x89", "\xe5\x8c\x97\xe4\xba\xac", "\xe4\xb8\x8a\xe6\xb5\xb7", "\xe6\x88\x90\xe9\x83\xbd", "\xe5\xb9\xbf\xe5\xb7\x9e", "\xe6\xb7\xb1\xe5\x9c\xb3", "\xe9\x87\x8d\xe5\xba\x86", "\xe5\xa4\xa9\xe6\xb4\xa5", "\xe8\xa5\xbf\xe5\xae\x89", "\xe5\x8d\x97\xe4\xba\xac", "\xe6\x9d\xad\xe5\xb7\x9e"};\n    private String ages[] = {"\xe4\xb8\x8d\xe9\x99\x90", "18\xe5\xb2\x81\xe4\xbb\xa5\xe4\xb8\x8b", "18-22\xe5\xb2\x81", "23-26\xe5\xb2\x81", "27-35\xe5\xb2\x81", "35\xe5\xb2\x81\xe4\xbb\xa5\xe4\xb8\x8a"};\n    private String sexs[] = {"\xe4\xb8\x8d\xe9\x99\x90", "\xe7\x94\xb7", "\xe5\xa5\xb3"};\n    private String constellations[] = {"\xe4\xb8\x8d\xe9\x99\x90", "\xe7\x99\xbd\xe7\xbe\x8a\xe5\xba\xa7", "\xe9\x87\x91\xe7\x89\x9b\xe5\xba\xa7", "\xe5\x8f\x8c\xe5\xad\x90\xe5\xba\xa7", "\xe5\xb7\xa8\xe8\x9f\xb9\xe5\xba\xa7", "\xe7\x8b\xae\xe5\xad\x90\xe5\xba\xa7", "\xe5\xa4\x84\xe5\xa5\xb3\xe5\xba\xa7", "\xe5\xa4\xa9\xe7\xa7\xa4\xe5\xba\xa7", "\xe5\xa4\xa9\xe8\x9d\x8e\xe5\xba\xa7", "\xe5\xb0\x84\xe6\x89\x8b\xe5\xba\xa7", "\xe6\x91\xa9\xe7\xbe\xaf\xe5\xba\xa7", "\xe6\xb0\xb4\xe7\x93\xb6\xe5\xba\xa7", "\xe5\x8f\x8c\xe9\xb1\xbc\xe5\xba\xa7"};\n\n    private int constellationPosition = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        ButterKnife.inject(this);\n        initView();\n    }\n\n    private void initView() {\n        //init city menu\n        final ListView cityView = new ListView(this);\n        cityAdapter = new GirdDropDownAdapter(this, Arrays.asList(citys));\n        cityView.setDividerHeight(0);\n        cityView.setAdapter(cityAdapter);\n\n        //init age menu\n        final ListView ageView = new ListView(this);\n        ageView.setDividerHeight(0);\n        ageAdapter = new ListDropDownAdapter(this, Arrays.asList(ages));\n        ageView.setAdapter(ageAdapter);\n\n        //init sex menu\n        final ListView sexView = new ListView(this);\n        sexView.setDividerHeight(0);\n        sexAdapter = new ListDropDownAdapter(this, Arrays.asList(sexs));\n        sexView.setAdapter(sexAdapter);\n\n        //init constellation\n        final View constellationView = getLayoutInflater().inflate(R.layout.custom_layout, null);\n        GridView constellation = ButterKnife.findById(constellationView, R.id.constellation);\n        constellationAdapter = new ConstellationAdapter(this, Arrays.asList(constellations));\n        constellation.setAdapter(constellationAdapter);\n        TextView ok = ButterKnife.findById(constellationView, R.id.ok);\n        ok.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mDropDownMenu.setTabText(constellationPosition == 0 ? headers[3] : constellations[constellationPosition]);\n                mDropDownMenu.closeMenu();\n            }\n        });\n\n        //init popupViews\n        popupViews.add(cityView);\n        popupViews.add(ageView);\n        popupViews.add(sexView);\n        popupViews.add(constellationView);\n\n        //add item click event\n        cityView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                cityAdapter.setCheckItem(position);\n                mDropDownMenu.setTabText(position == 0 ? headers[0] : citys[position]);\n                mDropDownMenu.closeMenu();\n            }\n        });\n\n        ageView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                ageAdapter.setCheckItem(position);\n                mDropDownMenu.setTabText(position == 0 ? headers[1] : ages[position]);\n                mDropDownMenu.closeMenu();\n            }\n        });\n\n        sexView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                sexAdapter.setCheckItem(position);\n                mDropDownMenu.setTabText(position == 0 ? headers[2] : sexs[position]);\n                mDropDownMenu.closeMenu();\n            }\n        });\n\n        constellation.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                constellationAdapter.setCheckItem(position);\n                constellationPosition = position;\n            }\n        });\n\n        //init context view\n        TextView contentView = new TextView(this);\n        contentView.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));\n        contentView.setText("\xe5\x86\x85\xe5\xae\xb9\xe6\x98\xbe\xe7\xa4\xba\xe5\x8c\xba\xe5\x9f\x9f");\n        contentView.setGravity(Gravity.CENTER);\n        contentView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20);\n\n        //init dropdownview\n        mDropDownMenu.setDropDownMenu(Arrays.asList(headers), popupViews, contentView);\n    }\n\n    @Override\n    public void onBackPressed() {\n        //\xe9\x80\x80\xe5\x87\xbaactivity\xe5\x89\x8d\xe5\x85\xb3\xe9\x97\xad\xe8\x8f\x9c\xe5\x8d\x95\n        if (mDropDownMenu.isShowing()) {\n            mDropDownMenu.closeMenu();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n'