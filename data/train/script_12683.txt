b'package com.codeest.geeknews.component;\n\nimport android.app.IntentService;\nimport android.content.Context;\nimport android.content.Intent;\n\nimport com.codeest.geeknews.app.App;\nimport com.codeest.geeknews.app.Constants;\nimport com.codeest.geeknews.util.SystemUtil;\nimport com.codeest.geeknews.widget.AppBlockCanaryContext;\nimport com.github.moduth.blockcanary.BlockCanary;\nimport com.orhanobut.logger.Logger;\nimport com.squareup.leakcanary.LeakCanary;\nimport com.tencent.bugly.crashreport.CrashReport;\nimport com.tencent.smtt.sdk.QbSdk;\n\nimport static com.codeest.geeknews.util.LogUtil.isDebug;\n\n/**\n * Created by codeest on 2017/2/12.\n */\n\npublic class InitializeService extends IntentService {\n\n    private static final String ACTION_INIT = "initApplication";\n\n    public InitializeService() {\n        super("InitializeService");\n    }\n\n    public static void start(Context context) {\n        Intent intent = new Intent(context, InitializeService.class);\n        intent.setAction(ACTION_INIT);\n        context.startService(intent);\n    }\n\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        if (intent != null) {\n            final String action = intent.getAction();\n            if (ACTION_INIT.equals(action)) {\n                initApplication();\n            }\n        }\n    }\n\n    private void initApplication() {\n        //\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe6\x97\xa5\xe5\xbf\x97\n        Logger.init(getPackageName()).hideThreadInfo();\n\n        //\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe9\x94\x99\xe8\xaf\xaf\xe6\x94\xb6\xe9\x9b\x86\n//        CrashHandler.init(new CrashHandler(getApplicationContext()));\n        initBugly();\n\n        //\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe5\x86\x85\xe5\xad\x98\xe6\xb3\x84\xe6\xbc\x8f\xe6\xa3\x80\xe6\xb5\x8b\n        LeakCanary.install(App.getInstance());\n\n        //\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe8\xbf\x87\xe5\xba\xa6\xe7\xbb\x98\xe5\x88\xb6\xe6\xa3\x80\xe6\xb5\x8b\n        BlockCanary.install(getApplicationContext(), new AppBlockCanaryContext()).start();\n\n        //\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96tbs x5 webview\n        QbSdk.allowThirdPartyAppDownload(true);\n        QbSdk.initX5Environment(getApplicationContext(), QbSdk.WebviewInitType.FIRSTUSE_AND_PRELOAD, new QbSdk.PreInitCallback() {\n            @Override\n            public void onCoreInitFinished() {\n            }\n\n            @Override\n            public void onViewInitFinished(boolean b) {\n            }\n        });\n    }\n\n    private void initBugly() {\n        Context context = getApplicationContext();\n        String packageName = context.getPackageName();\n        String processName = SystemUtil.getProcessName(android.os.Process.myPid());\n        CrashReport.UserStrategy strategy = new CrashReport.UserStrategy(context);\n        strategy.setUploadProcess(processName == null || processName.equals(packageName));\n        CrashReport.initCrashReport(context, Constants.BUGLY_ID, isDebug, strategy);\n    }\n}\n'