b"module Cachix.Deploy.StdinProcess where\n\nimport Protolude hiding (stdin)\nimport System.IO (hClose)\nimport System.Process\nimport Prelude (String)\n\n-- | Run a process with only stdin as an input\nreadProcess :: FilePath -> [String] -> String -> IO ExitCode\nreadProcess cmd args input = do\n  (Just stdin, _, _, pHandle) <-\n    createProcess\n      (proc cmd args)\n        { std_in = CreatePipe,\n          -- When launching cachix-deployment we need to make sure it's not killed when the main process is killed\n          create_group = True,\n          -- Same, but with posix api\n          new_session = True\n        }\n\n  hPutStr stdin input\n  hClose stdin\n\n  waitForProcess pHandle\n"