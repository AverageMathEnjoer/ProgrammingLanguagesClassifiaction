b'package com.quyunshuo.androidbaseframemvvm.base.utils.network\n\nimport android.content.Context\nimport android.net.ConnectivityManager\nimport android.net.NetworkCapabilities\nimport android.net.NetworkRequest\nimport androidx.annotation.RequiresPermission\nimport com.quyunshuo.androidbaseframemvvm.base.BaseApplication\n\n/**\n * \xe7\xbd\x91\xe7\xbb\x9c\xe7\x8a\xb6\xe6\x80\x81\xe7\x9b\x91\xe5\x90\xac\n *\n * @author Qu Yunshuo\n * @since 2021/7/11 3:58 \xe4\xb8\x8b\xe5\x8d\x88\n */\nobject NetworkStateClient {\n\n    private val mNetworkCallback = NetworkCallbackImpl()\n\n    /**\n     * \xe6\xb3\xa8\xe5\x86\x8c\xe7\xbd\x91\xe7\xbb\x9c\xe7\x9b\x91\xe5\x90\xac\xe5\xae\xa2\xe6\x88\xb7\xe7\xab\xaf\n     * @return Unit\n     */\n    @RequiresPermission(android.Manifest.permission.ACCESS_NETWORK_STATE)\n    fun register() {\n        val build = NetworkRequest.Builder().build()\n        val cm =\n            BaseApplication.context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n        cm.registerNetworkCallback(build, mNetworkCallback)\n    }\n\n    /**\n     * \xe8\xae\xbe\xe7\xbd\xae\xe7\x9b\x91\xe5\x90\xac\xe5\x99\xa8\n     * @param listener NetworkStateChangeListener \xe7\x9b\x91\xe5\x90\xac\xe5\x99\xa8\n     * @return Unit\n     */\n    fun setListener(listener: NetworkStateChangeListener) {\n        mNetworkCallback.changeCall = listener\n    }\n\n    /**\n     * \xe7\xa7\xbb\xe9\x99\xa4\xe7\x9b\x91\xe5\x90\xac\xe5\x99\xa8\n     * @return Unit\n     */\n    fun removeListener() {\n        mNetworkCallback.changeCall = null\n    }\n\n    /**\n     * \xe8\x8e\xb7\xe5\x8f\x96\xe7\xbd\x91\xe7\xbb\x9c\xe7\xb1\xbb\xe5\x9e\x8b\n     * \xe5\xbd\x93\xe5\x89\x8d\xe7\xbd\x91\xe7\xbb\x9c\xe7\xb1\xbb\xe5\x9e\x8b\xe6\x98\xaf\xe7\xbc\x93\xe5\xad\x98\xe7\x9a\x84\xe6\x9c\x80\xe8\xbf\x91\xe4\xb8\x80\xe6\xac\xa1\xe8\xbf\x9e\xe6\x8e\xa5\xe7\x9a\x84\xe7\xbd\x91\xe7\xbb\x9c\xe7\xb1\xbb\xe5\x9e\x8b\xef\xbc\x8c\xe5\xbd\x93\xe6\x97\xa0\xe7\xbd\x91\xe7\xbb\x9c\xe8\xbf\x9e\xe6\x8e\xa5\xe6\x97\xb6\xe5\x85\xb6\xe5\xae\x9e\xe6\x8b\xbf\xe5\x88\xb0\xe7\x9a\x84\xe6\x98\xaf\xe4\xb8\x8a\xe4\xb8\x80\xe6\xac\xa1\xe7\x9a\x84\n     * \xe6\x89\x80\xe4\xbb\xa5\xe7\xbd\x91\xe7\xbb\x9c\xe6\x98\xaf\xe5\x90\xa6\xe8\xbf\x9e\xe6\x8e\xa5\xe5\xba\x94\xe8\xaf\xa5\xe4\xbd\x9c\xe4\xb8\xba\xe7\xac\xac\xe4\xb8\x80\xe5\x88\xa4\xe6\x96\xad\xef\xbc\x8c\xe7\xa1\xae\xe5\xae\x9a\xe7\xbd\x91\xe7\xbb\x9c\xe6\x98\xaf\xe8\xbf\x9e\xe6\x8e\xa5\xe7\x8a\xb6\xe6\x80\x81\xe6\x97\xb6\xe5\x86\x8d\xe8\x8e\xb7\xe5\x8f\x96\xe5\xbd\x93\xe5\x89\x8d\xe7\x9a\x84\xe7\xbd\x91\xe7\xbb\x9c\xe7\xb1\xbb\xe5\x9e\x8b\xef\xbc\x8c\xe5\x9b\xa0\xe4\xb8\xba\xe7\xbd\x91\xe7\xbb\x9c\xe7\xb1\xbb\xe5\x9e\x8b\xe4\xb8\xad\xe6\xb2\xa1\xe6\x9c\x89\xe8\xae\xbe\xe5\xae\x9a\xe6\x97\xa0\xe7\xbd\x91\n     * @return NetworkTypeEnum \xe5\x8f\x82\xe7\x85\xa7[NetworkTypeEnum]\n     */\n    fun getNetworkType(): NetworkTypeEnum = mNetworkCallback.currentNetworkType\n\n    /**\n     * \xe7\xbd\x91\xe7\xbb\x9c\xe6\x98\xaf\xe5\x90\xa6\xe8\xbf\x9e\xe6\x8e\xa5\n     * @return Boolean\n     */\n    fun isConnected(): Boolean = mNetworkCallback.isConnected\n}'