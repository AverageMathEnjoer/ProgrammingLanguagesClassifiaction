b'package com.github.eprendre.sources_by_eprendre\n\nimport com.github.eprendre.tingshu.extensions.config\nimport com.github.eprendre.tingshu.sources.AudioUrlExtractor\nimport com.github.eprendre.tingshu.sources.AudioUrlWebViewExtractor\nimport com.github.eprendre.tingshu.sources.TingShu\nimport com.github.eprendre.tingshu.utils.*\nimport org.jsoup.Jsoup\nimport java.net.URLEncoder\n\nobject M456TingShu :TingShu(){\n    override fun getSourceId(): String {\n        return "ba2346b90bc64a66bdae51388ade480a"\n    }\n\n    override fun getUrl(): String {\n        return "http://m.ting456.com/"\n    }\n\n    override fun getDesc(): String {\n        return "\xe6\x8e\xa8\xe8\x8d\x90\xe6\x8c\x87\xe6\x95\xb0:4\xe6\x98\x9f \xe2\xad\x90\xe2\xad\x90\xe2\xad\x90\xe2\xad\x90"\n    }\n\n    override fun getName(): String {\n        return "456\xe5\x90\xac\xe4\xb9\xa6\xe7\xbd\x91"\n    }\n\n    override fun search(keywords: String, page: Int): Pair<List<Book>, Int> {\n        val encodedKeywords = URLEncoder.encode(keywords, "utf-8")\n        val url = "http://m.ting456.com/search.php?searchword=${encodedKeywords}&Submit="\n        val doc = Jsoup.connect(url).config(false).get()\n        val totalPage = 1\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select("#cateList_wap > .bookbox")\n        elementList.forEach { element ->\n            val bookid = element.attr("bookid")\n            var coverUrl = element.selectFirst(".bookimg > img").attr("orgsrc")\n            if (coverUrl.startsWith("/")) {\n                coverUrl = "https://ting456.com${coverUrl}"\n            }\n            val bookUrl = "http://m.ting456.com/book/d${bookid}.html"\n            val title = element.selectFirst(".bookname").text()\n            val author = element.selectFirst(".author > a")?.text() ?: ""\n            val artist = ""\n            val status = element.selectFirst(".update").text()\n            val intro = element.selectFirst(".intro_line").text()\n            list.add(Book(coverUrl, bookUrl, title, author, artist).apply {\n                this.sourceId = getSourceId()\n                this.intro = intro\n                this.status = status\n            })\n        }\n\n        return Pair(list, totalPage)\n    }\n\n    override fun getAudioUrlExtractor(): AudioUrlExtractor {\n        AudioUrlWebViewExtractor.setUp(script = "document.getElementById(\'cciframe\').contentDocument.querySelector(\'iframe[runat=server]\').contentDocument.querySelector(\'#jp_audio_0\').src") {\n            return@setUp it.replace("\\"", "")\n        }\n        return AudioUrlWebViewExtractor\n    }\n\n    override fun getCategoryMenus(): List<CategoryMenu> {\n        val menu1 = CategoryMenu(\n            "\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4", listOf(\n                CategoryTab("\xe7\x8e\x84\xe5\xb9\xbb", "http://m.ting456.com/fenlei/c1.html"),\n                CategoryTab("\xe6\xad\xa6\xe4\xbe\xa0", "http://m.ting456.com/fenlei/c2.html"),\n                CategoryTab("\xe7\xa9\xbf\xe8\xb6\x8a", "http://m.ting456.com/fenlei/c3.html"),\n                CategoryTab("\xe9\x83\xbd\xe5\xb8\x82", "http://m.ting456.com/fenlei/c4.html"),\n                CategoryTab("\xe8\xa8\x80\xe6\x83\x85", "http://m.ting456.com/fenlei/c5.html"),\n                CategoryTab("\xe6\x81\x90\xe6\x80\x96", "http://m.ting456.com/fenlei/c6.html"),\n                CategoryTab("\xe6\x83\x8a\xe6\x82\x9a", "http://m.ting456.com/fenlei/c7.html"),\n                CategoryTab("\xe7\xa7\x91\xe5\xb9\xbb", "http://m.ting456.com/fenlei/c8.html"),\n                CategoryTab("\xe7\xbd\x91\xe6\xb8\xb8", "http://m.ting456.com/fenlei/c9.html"),\n                CategoryTab("\xe6\x8e\xa8\xe7\x90\x86", "http://m.ting456.com/fenlei/c10.html"),\n                CategoryTab("\xe5\x84\xbf\xe7\xab\xa5", "http://m.ting456.com/fenlei/c11.html"),\n                CategoryTab("\xe7\x9b\xb8\xe5\xa3\xb0", "http://m.ting456.com/fenlei/c12.html"),\n                CategoryTab("\xe5\xb0\x8f\xe5\x93\x81", "http://m.ting456.com/fenlei/c13.html"),\n                CategoryTab("\xe5\x8e\x86\xe5\x8f\xb2", "http://m.ting456.com/fenlei/c14.html"),\n                CategoryTab("\xe7\x99\xbe\xe5\xae\xb6\xe8\xae\xb2\xe5\x9d\x9b", "http://m.ting456.com/fenlei/c15.html"),\n                CategoryTab("\xe7\xbb\x8f\xe5\x85\xb8", "http://m.ting456.com/fenlei/c16.html"),\n                CategoryTab("\xe8\xaf\x84\xe4\xb9\xa6", "http://m.ting456.com/fenlei/c18.html"),\n                CategoryTab("\xe6\x88\x8f\xe6\x9b\xb2", "http://m.ting456.com/fenlei/c19.html"),\n                CategoryTab("\xe5\xad\xa6\xe4\xb9\xa0", "http://m.ting456.com/fenlei/c22.html"),\n                CategoryTab("\xe8\x81\x8c\xe5\x9c\xba", "http://m.ting456.com/fenlei/c23.html"),\n                CategoryTab("\xe5\xa8\xb1\xe4\xb9\x90", "http://m.ting456.com/fenlei/c24.html"),\n                CategoryTab("\xe5\xae\x98\xe5\x95\x86", "http://m.ting456.com/fenlei/c25.html"),\n                CategoryTab("\xe8\x8b\xb1\xe8\xaf\xad", "http://m.ting456.com/fenlei/c26.html"),\n                CategoryTab("\xe5\xbe\xae\xe5\xa3\xb0\xe9\x9f\xb3", "http://m.ting456.com/fenlei/c17.html"),\n                CategoryTab("\xe6\x9c\x89\xe5\xa3\xb0\xe5\xb0\x8f\xe8\xaf\xb4", "http://m.ting456.com/fenlei/c29.html"),\n                CategoryTab("\xe7\x83\xad\xe9\x97\xa8", "http://m.ting456.com/fenlei/c30.html")\n            )\n        )\n        return listOf(menu1)\n\n    }\n\n    override fun getCategoryList(url: String): Category {\n        val doc = Jsoup.connect(url).config(false).get()\n        var totalPage = 1\n        var currentPage = 1\n\n        val page = doc.selectFirst(".page")\n        page.ownText().replace("\xe9\xa1\xb5\xe6\xac\xa1 ", "").split("/").let {\n            currentPage = it[0].toInt()\n            totalPage = it[1].toInt()\n        }\n        val nextUrl = page.selectFirst("a")?.absUrl("href") ?: ""\n\n        val list = ArrayList<Book>()\n        val elementList = doc.select("#cateList_wap > .bookbox")\n        elementList.forEach { element ->\n            val bookid = element.attr("bookid")\n            var coverUrl = element.selectFirst(".bookimg > img").attr("orgsrc")\n            if (coverUrl.startsWith("/")) {\n                coverUrl = "http://m.ting456.com${coverUrl}"\n            }\n            val bookUrl = "http://m.ting456.com/book/d${bookid}.html"\n            val title = element.selectFirst(".bookname").text()\n            val author = element.selectFirst(".author > a")?.text() ?: ""\n            val artist = ""\n            val status = element.selectFirst(".update").text()\n            val intro = element.selectFirst(".intro_line").text()\n            list.add(Book(coverUrl, bookUrl, title, author, artist).apply {\n                this.sourceId = getSourceId()\n                this.intro = intro\n                this.status = status\n            })\n        }\n\n        return Category(list, currentPage, totalPage, url, nextUrl)\n    }\n\n    override fun getBookDetailInfo(bookUrl: String, loadEpisodes: Boolean, loadFullPages: Boolean): BookDetail {\n        var episodes = emptyList<Episode>()\n        if (loadEpisodes) {\n            val doc = Jsoup.connect(bookUrl).config(false).get()\n            doc.select("#playlist").forEach { element ->\n                val e = element.select("li > a").map {\n                    Episode(it.text(), it.absUrl("href"))\n                }.toList()\n                if (e.size > episodes.size) {\n                    episodes = e\n                }\n            }\n\n        }\n        return BookDetail(episodes)\n    }\n}'