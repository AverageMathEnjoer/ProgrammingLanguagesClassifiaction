b'package com.zzg.mybatis.generator.controller;\n\nimport com.zzg.mybatis.generator.model.GeneratorConfig;\nimport com.zzg.mybatis.generator.util.ConfigHelper;\nimport com.zzg.mybatis.generator.view.AlertUtil;\nimport javafx.collections.FXCollections;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.HBox;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.net.URL;\nimport java.util.List;\nimport java.util.ResourceBundle;\n\n/**\n * \xe7\xae\xa1\xe7\x90\x86GeneratorConfig\xe7\x9a\x84Controller\n *\n * Created by Owen on 8/21/16.\n */\npublic class GeneratorConfigController extends BaseFXController {\n\n    private static final Logger _LOG = LoggerFactory.getLogger(GeneratorConfigController.class);\n\n    @FXML\n    private TableView<GeneratorConfig> configTable;\n    @FXML\n    private TableColumn nameColumn;\n    @FXML\n    private TableColumn opsColumn;\n\n    private MainUIController mainUIController;\n\n    private GeneratorConfigController controller;\n\n    @Override\n    public void initialize(URL location, ResourceBundle resources) {\n        controller = this;\n        nameColumn.setCellValueFactory(new PropertyValueFactory<>("name"));\n        // \xe8\x87\xaa\xe5\xae\x9a\xe4\xb9\x89\xe6\x93\x8d\xe4\xbd\x9c\xe5\x88\x97\n        opsColumn.setCellValueFactory(new PropertyValueFactory<>("name"));\n        opsColumn.setCellFactory(cell -> {\n            return new TableCell() {\n                @Override\n                protected void updateItem(Object item, boolean empty) {\n                    super.updateItem(item, empty);\n                    if (item == null || empty) {\n                        setText(null);\n                        setGraphic(null);\n                    } else {\n                        Button btn1 = new Button("\xe5\xba\x94\xe7\x94\xa8");\n                        Button btn2 = new Button("\xe5\x88\xa0\xe9\x99\xa4");\n                        HBox hBox = new HBox();\n                        hBox.setSpacing(10);\n                        hBox.getChildren().add(btn1);\n                        hBox.getChildren().add(btn2);\n                        btn1.setOnAction(event -> {\n                            try {\n                                // \xe5\xba\x94\xe7\x94\xa8\xe9\x85\x8d\xe7\xbd\xae\n                                GeneratorConfig generatorConfig = ConfigHelper.loadGeneratorConfig(item.toString());\n                                mainUIController.setGeneratorConfigIntoUI(generatorConfig);\n                                controller.closeDialogStage();\n                            } catch (Exception e) {\n                                AlertUtil.showErrorAlert(e.getMessage());\n                            }\n                        });\n                        btn2.setOnAction(event -> {\n                            try {\n                                // \xe5\x88\xa0\xe9\x99\xa4\xe9\x85\x8d\xe7\xbd\xae\n                                _LOG.debug("item: {}", item);\n                                ConfigHelper.deleteGeneratorConfig(item.toString());\n                                refreshTableView();\n                            } catch (Exception e) {\n                                AlertUtil.showErrorAlert(e.getMessage());\n                            }\n                        });\n                        setGraphic(hBox);\n                    }\n                }\n            };\n        });\n        refreshTableView();\n    }\n\n    public void refreshTableView() {\n        try {\n            List<GeneratorConfig> configs = ConfigHelper.loadGeneratorConfigs();\n            configTable.setItems(FXCollections.observableList(configs));\n        } catch (Exception e) {\n            AlertUtil.showErrorAlert(e.getMessage());\n        }\n    }\n\n    void setMainUIController(MainUIController mainUIController) {\n        this.mainUIController = mainUIController;\n    }\n\n}\n'